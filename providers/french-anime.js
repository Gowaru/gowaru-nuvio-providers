/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-25T15:40:09.554Z
 */
var P=Object.create;var $=Object.defineProperty,W=Object.defineProperties,j=Object.getOwnPropertyDescriptor,H=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,I=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var D=(e,t,n)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))F.call(t,n)&&D(e,n,t[n]);if(S)for(var n of S(t))z.call(t,n)&&D(e,n,t[n]);return e},d=(e,t)=>W(e,H(t));var V=(e,t)=>{for(var n in t)$(e,n,{get:t[n],enumerable:!0})},T=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of L(t))!F.call(e,r)&&r!==n&&$(e,r,{get:()=>t[r],enumerable:!(s=j(t,r))||s.enumerable});return e};var _=(e,t,n)=>(n=e!=null?P(I(e)):{},T(t||!e||!e.__esModule?$(n,"default",{value:e,enumerable:!0}):n,e)),K=e=>T($({},"__esModule",{value:!0}),e);var l=(e,t,n)=>new Promise((s,r)=>{var o=i=>{try{a(n.next(i))}catch(f){r(f)}},c=i=>{try{a(n.throw(i))}catch(f){r(f)}},a=i=>i.done?s(i.value):Promise.resolve(i.value).then(o,c);a((n=n.apply(e,t)).next())});var le={};V(le,{getStreams:()=>ce});module.exports=K(le);var B={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function A(n){return l(this,arguments,function*(e,t={}){console.log(`[French-Anime] Fetching: ${e}`);let s=yield fetch(e,m({headers:m(m({},B),t.headers)},t));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${e}`);return yield s.text()})}var R=_(require("cheerio"));var k={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"};function p(n){return l(this,arguments,function*(e,t={}){try{let s=yield fetch(e,d(m({},t),{headers:m(m({},k),t.headers),redirect:"follow"}));if(!s.ok)return null;let r=yield s.text(),o=r.match(/window\.location\.(?:replace|href)\s*\(['"]([^'"]+)['"]\)/i);if(o){let c=o[1];c.startsWith("/")&&(c=e.match(/https?:\/\/[^\/]+/)[0]+c);let a=yield fetch(c,d(m({},t),{headers:m(d(m({},k),{Referer:e}),t.headers)}));if(a.ok){let i=yield a.text();return{text:()=>Promise.resolve(i),ok:!0,url:a.url}}}return{text:()=>Promise.resolve(r),ok:!0,url:s.url}}catch(s){return null}})}function O(e){return l(this,null,function*(){let t=yield p(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!t)return e;let n=yield t.text(),s=n.match(/src\s*:\s*["']([^"']+\.mp4)["']/)||n.match(/"url"\s*:\s*"([^"]+\.mp4)"/)||n.match(/video_url\s*:\s*'([^']+)'/);if(s){let r=s[1];return r.startsWith("//")?r="https:"+r:r.startsWith("/")&&(r="https://video.sibnet.ru"+r),r}return e})}function G(e){return l(this,null,function*(){let t=yield p(e,{headers:{Referer:"https://vidmoly.to/"}});if(!t)return e;let n=yield t.text(),s=n.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/)||n.match(/sources\s*:\s*\[\s*\{\s*file\s*:\s*["']([^"']+)["']/)||n.match(/["']?file["']?\s*:\s*["']([^"']+)["']/);return s?s[1]:e})}function J(e){return l(this,null,function*(){let t=yield p(e,{headers:{Referer:"https://uqload.com/"}});if(!t)return e;let n=yield t.text(),s=n.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||n.match(/src\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/)||n.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/);return s?s[1]:e})}function Q(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let n=yield t.text(),s=n.match(/'hls'\s*:\s*'([^']+)'/)||n.match(/"hls"\s*:\s*"([^"]+)"/);if(s){let o=s[1];if(o.includes("base64"))try{let c=o.split(",")[1]||o;o=atob(c)}catch(c){}return o}let r=n.match(/https?:\/\/[^"']+\.m3u8[^"']*/);return r?r[0]:e})}function X(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let n=yield t.text(),s=n.match(/document\.getElementById\(['"]robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*(?:['"]([^'"]+)['"]|(\w+))/);if(s){let o=s[1],c=s[2]||"";return"https:"+o+c}let r=n.match(/id=['"]robotlink['"]>([^<]+)/);return r?"https:"+r[1]:e})}function Y(e){return l(this,null,function*(){try{let t=e.match(/https?:\/\/([^\/]+)/)[1],n=yield p(e);if(!n)return e;let r=(yield n.text()).match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(r){let o=`https://${t}/pass_md5/${r[1]}`,c=yield fetch(o,{headers:{Referer:e}});if(c.ok)return(yield c.text())+"z762vpz?token="+r[1]+"&expiry="+Date.now()}}catch(t){}return e})}function Z(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let n=yield t.text(),s=n.match(/source\s*src=['"]([^'"]+\.mp4)['"]/)||n.match(/content=['"]([^'"]+\.mp4)['"]/);return s?s[1]:e})}function ee(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let n=yield t.text(),s=n.match(/vurl=["']([^"']+)["']/)||n.match(/file\s*:\s*["']([^"']+)["']/);if(s){let r=s[1];return r.startsWith("//")&&(r="https:"+r),r}return e})}function te(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let s=(yield t.text()).match(/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/);return s?s[1]:e})}function M(e){return l(this,null,function*(){let t=e.url,n=t.toLowerCase();if(n.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/))return d(m({},e),{isDirect:!0});try{let s=t,r=m({},e.headers);if(n.includes("sibnet.ru")?(s=yield O(t),r.Referer="https://video.sibnet.ru/"):n.includes("vidmoly.")?(s=yield G(t),r.Referer="https://vidmoly.to/"):n.includes("uqload.")||n.includes("oneupload.")?(s=yield J(t),r.Referer="https://uqload.com/"):n.includes("voe.")?s=yield Q(t):n.includes("streamtape.com")||n.includes("stape")?s=yield X(t):n.includes("dood")||n.includes("ds2play")?s=yield Y(t):n.includes("sendvid.com")?s=yield Z(t):n.includes("myvi.")||n.includes("mytv")?s=yield ee(t):(n.includes("moonplayer")||n.includes("moon."))&&(s=yield te(t)),s!==t&&s.startsWith("http"))return d(m({},e),{url:s,isDirect:!0,headers:r})}catch(s){}return d(m({},e),{isDirect:!1})})}var ne="https://arm.haglund.dev/api/v2";var se="https://v3-cinemeta.strem.io";function E(n){return l(this,arguments,function*(e,t={}){try{let s=new AbortController,r=setTimeout(()=>s.abort(),8e3),o=yield fetch(e,d(m({},t),{signal:s.signal}));return clearTimeout(r),o}catch(s){return console.error(`[ArmSync] Fetch failed: ${e}`,s.message),null}})}function U(e,t){return l(this,null,function*(){if(!e)return null;let n=yield E(`${ne}/themoviedb?id=${e}`);if(n){let s=yield n.json(),r=Array.isArray(s)?s[0]:s;if(r&&r.imdb)return r.imdb}return null})}function C(e,t,n){return l(this,null,function*(){var a;if(!e||t===0)return null;let s=yield E(`${se}/meta/series/${e}.json`);if(!s)return null;let r=yield s.json();if(!((a=r==null?void 0:r.meta)!=null&&a.videos))return null;let c=r.meta.videos.filter(i=>i.season>0).sort((i,f)=>i.season-f.season||i.episode-f.episode).findIndex(i=>i.season==t&&i.episode==n);if(c!==-1){let i=c+1;return console.log(`[ArmSync] Resolved: S${t}E${n} -> Absolute ${i}`),i}return null})}var b="https://french-anime.com";function re(e,t){return l(this,null,function*(){try{let n=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}?language=en-US`,s=yield A(n),r=R.default.load(s),o=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return o&&o.includes(" (")&&(o=o.split(" (")[0]),o&&o.includes(" - ")&&(o=o.split(" - ")[0]),o=o?o.trim():null,console.log(`[French-Anime] TMDB Title found: ${o}`),o}catch(n){return console.error(`[French-Anime] Failed to get title from TMDB: ${n.message}`),null}})}function oe(e){return l(this,null,function*(){try{let t=`do=search&subaction=search&story=${encodeURIComponent(e)}`,n=yield A(`${b}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:b},body:t}),s=R.default.load(n),r=[];s("a.mov-t").each((i,f)=>{let u=s(f).attr("href"),h=s(f).text().trim();u&&u.includes(".html")&&r.push({title:h,url:u})});let o=i=>i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),c=o(e);console.log(`[French-Anime] Search results: ${r.length}`);let a=r.find(i=>o(i.title).includes(c)&&i.url.includes("animes-vostfr"));return a||(a=r.find(i=>o(i.title).includes(c))),a||(a=r[0]),a?(console.log(`[French-Anime] Selected: ${a.title} -> ${a.url}`),a):null}catch(t){return console.error(`[French-Anime] Search error: ${t.message}`),null}})}function ie(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("up4fun")?"Up4Fun":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("myvi")?"MyVi":e.includes("rutube")?"Rutube":e.includes("ok.ru")?"OK.ru":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("mail.ru")?"Mail.ru":"Player"}function ae(e,t){let n=[],s=/(\d+)!((?:https?:\/\/[^,<\s]+)(?:,(?:https?:\/\/[^,<\s]+))*)/g,r;for(;(r=s.exec(e))!==null;)if(parseInt(r[1])===t){let c=r[2].split(",").filter(a=>a.startsWith("http"));for(let a of c){let i=a.trim();i.length>10&&n.push(i)}}return n}function q(e,t,n,s){return l(this,null,function*(){let r=yield re(e,t);if(!r)return[];let o=[s];try{let u=yield U(e,t);if(u){let h=yield C(u,n,s);h&&o.push(h)}}catch(u){console.warn(`[French-Anime] ArmSync failed: ${u.message}`)}let c=yield oe(r);if(!c)return[];let a=[],i=new Set,f=[c.url];try{let u=yield A(`${b}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:b},body:`do=search&subaction=search&story=${encodeURIComponent(r)}`}),h=R.default.load(u),x=w=>w.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),y=x(r);h("a.mov-t").each((w,g)=>{let v=h(g).attr("href"),N=x(h(g).text().trim());v&&v.includes(".html")&&N.includes(y)&&(f.includes(v)||f.push(v))})}catch(u){}for(let u of f)if(!i.has(u)){i.add(u);try{let h=yield A(u),x="VOSTFR";(u.includes("animes-vf/")||u.toLowerCase().includes("french"))&&(x="VF");let y=[];for(let w of o){let g=ae(h,w);y.push(...g)}for(let w of y){let g=ie(w),v=yield M({name:`French-Anime (${x})`,title:`${g} Player`,url:w,quality:"HD",headers:{Referer:b}});a.push(v)}y.length>0&&console.log(`[French-Anime] Found ${y.length} players on ${u}`)}catch(h){console.error(`[French-Anime] Failed to fetch ${u}: ${h.message}`)}}return a})}function ce(e,t,n,s){return l(this,null,function*(){console.log(`[French-Anime] Request: ${t} ${e} S${n}E${s}`);try{return yield q(e,t,n,s)}catch(r){return console.error("[French-Anime] Error:",r),[]}})}
