/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-25T21:41:57.718Z
 */
var _=Object.create;var b=Object.defineProperty,P=Object.defineProperties,j=Object.getOwnPropertyDescriptor,H=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,V=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var U=(e,s,t)=>s in e?b(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,m=(e,s)=>{for(var t in s||(s={}))E.call(s,t)&&U(e,t,s[t]);if(M)for(var t of M(s))K.call(s,t)&&U(e,t,s[t]);return e},w=(e,s)=>P(e,H(s));var z=(e,s)=>{for(var t in s)b(e,t,{get:s[t],enumerable:!0})},C=(e,s,t,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of B(s))!E.call(e,i)&&i!==t&&b(e,i,{get:()=>s[i],enumerable:!(r=j(s,i))||r.enumerable});return e};var G=(e,s,t)=>(t=e!=null?_(V(e)):{},C(s||!e||!e.__esModule?b(t,"default",{value:e,enumerable:!0}):t,e)),O=e=>C(b({},"__esModule",{value:!0}),e);var f=(e,s,t)=>new Promise((r,i)=>{var n=o=>{try{c(t.next(o))}catch(h){i(h)}},u=o=>{try{c(t.throw(o))}catch(h){i(h)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(n,u);c((t=t.apply(e,s)).next())});var pe={};z(pe,{getStreams:()=>de});module.exports=O(pe);var J={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function S(t){return f(this,arguments,function*(e,s={}){console.log(`[French-Anime] Fetching: ${e}`);let r=yield fetch(e,m({headers:m(m({},J),s.headers)},s));if(!r.ok)throw new Error(`HTTP error ${r.status} for ${e}`);return yield r.text()})}var T=G(require("cheerio"));var Q={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36"},L=e=>{try{return typeof atob=="function"?atob(e):Buffer.from(e,"base64").toString("binary")}catch(s){return e}};function p(t){return f(this,arguments,function*(e,s={}){try{let r=yield fetch(e,w(m({},s),{headers:m(m({},Q),s.headers),redirect:"follow"}));if(!r.ok)return null;let i=yield r.text();return{text:()=>Promise.resolve(i),ok:!0,url:r.url,headers:r.headers}}catch(r){return null}})}function A(e){try{if(!e.includes("p,a,c,k,e,d"))return e;let s=new RegExp("eval\\s*\\(\\s*function\\s*\\(\\s*p\\s*,\\s*a\\s*,\\s*c\\s*,\\s*k\\s*,\\s*e\\s*,\\s*d\\s*\\).*?\\}\\s*\\((.*?)\\)\\s*\\)","gs"),t=e,r;for(;(r=s.exec(e))!==null;)try{let n=r[1].match(new RegExp("^'(.*?)',\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*'(.*?)'\\.split\\('\\|'\\)","s"));if(!n)continue;let u=n[1].replace(/\\'/g,"'"),c=parseInt(n[2]),o=parseInt(n[3]),h=n[4].split("|"),a=d=>(d<c?"":a(parseInt(d/c)))+((d=d%c)>35?String.fromCharCode(d+29):d.toString(36)),l={};for(;o--;)l[a(o)]=h[o]||a(o);let g=u.replace(/\b\w+\b/g,d=>l[d]||d);t=t.replace(r[0],g)}catch(i){}return t}catch(s){return e}}function X(e){return f(this,null,function*(){try{let s=yield p(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!s)return{url:e};let t=yield s.text(),r=t.match(/src\s*:\s*["']([^"']+\.mp4)["']/)||t.match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(r){let i=r[1];return i.startsWith("//")?i="https:"+i:i.startsWith("/")&&(i="https://video.sibnet.ru"+i),{url:i,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(s){}return{url:e}})}function Y(e){return f(this,null,function*(){try{let s=yield p(e,{headers:{Referer:"https://vidmoly.to/"}});if(!s)return{url:e};let t=yield s.text();t.includes("eval(function(p,a,c,k,e,d)")&&(t=A(t));let r=t.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:"https://vidmoly.to/"}}}catch(s){}return{url:e}})}function Z(e){return f(this,null,function*(){try{let s=yield p(e,{headers:{Referer:"https://uqload.com/"}});if(!s)return{url:e};let t=yield s.text(),r=t.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||t.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/);if(r)return{url:r[1],headers:{Referer:"https://uqload.com/"}}}catch(s){}return{url:e}})}function ee(e){return f(this,null,function*(){try{let s=yield p(e);if(!s)return{url:e};let t=yield s.text(),r=t.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(r){let n=yield p(r[1]);n&&(t=yield n.text())}let i=t.match(/'hls'\s*:\s*'([^']+)'/)||t.match(/"hls"\s*:\s*"([^"]+)"/)||t.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(i){let n=i[1]||i[0];return n.includes("base64")&&(n=L(n.split(",")[1]||n)),{url:n,headers:{Referer:e}}}}catch(s){}return{url:e}})}function te(e){return f(this,null,function*(){try{let s=yield p(e);if(!s)return{url:e};let t=yield s.text();t.includes("p,a,c,k,e,d")&&(t=A(t));let r=t.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(r){let i="https:"+r[1],n=r[2].split("+");for(let u of n){let c=u.match(/['"]([^'"]+)['"]/);if(c){let o=c[1],h=u.match(/substring\((\d+)\)/);h&&(o=o.substring(parseInt(h[1]))),i+=o}}return{url:i,headers:{Referer:"https://streamtape.com/"}}}}catch(s){}return{url:e}})}function se(e){return f(this,null,function*(){try{let s=yield p(e);if(!s)return{url:e};let t=yield s.text(),r=t.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["']/)||t.match(/source\s+src=["']([^"']+\.mp4[^"']*)["']/);if(r)return{url:r[1]}}catch(s){}return{url:e}})}function re(e){return f(this,null,function*(){try{let s=yield p(e);if(!s)return{url:e};let t=yield s.text();t.includes("p,a,c,k,e,d")&&(t=A(t));let r=t.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||t.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(r){let i=r[1];return i.includes("base64")&&(i=L(i.split(",")[1]||i)),{url:i,headers:{Referer:e}}}}catch(s){}return{url:e}})}function ne(e){return f(this,null,function*(){try{let s=yield p(e);if(!s)return{url:e};let r=(yield s.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:e}}}catch(s){}return{url:e}})}function ie(e){return f(this,null,function*(){var s;try{let t=((s=e.match(/https?:\/\/([^\/]+)/))==null?void 0:s[1])||"dood.to",r=yield p(e);if(!r)return{url:e};let i=yield r.text();i.includes("eval(function(p,a,c,k,e,d)")&&(i=A(i));let n=i.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(n){let u=n[1],c=`https://${t}/pass_md5/${u}`,o=yield fetch(c,{headers:{Referer:e}});if(o.ok){let h=yield o.text(),a=Math.random().toString(36).substring(2,12);return{url:h+a+"?token="+u+"&expiry="+Date.now(),headers:{Referer:`https://${t}/`}}}}}catch(t){}return{url:e}})}function ae(e){return f(this,null,function*(){try{let s=yield p(e);if(!s)return{url:e};let r=(yield s.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:e}}}catch(s){}return{url:e}})}function k(e,s=0){return f(this,null,function*(){var i;if(s>3)return w(m({},e),{isDirect:!1});let t=e.url,r=t.toLowerCase();if(!t||t.includes("google-analytics")||t.includes("doubleclick"))return null;if(r.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!r.includes("html"))return w(m({},e),{isDirect:!0});try{let n=null;if(r.includes("sibnet.ru")?n=yield X(t):r.includes("vidmoly.")?n=yield Y(t):r.includes("uqload.")||r.includes("oneupload.")?n=yield Z(t):r.includes("voe.")?n=yield ee(t):r.includes("streamtape.com")||r.includes("stape")?n=yield te(t):r.includes("dood")||r.includes("ds2play")?n=yield ie(t):r.includes("moonplayer")||r.includes("moon.")?n=yield ae(t):r.includes("sendvid.")?n=yield se(t):r.includes("luluvid.")||r.includes("lulu.")?n=yield re(t):(r.includes("hgcloud.")||r.includes("savefiles."))&&(n=yield ne(t)),n&&n.url!==t)return w(m({},e),{url:n.url,headers:m(m({},e.headers),n.headers||{}),isDirect:!0,originalUrl:t});if(!n||n.url===t){let u=yield p(t,{headers:e.headers});if(u){let c=yield u.text();c.includes("p,a,c,k,e,d")&&(c=A(c));let o=c.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||c.match(/https?:\/\/[^"']+\.mp4[^"']*/)||c.match(/file\s*:\s*["']([^"']+)["']/);if(o){let h=o[1]||o[0];h.startsWith("//")&&(h="https:"+h),h.startsWith("http")&&!h.includes(oe)&&(n={url:h})}if(!n){let h=c.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(h){let a=h[1];if(a.startsWith("//")&&(a="https:"+a),a.startsWith("/")){let l=(i=t.match(/^https?:\/\/[^\/]+/))==null?void 0:i[0];l&&(a=l+a)}if(a.startsWith("http")&&a!==t)return console.log(`[Resolver] Peeling: Found nested iframe -> ${a}`),yield k(w(m({},e),{url:a}),s+1)}}}}if(n&&n.url!==t&&n.url.startsWith("http"))return w(m({},e),{url:n.url,headers:m(m({},e.headers),n.headers||{}),isDirect:!0,originalUrl:t})}catch(n){}return w(m({},e),{isDirect:!1})})}var oe="googletagmanager";var ce="https://arm.haglund.dev/api/v2";var le="https://v3-cinemeta.strem.io";function D(t){return f(this,arguments,function*(e,s={}){try{let r=new AbortController,i=setTimeout(()=>r.abort(),8e3),n=yield fetch(e,w(m({},s),{signal:r.signal}));return clearTimeout(i),n}catch(r){return console.error(`[ArmSync] Fetch failed: ${e}`,r.message),null}})}function q(e,s){return f(this,null,function*(){if(!e)return null;let t=yield D(`${ce}/themoviedb?id=${e}`);if(t)try{let n=yield t.json(),u=Array.isArray(n)?n[0]:n;if(u&&u.imdb)return u.imdb}catch(n){}let r=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${e}`,i=yield D(r);if(i){let u=(yield i.text()).match(/imdb\.com\/title\/(tt\d+)/);if(u)return u[1]}return null})}function W(e,s,t){return f(this,null,function*(){var h;if(!e||s===0)return null;let r=yield D(`${le}/meta/series/${e}.json`);if(!r)return null;let i=yield r.json();if(!((h=i==null?void 0:i.meta)!=null&&h.videos))return null;let n=i.meta.videos.filter(a=>a.season>0&&a.episode>0).sort((a,l)=>a.season-l.season||a.episode-l.episode),u=[],c=new Set;for(let a of n){let l=`${a.season}-${a.episode}`;c.has(l)||(c.add(l),u.push(a))}let o=u.findIndex(a=>a.season==s&&a.episode==t);if(o!==-1){let a=o+1;return console.log(`[ArmSync] Resolved: S${s}E${t} -> Absolute ${a}`),a}return null})}var F="https://french-anime.com";function ue(e,s){return f(this,null,function*(){try{let t=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${e}?language=en-US`,r=yield S(t),i=T.default.load(r),n=i('meta[property="og:title"]').attr("content")||i("h1").first().text()||i("h2").first().text();return n&&n.includes(" (")&&(n=n.split(" (")[0]),n&&n.includes(" - ")&&(n=n.split(" - ")[0]),n=n?n.trim():null,console.log(`[French-Anime] TMDB Title found: ${n}`),n}catch(t){return console.error(`[French-Anime] Failed to get title from TMDB: ${t.message}`),null}})}function he(e){return f(this,null,function*(){try{let s=`do=search&subaction=search&story=${encodeURIComponent(e)}`,t=yield S(`${F}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:F},body:s}),r=T.default.load(t),i=[];r("a.mov-t").each((o,h)=>{let a=r(h).attr("href"),l=r(h).text().trim();a&&a.includes(".html")&&i.push({title:l,url:a})});let n=o=>o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),u=n(e);console.log(`[French-Anime] Search results: ${i.length}`);let c=i.filter(o=>n(o.title).includes(u));return c.length>0&&console.log(`[French-Anime] Found ${c.length} matches for ${e}`),c}catch(s){return console.error(`[French-Anime] Search error: ${s.message}`),[]}})}function fe(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("up4fun")?"Up4Fun":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("myvi")?"MyVi":e.includes("rutube")?"Rutube":e.includes("ok.ru")?"OK.ru":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("mail.ru")?"Mail.ru":"Player"}function me(e,s){let t=[],r=/(\d+)!((?:https?:\/\/[^,<\s]+)(?:,(?:https?:\/\/[^,<\s]+))*)/g,i;for(;(i=r.exec(e))!==null;)if(parseInt(i[1])===s){let u=i[2].split(",").filter(c=>c.startsWith("http"));for(let c of u){let o=c.trim();o.length>10&&t.push(o)}}return t}function I(e,s,t,r){return f(this,null,function*(){let i=yield ue(e,s);if(!i)return[];let n=[r];try{let l=yield q(e,s);if(l){let g=yield W(l,t,r);g&&g!==r&&n.push(g)}}catch(l){console.warn(`[French-Anime] ArmSync failed: ${l.message}`)}let u=yield he(i);if(!u||u.length===0)return[];u=u.sort((l,g)=>{let d=l.title.toLowerCase(),x=g.title.toLowerCase(),$=`saison ${t}`,y=d.includes($),v=x.includes($);return y&&!v?-1:!y&&v?1:0});let c=[],o=new Set,h=u.map(l=>l.url);for(let l of h){if(o.has(l))continue;o.add(l);let d=l.toLowerCase().match(/saison[-_]?(\d+)/);if(!(d&&parseInt(d[1])!==t&&n.length===1))try{let x=yield S(l),$="VOSTFR";(l.includes("animes-vf/")||l.toLowerCase().includes("french"))&&($="VF");let y=[];for(let v of n){let R=me(x,v);y.push(...R)}for(let v of y){let R=fe(v),N=yield k({name:`French-Anime (${$})`,title:`${R} Player`,url:v,quality:"HD",headers:{Referer:F}});c.push(N)}y.length>0&&console.log(`[French-Anime] Found ${y.length} players on ${l}`)}catch(x){console.error(`[French-Anime] Failed to fetch ${l}: ${x.message}`)}}let a=c.filter(l=>l&&l.isDirect);return console.log(`[French-Anime] Total streams found: ${a.length}`),a})}function de(e,s,t,r){return f(this,null,function*(){console.log(`[French-Anime] Request: ${s} ${e} S${t}E${r}`);try{return yield I(e,s,t,r)}catch(i){return console.error("[French-Anime] Error:",i),[]}})}
