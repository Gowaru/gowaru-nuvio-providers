/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-26T11:28:28.685Z
 */
var B=Object.create;var A=Object.defineProperty,H=Object.defineProperties,V=Object.getOwnPropertyDescriptor,K=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,G=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var T=(t,n,e)=>n in t?A(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,d=(t,n)=>{for(var e in n||(n={}))U.call(n,e)&&T(t,e,n[e]);if(F)for(var e of F(n))J.call(n,e)&&T(t,e,n[e]);return t},x=(t,n)=>H(t,K(n));var Y=(t,n)=>{for(var e in n)A(t,e,{get:n[e],enumerable:!0})},E=(t,n,e,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of O(n))!U.call(t,r)&&r!==e&&A(t,r,{get:()=>n[r],enumerable:!(s=V(n,r))||s.enumerable});return t};var Z=(t,n,e)=>(e=t!=null?B(G(t)):{},E(n||!t||!t.__esModule?A(e,"default",{value:t,enumerable:!0}):e,t)),Q=t=>E(A({},"__esModule",{value:!0}),t);var m=(t,n,e)=>new Promise((s,r)=>{var a=u=>{try{i(e.next(u))}catch(h){r(h)}},o=u=>{try{i(e.throw(u))}catch(h){r(h)}},i=u=>u.done?s(u.value):Promise.resolve(u.value).then(a,o);i((e=e.apply(t,n)).next())});var vt={};Y(vt,{getStreams:()=>yt});module.exports=Q(vt);var X={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function S(e){return m(this,arguments,function*(t,n={}){console.log(`[French-Anime] Fetching: ${t}`);let s=yield fetch(t,d({headers:d(d({},X),n.headers)},n));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${t}`);return yield s.text()})}var I=Z(require("cheerio-without-node-native"));var tt={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36"},_=t=>{try{return typeof atob=="function"?atob(t):Buffer.from(t,"base64").toString("binary")}catch(n){return t}};function y(e){return m(this,arguments,function*(t,n={}){try{let s=yield fetch(t,x(d({},n),{headers:d(d({},tt),n.headers),redirect:"follow"}));if(!s.ok)return null;let r=yield s.text();return{text:()=>Promise.resolve(r),ok:!0,url:s.url,headers:s.headers}}catch(s){return null}})}function b(t){try{if(!t.includes("p,a,c,k,e,d"))return t;let n=new RegExp("eval\\s*\\(\\s*function\\s*\\(\\s*p\\s*,\\s*a\\s*,\\s*c\\s*,\\s*k\\s*,\\s*e\\s*,\\s*d\\s*\\).*?\\}\\s*\\((.*?)\\)\\s*\\)","gs"),e=t,s;for(;(s=n.exec(t))!==null;)try{let a=s[1].match(new RegExp("^'(.*?)',\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*'(.*?)'\\.split\\('\\|'\\)","s"));if(!a)continue;let o=a[1].replace(/\\'/g,"'"),i=parseInt(a[2]),u=parseInt(a[3]),h=a[4].split("|"),c=f=>(f<i?"":c(parseInt(f/i)))+((f=f%i)>35?String.fromCharCode(f+29):f.toString(36)),l={};for(;u--;)l[c(u)]=h[u]||c(u);let p=o.replace(/\b\w+\b/g,f=>l[f]||f);e=e.replace(s[0],p)}catch(r){}return e}catch(n){return t}}function et(t){return m(this,null,function*(){try{let n=yield y(t,{headers:{Referer:"https://video.sibnet.ru/"}});if(!n)return{url:t};let e=yield n.text(),s=e.match(/file\s*:\s*["']([^"']*\.mp4[^"']*)['"]/i)||e.match(/src\s*:\s*["']([^"']*\.mp4[^"']*)['"]/i)||e.match(/["']((?:https?:)?\/\/[^"'\s]+\.mp4[^"'\s]*)["']/i);if(s){let r=s[1];return r.startsWith("//")?r="https:"+r:r.startsWith("/")&&(r="https://video.sibnet.ru"+r),{url:r,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(n){}return{url:t}})}function st(t){return m(this,null,function*(){try{let n={Referer:"https://vidmoly.to/",Origin:"https://vidmoly.to"},e=yield y(t,{headers:n});if(!e)return{url:t};let s=yield e.text(),r=s.match(/window\.location\.replace\(['"]([^'"]+)['"]\)/)||s.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);r&&r[1]!==t&&(e=yield y(r[1],{headers:n}),e&&(s=yield e.text())),s.includes("eval(function(p,a,c,k,e,d)")&&(s=b(s));let a=s.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/i)||s.match(/["'](https?:\/\/[^"']+\.(?:m3u8|mp4)[^"']*)["']/i);if(a)return{url:a[1],headers:{Referer:"https://vidmoly.to/"}}}catch(n){}return{url:t}})}function nt(t){return m(this,null,function*(){let n=t.replace(/^https?:\/\/[^/]+/,""),e=["uqload.co","uqload.com","uqload.io","uqloads.xyz","uqload.to"],s="https://uqload.co/";for(let r of e)try{let a=`https://${r}${n}`,o=yield y(a,{headers:{Referer:s}});if(!o)continue;let i=yield o.text(),u=i.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||i.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/)||i.match(/["'](https?:\/\/[^"']+\.(?:mp4|m3u8)[^"']*)["']/i);if(u)return{url:u[1],headers:{Referer:s}}}catch(a){}return{url:t}})}function rt(t){return m(this,null,function*(){try{let n=yield y(t);if(!n)return{url:t};let e=yield n.text(),s=e.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(s){let a=yield y(s[1]);a&&(e=yield a.text())}let r=e.match(/'hls'\s*:\s*'([^']+)'/)||e.match(/"hls"\s*:\s*"([^"]+)"/)||e.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(r){let a=r[1]||r[0];return a.includes("base64")&&(a=_(a.split(",")[1]||a)),{url:a,headers:{Referer:t}}}}catch(n){}return{url:t}})}function at(t){return m(this,null,function*(){try{let n=yield y(t);if(!n)return{url:t};let e=yield n.text();e.includes("p,a,c,k,e,d")&&(e=b(e));let s=e.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(s){let r="https:"+s[1],a=s[2].split("+");for(let o of a){let i=o.match(/['"]([^'"]+)['"]/);if(i){let u=i[1],h=o.match(/substring\((\d+)\)/);h&&(u=u.substring(parseInt(h[1]))),r+=u}}return{url:r,headers:{Referer:"https://streamtape.com/"}}}}catch(n){}return{url:t}})}function it(t){return m(this,null,function*(){try{let n=t.includes("/embed/")?t:t.replace(/sendvid\.com\/([a-z0-9]+)/i,"sendvid.com/embed/$1"),e=yield y(n,{headers:{Referer:"https://sendvid.com/"}});if(!e)return{url:t};let s=yield e.text(),r=s.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["|']/)||s.match(/source\s+src=["']([^"']+\.mp4[^"']*)["|']/)||s.match(/<source[^>]+src=["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/)||s.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["|']/)||s.match(/["'](https?:\/\/[^"']+\.mp4[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:"https://sendvid.com/"}}}catch(n){}return{url:t}})}function ot(t){return m(this,null,function*(){try{let n=yield y(t);if(!n)return{url:t};let e=yield n.text();e.includes("p,a,c,k,e,d")&&(e=b(e));let s=e.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(s){let r=s[1];return r.includes("base64")&&(r=_(r.split(",")[1]||r)),{url:r,headers:{Referer:t}}}}catch(n){}return{url:t}})}function ct(t){return m(this,null,function*(){try{let n=yield y(t);if(!n)return{url:t};let s=(yield n.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(s)return{url:s[1],headers:{Referer:t}}}catch(n){}return{url:t}})}function lt(t){return m(this,null,function*(){var n;try{let e=((n=t.match(/https?:\/\/([^\/]+)/))==null?void 0:n[1])||"dood.to",s=yield y(t);if(!s)return{url:t};let r=yield s.text();r.includes("eval(function(p,a,c,k,e,d)")&&(r=b(r));let a=r.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(a){let o=a[1],i=`https://${e}/pass_md5/${o}`,u=yield fetch(i,{headers:{Referer:t}});if(u.ok){let h=yield u.text(),c=Math.random().toString(36).substring(2,12);return{url:h+c+"?token="+o+"&expiry="+Date.now(),headers:{Referer:`https://${e}/`}}}}}catch(e){}return{url:t}})}function ut(t){return m(this,null,function*(){try{let n=yield y(t,{headers:{Referer:"https://www.myvi.ru/"}});if(!n)return{url:t};let e=yield n.text();e.includes("eval(function(p,a,c,k,e,d)")&&(e=b(e));let s=e.match(/["'](?:file|src|url|stream_url)["']\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/)||e.match(/["'](https?:\/\/[^"']+\.(?:mp4|m3u8)[^"']*)["']/)||e.match(/source\s+src=["']([^"']+\.(?:mp4|m3u8)[^"']*)/);if(s)return{url:s[1],headers:{Referer:"https://www.myvi.ru/"}};let r=t.match(/\/(?:embed\/|watch\/|video\/)([a-zA-Z0-9_-]+)/);if(r){let a=`https://www.myvi.ru/api/video/${r[1]}`,o=yield y(a,{headers:{Referer:t}});if(o){let u=(yield o.text()).match(/["'](?:url|src|file)["']\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(u)return{url:u[1],headers:{Referer:"https://www.myvi.ru/"}}}}}catch(n){}return{url:t}})}function ht(t){return m(this,null,function*(){try{let n=yield y(t);if(!n)return{url:t};let s=(yield n.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(s)return{url:s[1],headers:{Referer:t}}}catch(n){}return{url:t}})}function k(t,n=0){return m(this,null,function*(){var r;if(n>3)return x(d({},t),{isDirect:!1});let e=t.url,s=e.toLowerCase();if(!e||e.includes("google-analytics")||e.includes("doubleclick"))return null;if(s.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!s.includes("html"))return x(d({},t),{isDirect:!0});try{let a=null;if(s.includes("sibnet.ru")?a=yield et(e):s.includes("vidmoly.")?a=yield st(e):s.includes("uqload.")||s.includes("oneupload.")?a=yield nt(e):s.includes("voe.")?a=yield rt(e):s.includes("streamtape.com")||s.includes("stape")?a=yield at(e):s.includes("dood")||s.includes("ds2play")?a=yield lt(e):s.includes("moonplayer")||s.includes("moon.")?a=yield ht(e):s.includes("sendvid.")?a=yield it(e):s.includes("myvi.")||s.includes("mytv.")?a=yield ut(e):s.includes("luluvid.")||s.includes("lulu.")?a=yield ot(e):(s.includes("hgcloud.")||s.includes("savefiles."))&&(a=yield ct(e)),a&&a.url!==e)return x(d({},t),{url:a.url,headers:d(d({},t.headers),a.headers||{}),isDirect:!0,originalUrl:e});if(!a||a.url===e){let o=yield y(e,{headers:t.headers});if(o){let i=yield o.text();i.includes("p,a,c,k,e,d")&&(i=b(i));let u=i.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||i.match(/https?:\/\/[^"']+\.mp4[^"']*/)||i.match(/file\s*:\s*["']([^"']+)["']/);if(u){let h=u[1]||u[0];h.startsWith("//")&&(h="https:"+h),h.startsWith("http")&&!h.includes(mt)&&(a={url:h})}if(!a){let h=i.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(h){let c=h[1];if(c.startsWith("//")&&(c="https:"+c),c.startsWith("/")){let l=(r=e.match(/^https?:\/\/[^\/]+/))==null?void 0:r[0];l&&(c=l+c)}if(c.startsWith("http")&&c!==e)return console.log(`[Resolver] Peeling: Found nested iframe -> ${c}`),yield k(x(d({},t),{url:c}),n+1)}}}}if(a&&a.url!==e&&a.url.startsWith("http"))return x(d({},t),{url:a.url,headers:d(d({},t.headers),a.headers||{}),isDirect:!0,originalUrl:e})}catch(a){}return x(d({},t),{isDirect:!1})})}var mt="googletagmanager";var ft="https://arm.haglund.dev/api/v2";var dt="https://v3-cinemeta.strem.io";function D(e){return m(this,arguments,function*(t,n={}){try{let s=new AbortController,r=setTimeout(()=>s.abort(),8e3),a=yield fetch(t,x(d({},n),{signal:s.signal}));return clearTimeout(r),a}catch(s){return console.error(`[ArmSync] Fetch failed: ${t}`,s.message),null}})}function C(t,n){return m(this,null,function*(){if(!t)return null;let e=yield D(`${ft}/themoviedb?id=${t}`);if(e)try{let a=yield e.json(),o=Array.isArray(a)?a[0]:a;if(o&&o.imdb)return o.imdb}catch(a){}let s=`https://www.themoviedb.org/${n==="movie"?"movie":"tv"}/${t}`,r=yield D(s);if(r){let o=(yield r.text()).match(/imdb\.com\/title\/(tt\d+)/);if(o)return o[1]}return null})}function q(t,n,e){return m(this,null,function*(){var h;if(!t||n===0)return null;let s=yield D(`${dt}/meta/series/${t}.json`);if(!s)return null;let r=yield s.json();if(!((h=r==null?void 0:r.meta)!=null&&h.videos))return null;let a=r.meta.videos.filter(c=>c.season>0&&c.episode>0).sort((c,l)=>c.season-l.season||c.episode-l.episode),o=[],i=new Set;for(let c of a){let l=`${c.season}-${c.episode}`;i.has(l)||(i.add(l),o.push(c))}let u=o.findIndex(c=>c.season==n&&c.episode==e);if(u!==-1){let c=u+1;return console.log(`[ArmSync] Resolved: S${n}E${e} -> Absolute ${c}`),c}return null})}var L="8265bd1679663a7ea12ac168da84d2e8",W="https://api.themoviedb.org/3";function P(t){return m(this,null,function*(){try{let n=new AbortController,e=setTimeout(()=>n.abort(),8e3),s=yield fetch(t,{headers:{"User-Agent":"Mozilla/5.0",Accept:"application/json"},signal:n.signal});return clearTimeout(e),s.ok?s:null}catch(n){return null}})}function j(t,n){return m(this,null,function*(){var r,a,o,i,u,h;let e=n==="movie"?"movie":"tv",s=[];try{let c=`${W}/${e}/${t}?api_key=${L}&language=en-US`,l=yield P(c);if(l){let v=yield l.json(),w=(r=e==="movie"?v.title:v.name)==null?void 0:r.trim(),g=(a=e==="movie"?v.original_title:v.original_name)==null?void 0:a.trim();w&&s.push(w),g&&g!==w&&/^[\x00-\x7F\u00C0-\u024F\s]+$/.test(g)&&s.push(g)}let p=`${W}/${e}/${t}/translations?api_key=${L}`,f=yield P(p);if(f){let w=((yield f.json()).translations||[]).find($=>$.iso_639_1==="fr"),g=((i=(o=w==null?void 0:w.data)==null?void 0:o.name)==null?void 0:i.trim())||((h=(u=w==null?void 0:w.data)==null?void 0:u.title)==null?void 0:h.trim());g&&!s.includes(g)&&s.push(g)}}catch(c){console.error(`[Metadata] TMDB API error: ${c.message}`)}return console.log(`[Metadata] Titles for ${t}: ${s.join(" | ")}`),s})}var M="https://french-anime.com";function pt(t){return m(this,null,function*(){try{let n=`do=search&subaction=search&story=${encodeURIComponent(t)}`,e=yield S(`${M}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:M},body:n}),s=I.load(e),r=[],a=["a.mov-t",".mov-t a",".title a","h2 a","h3 a",".short-story a"],o=new Set;for(let c of a)if(s(c).each((l,p)=>{let f=s(p).attr("href"),v=s(p).text().trim();f&&f.includes("french-anime.com")&&f.includes(".html")&&v.length>2&&!o.has(f)&&(o.add(f),r.push({title:v,url:f}))}),r.length>0)break;r.length===0&&s('a[href*="french-anime.com"][href*=".html"]').each((c,l)=>{let p=s(l).attr("href"),f=s(l).text().trim();p&&f.length>2&&!o.has(p)&&(o.add(p),r.push({title:f,url:p}))});let i=c=>c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),u=i(t);console.log(`[French-Anime] Search results: ${r.length}`);let h=r.filter(c=>i(c.title).includes(u));return h.length>0&&console.log(`[French-Anime] Found ${h.length} matches for ${t}`),h}catch(n){return console.error(`[French-Anime] Search error: ${n.message}`),[]}})}function wt(t){return t.includes("sibnet")?"Sibnet":t.includes("vidmoly")?"Vidmoly":t.includes("christopheruntilpoint")||t.includes("voe")?"Voe":t.includes("luluvid")?"Luluvid":t.includes("savefiles")?"Savefiles":t.includes("up4fun")?"Up4Fun":t.includes("uqload")?"Uqload":t.includes("hgcloud")?"HGCloud":t.includes("myvi")?"MyVi":t.includes("rutube")?"Rutube":t.includes("ok.ru")?"OK.ru":t.includes("doodstream")||t.includes("vvide0")?"Doodstream":t.includes("mail.ru")?"Mail.ru":"Player"}function gt(t,n){let e=[],s=/(\d+)!((?:(?:https?:)?\/\/[^,<\s]+)(?:,(?:(?:https?:)?\/\/[^,<\s]+))*)/g,r;for(;(r=s.exec(t))!==null;)if(parseInt(r[1])===n){let o=r[2].split(",").filter(i=>i.startsWith("http")||i.startsWith("//"));for(let i of o)i=i.trim(),i.startsWith("//")&&(i="https:"+i),i.length>10&&e.push(i)}return e}function N(t,n,e,s){return m(this,null,function*(){let r=yield j(t,n);if(r.length===0)return[];let a=[s];try{let l=yield C(t,n);if(l){let p=yield q(l,e,s);p&&p!==s&&a.push(p)}}catch(l){console.warn(`[French-Anime] ArmSync failed: ${l.message}`)}let o=[];for(let l of r)if(o=yield pt(l),o&&o.length>0)break;if(!o||o.length===0)return[];o=o.sort((l,p)=>{let f=l.title.toLowerCase(),v=p.title.toLowerCase(),w=`saison ${e}`,g=f.includes(w),$=v.includes(w);return g&&!$?-1:!g&&$?1:0});let i=[],u=new Set,h=o.map(l=>l.url);for(let l of h){if(u.has(l))continue;u.add(l);let f=l.toLowerCase().match(/saison[-_]?(\d+)/);if(!(f&&parseInt(f[1])!==e&&a.length===1))try{let v=yield S(l),w="VOSTFR";(l.includes("animes-vf/")||l.toLowerCase().includes("french"))&&(w="VF");let g=[];for(let $ of a){let R=gt(v,$);g.push(...R)}for(let $ of g){let R=wt($),z=yield k({name:`French-Anime (${w})`,title:`${R} Player`,url:$,quality:"HD",headers:{Referer:M}});i.push(z)}g.length>0&&console.log(`[French-Anime] Found ${g.length} players on ${l}`)}catch(v){console.error(`[French-Anime] Failed to fetch ${l}: ${v.message}`)}}let c=i.filter(l=>l&&l.isDirect);return console.log(`[French-Anime] Total streams found: ${c.length}`),c})}function yt(t,n,e,s){return m(this,null,function*(){console.log(`[French-Anime] Request: ${n} ${t} S${e}E${s}`);try{return yield N(t,n,e,s)}catch(r){return console.error("[French-Anime] Error:",r),[]}})}
