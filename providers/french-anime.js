/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-25T22:30:07.629Z
 */
var I=Object.create;var b=Object.defineProperty,P=Object.defineProperties,j=Object.getOwnPropertyDescriptor,H=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,V=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var E=(t,s,e)=>s in t?b(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,m=(t,s)=>{for(var e in s||(s={}))U.call(s,e)&&E(t,e,s[e]);if(M)for(var e of M(s))K.call(s,e)&&E(t,e,s[e]);return t},w=(t,s)=>P(t,H(s));var z=(t,s)=>{for(var e in s)b(t,e,{get:s[e],enumerable:!0})},C=(t,s,e,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of B(s))!U.call(t,i)&&i!==e&&b(t,i,{get:()=>s[i],enumerable:!(r=j(s,i))||r.enumerable});return t};var G=(t,s,e)=>(e=t!=null?I(V(t)):{},C(s||!t||!t.__esModule?b(e,"default",{value:t,enumerable:!0}):e,t)),O=t=>C(b({},"__esModule",{value:!0}),t);var f=(t,s,e)=>new Promise((r,i)=>{var n=l=>{try{c(e.next(l))}catch(h){i(h)}},o=l=>{try{c(e.throw(l))}catch(h){i(h)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,o);c((e=e.apply(t,s)).next())});var pt={};z(pt,{getStreams:()=>dt});module.exports=O(pt);var J={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function A(e){return f(this,arguments,function*(t,s={}){console.log(`[French-Anime] Fetching: ${t}`);let r=yield fetch(t,m({headers:m(m({},J),s.headers)},s));if(!r.ok)throw new Error(`HTTP error ${r.status} for ${t}`);return yield r.text()})}var S=G(require("cheerio"));var Q={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36"},L=t=>{try{return typeof atob=="function"?atob(t):Buffer.from(t,"base64").toString("binary")}catch(s){return t}};function p(e){return f(this,arguments,function*(t,s={}){try{let r=yield fetch(t,w(m({},s),{headers:m(m({},Q),s.headers),redirect:"follow"}));if(!r.ok)return null;let i=yield r.text();return{text:()=>Promise.resolve(i),ok:!0,url:r.url,headers:r.headers}}catch(r){return null}})}function R(t){try{if(!t.includes("p,a,c,k,e,d"))return t;let s=new RegExp("eval\\s*\\(\\s*function\\s*\\(\\s*p\\s*,\\s*a\\s*,\\s*c\\s*,\\s*k\\s*,\\s*e\\s*,\\s*d\\s*\\).*?\\}\\s*\\((.*?)\\)\\s*\\)","gs"),e=t,r;for(;(r=s.exec(t))!==null;)try{let n=r[1].match(new RegExp("^'(.*?)',\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*'(.*?)'\\.split\\('\\|'\\)","s"));if(!n)continue;let o=n[1].replace(/\\'/g,"'"),c=parseInt(n[2]),l=parseInt(n[3]),h=n[4].split("|"),a=d=>(d<c?"":a(parseInt(d/c)))+((d=d%c)>35?String.fromCharCode(d+29):d.toString(36)),u={};for(;l--;)u[a(l)]=h[l]||a(l);let g=o.replace(/\b\w+\b/g,d=>u[d]||d);e=e.replace(r[0],g)}catch(i){}return e}catch(s){return t}}function X(t){return f(this,null,function*(){try{let s=yield p(t,{headers:{Referer:"https://video.sibnet.ru/"}});if(!s)return{url:t};let e=yield s.text(),r=e.match(/src\s*:\s*["']([^"']+\.mp4)["']/)||e.match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(r){let i=r[1];return i.startsWith("//")?i="https:"+i:i.startsWith("/")&&(i="https://video.sibnet.ru"+i),{url:i,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(s){}return{url:t}})}function Y(t){return f(this,null,function*(){try{let s=yield p(t,{headers:{Referer:"https://vidmoly.to/"}});if(!s)return{url:t};let e=yield s.text();e.includes("eval(function(p,a,c,k,e,d)")&&(e=R(e));let r=e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:"https://vidmoly.to/"}}}catch(s){}return{url:t}})}function Z(t){return f(this,null,function*(){try{let s=yield p(t,{headers:{Referer:"https://uqload.com/"}});if(!s)return{url:t};let e=yield s.text(),r=e.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/);if(r)return{url:r[1],headers:{Referer:"https://uqload.com/"}}}catch(s){}return{url:t}})}function tt(t){return f(this,null,function*(){try{let s=yield p(t);if(!s)return{url:t};let e=yield s.text(),r=e.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(r){let n=yield p(r[1]);n&&(e=yield n.text())}let i=e.match(/'hls'\s*:\s*'([^']+)'/)||e.match(/"hls"\s*:\s*"([^"]+)"/)||e.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(i){let n=i[1]||i[0];return n.includes("base64")&&(n=L(n.split(",")[1]||n)),{url:n,headers:{Referer:t}}}}catch(s){}return{url:t}})}function et(t){return f(this,null,function*(){try{let s=yield p(t);if(!s)return{url:t};let e=yield s.text();e.includes("p,a,c,k,e,d")&&(e=R(e));let r=e.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(r){let i="https:"+r[1],n=r[2].split("+");for(let o of n){let c=o.match(/['"]([^'"]+)['"]/);if(c){let l=c[1],h=o.match(/substring\((\d+)\)/);h&&(l=l.substring(parseInt(h[1]))),i+=l}}return{url:i,headers:{Referer:"https://streamtape.com/"}}}}catch(s){}return{url:t}})}function st(t){return f(this,null,function*(){try{let s=yield p(t);if(!s)return{url:t};let e=yield s.text(),r=e.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["']/)||e.match(/source\s+src=["']([^"']+\.mp4[^"']*)["']/);if(r)return{url:r[1]}}catch(s){}return{url:t}})}function rt(t){return f(this,null,function*(){try{let s=yield p(t);if(!s)return{url:t};let e=yield s.text();e.includes("p,a,c,k,e,d")&&(e=R(e));let r=e.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(r){let i=r[1];return i.includes("base64")&&(i=L(i.split(",")[1]||i)),{url:i,headers:{Referer:t}}}}catch(s){}return{url:t}})}function nt(t){return f(this,null,function*(){try{let s=yield p(t);if(!s)return{url:t};let r=(yield s.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:t}}}catch(s){}return{url:t}})}function it(t){return f(this,null,function*(){var s;try{let e=((s=t.match(/https?:\/\/([^\/]+)/))==null?void 0:s[1])||"dood.to",r=yield p(t);if(!r)return{url:t};let i=yield r.text();i.includes("eval(function(p,a,c,k,e,d)")&&(i=R(i));let n=i.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(n){let o=n[1],c=`https://${e}/pass_md5/${o}`,l=yield fetch(c,{headers:{Referer:t}});if(l.ok){let h=yield l.text(),a=Math.random().toString(36).substring(2,12);return{url:h+a+"?token="+o+"&expiry="+Date.now(),headers:{Referer:`https://${e}/`}}}}}catch(e){}return{url:t}})}function at(t){return f(this,null,function*(){try{let s=yield p(t);if(!s)return{url:t};let r=(yield s.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:t}}}catch(s){}return{url:t}})}function k(t,s=0){return f(this,null,function*(){var i;if(s>3)return w(m({},t),{isDirect:!1});let e=t.url,r=e.toLowerCase();if(!e||e.includes("google-analytics")||e.includes("doubleclick"))return null;if(r.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!r.includes("html"))return w(m({},t),{isDirect:!0});try{let n=null;if(r.includes("sibnet.ru")?n=yield X(e):r.includes("vidmoly.")?n=yield Y(e):r.includes("uqload.")||r.includes("oneupload.")?n=yield Z(e):r.includes("voe.")?n=yield tt(e):r.includes("streamtape.com")||r.includes("stape")?n=yield et(e):r.includes("dood")||r.includes("ds2play")?n=yield it(e):r.includes("moonplayer")||r.includes("moon.")?n=yield at(e):r.includes("sendvid.")?n=yield st(e):r.includes("luluvid.")||r.includes("lulu.")?n=yield rt(e):(r.includes("hgcloud.")||r.includes("savefiles."))&&(n=yield nt(e)),n&&n.url!==e)return w(m({},t),{url:n.url,headers:m(m({},t.headers),n.headers||{}),isDirect:!0,originalUrl:e});if(!n||n.url===e){let o=yield p(e,{headers:t.headers});if(o){let c=yield o.text();c.includes("p,a,c,k,e,d")&&(c=R(c));let l=c.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||c.match(/https?:\/\/[^"']+\.mp4[^"']*/)||c.match(/file\s*:\s*["']([^"']+)["']/);if(l){let h=l[1]||l[0];h.startsWith("//")&&(h="https:"+h),h.startsWith("http")&&!h.includes(ot)&&(n={url:h})}if(!n){let h=c.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(h){let a=h[1];if(a.startsWith("//")&&(a="https:"+a),a.startsWith("/")){let u=(i=e.match(/^https?:\/\/[^\/]+/))==null?void 0:i[0];u&&(a=u+a)}if(a.startsWith("http")&&a!==e)return console.log(`[Resolver] Peeling: Found nested iframe -> ${a}`),yield k(w(m({},t),{url:a}),s+1)}}}}if(n&&n.url!==e&&n.url.startsWith("http"))return w(m({},t),{url:n.url,headers:m(m({},t.headers),n.headers||{}),isDirect:!0,originalUrl:e})}catch(n){}return w(m({},t),{isDirect:!1})})}var ot="googletagmanager";var ct="https://arm.haglund.dev/api/v2";var lt="https://v3-cinemeta.strem.io";function D(e){return f(this,arguments,function*(t,s={}){try{let r=new AbortController,i=setTimeout(()=>r.abort(),8e3),n=yield fetch(t,w(m({},s),{signal:r.signal}));return clearTimeout(i),n}catch(r){return console.error(`[ArmSync] Fetch failed: ${t}`,r.message),null}})}function W(t,s){return f(this,null,function*(){if(!t)return null;let e=yield D(`${ct}/themoviedb?id=${t}`);if(e)try{let n=yield e.json(),o=Array.isArray(n)?n[0]:n;if(o&&o.imdb)return o.imdb}catch(n){}let r=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${t}`,i=yield D(r);if(i){let o=(yield i.text()).match(/imdb\.com\/title\/(tt\d+)/);if(o)return o[1]}return null})}function q(t,s,e){return f(this,null,function*(){var h;if(!t||s===0)return null;let r=yield D(`${lt}/meta/series/${t}.json`);if(!r)return null;let i=yield r.json();if(!((h=i==null?void 0:i.meta)!=null&&h.videos))return null;let n=i.meta.videos.filter(a=>a.season>0&&a.episode>0).sort((a,u)=>a.season-u.season||a.episode-u.episode),o=[],c=new Set;for(let a of n){let u=`${a.season}-${a.episode}`;c.has(u)||(c.add(u),o.push(a))}let l=o.findIndex(a=>a.season==s&&a.episode==e);if(l!==-1){let a=l+1;return console.log(`[ArmSync] Resolved: S${s}E${e} -> Absolute ${a}`),a}return null})}var T="https://french-anime.com";function ut(t,s){return f(this,null,function*(){try{let e=[],r=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${t}?language=en-US`,i=yield A(r),n=S.load(i),o=n('meta[property="og:title"]').attr("content")||n("h1").first().text()||n("h2").first().text();o&&o.includes(" (")&&(o=o.split(" (")[0]),o&&o.includes(" - ")&&(o=o.split(" - ")[0]),o&&e.push(o.trim());let c=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${t}?language=fr-FR`,l=yield A(c),h=S.load(l),a=h('meta[property="og:title"]').attr("content")||h("h1").first().text()||h("h2").first().text();return a&&a.includes(" (")&&(a=a.split(" (")[0]),a&&a.includes(" - ")&&(a=a.split(" - ")[0]),a&&a.trim()!==(o==null?void 0:o.trim())&&e.push(a.trim()),console.log(`[French-Anime] TMDB Titles found: ${e.join(", ")}`),e}catch(e){return console.error(`[French-Anime] Failed to get titles from TMDB: ${e.message}`),[]}})}function ht(t){return f(this,null,function*(){try{let s=`do=search&subaction=search&story=${encodeURIComponent(t)}`,e=yield A(`${T}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:T},body:s}),r=S.load(e),i=[];r("a.mov-t").each((l,h)=>{let a=r(h).attr("href"),u=r(h).text().trim();a&&a.includes(".html")&&i.push({title:u,url:a})});let n=l=>l.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),o=n(t);console.log(`[French-Anime] Search results: ${i.length}`);let c=i.filter(l=>n(l.title).includes(o));return c.length>0&&console.log(`[French-Anime] Found ${c.length} matches for ${t}`),c}catch(s){return console.error(`[French-Anime] Search error: ${s.message}`),[]}})}function ft(t){return t.includes("sibnet")?"Sibnet":t.includes("vidmoly")?"Vidmoly":t.includes("christopheruntilpoint")||t.includes("voe")?"Voe":t.includes("luluvid")?"Luluvid":t.includes("savefiles")?"Savefiles":t.includes("up4fun")?"Up4Fun":t.includes("uqload")?"Uqload":t.includes("hgcloud")?"HGCloud":t.includes("myvi")?"MyVi":t.includes("rutube")?"Rutube":t.includes("ok.ru")?"OK.ru":t.includes("doodstream")||t.includes("vvide0")?"Doodstream":t.includes("mail.ru")?"Mail.ru":"Player"}function mt(t,s){let e=[],r=/(\d+)!((?:(?:https?:)?\/\/[^,<\s]+)(?:,(?:(?:https?:)?\/\/[^,<\s]+))*)/g,i;for(;(i=r.exec(t))!==null;)if(parseInt(i[1])===s){let o=i[2].split(",").filter(c=>c.startsWith("http")||c.startsWith("//"));for(let c of o)c=c.trim(),c.startsWith("//")&&(c="https:"+c),c.length>10&&e.push(c)}return e}function N(t,s,e,r){return f(this,null,function*(){let i=yield ut(t,s);if(i.length===0)return[];let n=[r];try{let u=yield W(t,s);if(u){let g=yield q(u,e,r);g&&g!==r&&n.push(g)}}catch(u){console.warn(`[French-Anime] ArmSync failed: ${u.message}`)}let o=[];for(let u of i)if(o=yield ht(u),o&&o.length>0)break;if(!o||o.length===0)return[];o=o.sort((u,g)=>{let d=u.title.toLowerCase(),x=g.title.toLowerCase(),$=`saison ${e}`,y=d.includes($),v=x.includes($);return y&&!v?-1:!y&&v?1:0});let c=[],l=new Set,h=o.map(u=>u.url);for(let u of h){if(l.has(u))continue;l.add(u);let d=u.toLowerCase().match(/saison[-_]?(\d+)/);if(!(d&&parseInt(d[1])!==e&&n.length===1))try{let x=yield A(u),$="VOSTFR";(u.includes("animes-vf/")||u.toLowerCase().includes("french"))&&($="VF");let y=[];for(let v of n){let F=mt(x,v);y.push(...F)}for(let v of y){let F=ft(v),_=yield k({name:`French-Anime (${$})`,title:`${F} Player`,url:v,quality:"HD",headers:{Referer:T}});c.push(_)}y.length>0&&console.log(`[French-Anime] Found ${y.length} players on ${u}`)}catch(x){console.error(`[French-Anime] Failed to fetch ${u}: ${x.message}`)}}let a=c.filter(u=>u&&u.isDirect);return console.log(`[French-Anime] Total streams found: ${a.length}`),a})}function dt(t,s,e,r){return f(this,null,function*(){console.log(`[French-Anime] Request: ${s} ${t} S${e}E${r}`);try{return yield N(t,s,e,r)}catch(i){return console.error("[French-Anime] Error:",i),[]}})}
