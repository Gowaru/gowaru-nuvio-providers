/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-26T15:15:44.037Z
 */
var H=Object.create;var R=Object.defineProperty,V=Object.defineProperties,K=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,J=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var U=(t,r,e)=>r in t?R(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,p=(t,r)=>{for(var e in r||(r={}))E.call(r,e)&&U(t,e,r[e]);if(T)for(var e of T(r))Y.call(r,e)&&U(t,e,r[e]);return t},x=(t,r)=>V(t,O(r));var Z=(t,r)=>{for(var e in r)R(t,e,{get:r[e],enumerable:!0})},_=(t,r,e,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of G(r))!E.call(t,n)&&n!==e&&R(t,n,{get:()=>r[n],enumerable:!(s=K(r,n))||s.enumerable});return t};var Q=(t,r,e)=>(e=t!=null?H(J(t)):{},_(r||!t||!t.__esModule?R(e,"default",{value:t,enumerable:!0}):e,t)),X=t=>_(R({},"__esModule",{value:!0}),t);var f=(t,r,e)=>new Promise((s,n)=>{var a=l=>{try{i(e.next(l))}catch(h){n(h)}},c=l=>{try{i(e.throw(l))}catch(h){n(h)}},i=l=>l.done?s(l.value):Promise.resolve(l.value).then(a,c);i((e=e.apply(t,r)).next())});var xt={};Z(xt,{getStreams:()=>vt});module.exports=X(xt);var tt={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function k(e){return f(this,arguments,function*(t,r={}){console.log(`[French-Anime] Fetching: ${t}`);let s=yield fetch(t,p({headers:p(p({},tt),r.headers)},r));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${t}`);return yield s.text()})}var N=Q(require("cheerio-without-node-native"));var et={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36"},C=t=>{try{return typeof atob=="function"?atob(t):Buffer.from(t,"base64").toString("binary")}catch(r){return t}};function y(e){return f(this,arguments,function*(t,r={}){try{let s=yield fetch(t,x(p({},r),{headers:p(p({},et),r.headers),redirect:"follow"}));if(!s.ok)return null;let n=yield s.text();return{text:()=>Promise.resolve(n),ok:!0,url:s.url,headers:s.headers}}catch(s){return null}})}function A(t){try{if(!t.includes("p,a,c,k,e,d"))return t;let r=new RegExp("eval\\s*\\(\\s*function\\s*\\(\\s*p\\s*,\\s*a\\s*,\\s*c\\s*,\\s*k\\s*,\\s*e\\s*,\\s*d\\s*\\).*?\\}\\s*\\((.*?)\\)\\s*\\)","gs"),e=t,s;for(;(s=r.exec(t))!==null;)try{let a=s[1].match(new RegExp("^'(.*?)',\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*'(.*?)'\\.split\\('\\|'\\)","s"));if(!a)continue;let c=a[1].replace(/\\'/g,"'"),i=parseInt(a[2]),l=parseInt(a[3]),h=a[4].split("|"),o=m=>(m<i?"":o(parseInt(m/i)))+((m=m%i)>35?String.fromCharCode(m+29):m.toString(36)),d={};for(;l--;)d[o(l)]=h[l]||o(l);let u=c.replace(/\b\w+\b/g,m=>d[m]||m);e=e.replace(s[0],u)}catch(n){}return e}catch(r){return t}}function st(t){return f(this,null,function*(){try{let r=yield y(t,{headers:{Referer:"https://video.sibnet.ru/"}});if(!r)return{url:t};let e=yield r.text(),s=e.match(/file\s*:\s*["']([^"']*\.mp4[^"']*)['"]/i)||e.match(/src\s*:\s*["']([^"']*\.mp4[^"']*)['"]/i)||e.match(/["']((?:https?:)?\/\/[^"'\s]+\.mp4[^"'\s]*)["']/i);if(s){let n=s[1];return n.startsWith("//")?n="https:"+n:n.startsWith("/")&&(n="https://video.sibnet.ru"+n),{url:n,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(r){}return{url:t}})}function rt(t){return f(this,null,function*(){try{let r={Referer:"https://vidmoly.to/",Origin:"https://vidmoly.to"},e=yield y(t,{headers:r});if(!e)return{url:t};let s=yield e.text(),n=s.match(/window\.location\.replace\(['"]([^'"]+)['"]\)/)||s.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);n&&n[1]!==t&&(e=yield y(n[1],{headers:r}),e&&(s=yield e.text())),s.includes("eval(function(p,a,c,k,e,d)")&&(s=A(s));let a=s.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/i)||s.match(/["'](https?:\/\/[^"']+\.(?:m3u8|mp4)[^"']*)["']/i);if(a)return{url:a[1],headers:{Referer:"https://vidmoly.to/"}}}catch(r){}return{url:t}})}function nt(t){return f(this,null,function*(){let r=t.replace(/^https?:\/\/[^/]+/,""),e=["uqload.co","uqload.com","uqload.io","uqloads.xyz","uqload.to"],s="https://uqload.co/";for(let n of e)try{let a=`https://${n}${r}`,c=yield y(a,{headers:{Referer:s}});if(!c)continue;let i=yield c.text(),l=i.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||i.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/)||i.match(/["'](https?:\/\/[^"']+\.(?:mp4|m3u8)[^"']*)["']/i);if(l)return{url:l[1],headers:{Referer:s}}}catch(a){}return{url:t}})}function at(t){return f(this,null,function*(){try{let r=yield y(t);if(!r)return{url:t};let e=yield r.text(),s=e.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(s){let a=yield y(s[1]);a&&(e=yield a.text())}let n=e.match(/'hls'\s*:\s*'([^']+)'/)||e.match(/"hls"\s*:\s*"([^"]+)"/)||e.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(n){let a=n[1]||n[0];return a.includes("base64")&&(a=C(a.split(",")[1]||a)),{url:a,headers:{Referer:t}}}}catch(r){}return{url:t}})}function it(t){return f(this,null,function*(){try{let r=yield y(t);if(!r)return{url:t};let e=yield r.text();e.includes("p,a,c,k,e,d")&&(e=A(e));let s=e.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(s){let n="https:"+s[1],a=s[2].split("+");for(let c of a){let i=c.match(/['"]([^'"]+)['"]/);if(i){let l=i[1],h=c.match(/substring\((\d+)\)/);h&&(l=l.substring(parseInt(h[1]))),n+=l}}return{url:n,headers:{Referer:"https://streamtape.com/"}}}}catch(r){}return{url:t}})}function ot(t){return f(this,null,function*(){try{let r=t.includes("/embed/")?t:t.replace(/sendvid\.com\/([a-z0-9]+)/i,"sendvid.com/embed/$1"),e=yield y(r,{headers:{Referer:"https://sendvid.com/"}});if(!e)return{url:t};let s=yield e.text(),n=s.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["|']/)||s.match(/source\s+src=["']([^"']+\.mp4[^"']*)["|']/)||s.match(/<source[^>]+src=["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/)||s.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["|']/)||s.match(/["'](https?:\/\/[^"']+\.mp4[^"']*)["']/);if(n)return{url:n[1],headers:{Referer:"https://sendvid.com/"}}}catch(r){}return{url:t}})}function ct(t){return f(this,null,function*(){try{let r=yield y(t);if(!r)return{url:t};let e=yield r.text();e.includes("p,a,c,k,e,d")&&(e=A(e));let s=e.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(s){let n=s[1];return n.includes("base64")&&(n=C(n.split(",")[1]||n)),{url:n,headers:{Referer:t}}}}catch(r){}return{url:t}})}function lt(t){return f(this,null,function*(){try{let r=yield y(t);if(!r)return{url:t};let s=(yield r.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(s)return{url:s[1],headers:{Referer:t}}}catch(r){}return{url:t}})}function ut(t){return f(this,null,function*(){var r;try{let e=((r=t.match(/https?:\/\/([^\/]+)/))==null?void 0:r[1])||"dood.to",s=yield y(t);if(!s)return{url:t};let n=yield s.text();n.includes("eval(function(p,a,c,k,e,d)")&&(n=A(n));let a=n.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(a){let c=a[1],i=`https://${e}/pass_md5/${c}`,l=yield fetch(i,{headers:{Referer:t}});if(l.ok){let h=yield l.text(),o=Math.random().toString(36).substring(2,12);return{url:h+o+"?token="+c+"&expiry="+Date.now(),headers:{Referer:`https://${e}/`}}}}}catch(e){}return{url:t}})}function ht(t){return f(this,null,function*(){try{let r=yield y(t,{headers:{Referer:"https://www.myvi.ru/"}});if(!r)return{url:t};let e=yield r.text();e.includes("eval(function(p,a,c,k,e,d)")&&(e=A(e));let s=e.match(/["'](?:file|src|url|stream_url)["']\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/)||e.match(/["'](https?:\/\/[^"']+\.(?:mp4|m3u8)[^"']*)["']/)||e.match(/source\s+src=["']([^"']+\.(?:mp4|m3u8)[^"']*)/);if(s)return{url:s[1],headers:{Referer:"https://www.myvi.ru/"}};let n=t.match(/\/(?:embed\/|watch\/|video\/)([a-zA-Z0-9_-]+)/);if(n){let a=`https://www.myvi.ru/api/video/${n[1]}`,c=yield y(a,{headers:{Referer:t}});if(c){let l=(yield c.text()).match(/["'](?:url|src|file)["']\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(l)return{url:l[1],headers:{Referer:"https://www.myvi.ru/"}}}}}catch(r){}return{url:t}})}function mt(t){return f(this,null,function*(){try{let r=yield y(t);if(!r)return{url:t};let s=(yield r.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(s)return{url:s[1],headers:{Referer:t}}}catch(r){}return{url:t}})}function D(t,r=0){return f(this,null,function*(){var n;if(r>3)return x(p({},t),{isDirect:!1});let e=t.url,s=e.toLowerCase();if(!e||e.includes("google-analytics")||e.includes("doubleclick"))return null;if(s.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!s.includes("html"))return x(p({},t),{isDirect:!0});try{let a=null;if(s.includes("sibnet.ru")?a=yield st(e):s.includes("vidmoly.")?a=yield rt(e):s.includes("uqload.")||s.includes("oneupload.")?a=yield nt(e):s.includes("voe.")?a=yield at(e):s.includes("streamtape.com")||s.includes("stape")?a=yield it(e):s.includes("dood")||s.includes("ds2play")?a=yield ut(e):s.includes("moonplayer")||s.includes("moon.")?a=yield mt(e):s.includes("sendvid.")?a=yield ot(e):s.includes("myvi.")||s.includes("mytv.")?a=yield ht(e):s.includes("luluvid.")||s.includes("lulu.")?a=yield ct(e):(s.includes("hgcloud.")||s.includes("savefiles."))&&(a=yield lt(e)),a&&a.url!==e)return x(p({},t),{url:a.url,headers:p(p({},t.headers),a.headers||{}),isDirect:!0,originalUrl:e});if(!a||a.url===e){let c=yield y(e,{headers:t.headers});if(c){let i=yield c.text();i.includes("p,a,c,k,e,d")&&(i=A(i));let l=i.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||i.match(/https?:\/\/[^"']+\.mp4[^"']*/)||i.match(/file\s*:\s*["']([^"']+)["']/);if(l){let h=l[1]||l[0];h.startsWith("//")&&(h="https:"+h),h.startsWith("http")&&!h.includes(ft)&&(a={url:h})}if(!a){let h=i.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(h){let o=h[1];if(o.startsWith("//")&&(o="https:"+o),o.startsWith("/")){let d=(n=e.match(/^https?:\/\/[^\/]+/))==null?void 0:n[0];d&&(o=d+o)}if(o.startsWith("http")&&o!==e)return console.log(`[Resolver] Peeling: Found nested iframe -> ${o}`),yield D(x(p({},t),{url:o}),r+1)}}}}if(a&&a.url!==e&&a.url.startsWith("http"))return x(p({},t),{url:a.url,headers:p(p({},t.headers),a.headers||{}),isDirect:!0,originalUrl:e})}catch(a){}return x(p({},t),{isDirect:!1})})}var ft="googletagmanager";var dt="https://arm.haglund.dev/api/v2";var pt="https://v3-cinemeta.strem.io";function F(e){return f(this,arguments,function*(t,r={}){try{let s=new AbortController,n=setTimeout(()=>s.abort(),8e3),a=yield fetch(t,x(p({},r),{signal:s.signal}));return clearTimeout(n),a}catch(s){return console.error(`[ArmSync] Fetch failed: ${t}`,s.message),null}})}function q(t,r){return f(this,null,function*(){if(!t)return null;let e=yield F(`${dt}/themoviedb?id=${t}`);if(e)try{let a=yield e.json(),c=Array.isArray(a)?a[0]:a;if(c&&c.imdb)return c.imdb}catch(a){}let s=`https://www.themoviedb.org/${r==="movie"?"movie":"tv"}/${t}`,n=yield F(s);if(n){let c=(yield n.text()).match(/imdb\.com\/title\/(tt\d+)/);if(c)return c[1]}return null})}function L(t,r,e){return f(this,null,function*(){var h;if(!t||r===0)return null;let s=yield F(`${pt}/meta/series/${t}.json`);if(!s)return null;let n=yield s.json();if(!((h=n==null?void 0:n.meta)!=null&&h.videos))return null;let a=n.meta.videos.filter(o=>o.season>0&&o.episode>0).sort((o,d)=>o.season-d.season||o.episode-d.episode),c=[],i=new Set;for(let o of a){let d=`${o.season}-${o.episode}`;i.has(d)||(i.add(d),c.push(o))}let l=c.findIndex(o=>o.season==r&&o.episode==e);if(l!==-1){let o=l+1;return console.log(`[ArmSync] Resolved: S${r}E${e} -> Absolute ${o}`),o}return null})}var W="8265bd1679663a7ea12ac168da84d2e8",P="https://api.themoviedb.org/3";function j(t){return f(this,null,function*(){try{let r=new AbortController,e=setTimeout(()=>r.abort(),8e3),s=yield fetch(t,{headers:{"User-Agent":"Mozilla/5.0",Accept:"application/json"},signal:r.signal});return clearTimeout(e),s.ok?s:null}catch(r){return null}})}function I(t,r){return f(this,null,function*(){var n,a,c,i,l,h;let e=r==="movie"?"movie":"tv",s=[];try{let o=`${P}/${e}/${t}?api_key=${W}&language=en-US`,d=yield j(o);if(d){let g=yield d.json(),w=(n=e==="movie"?g.title:g.name)==null?void 0:n.trim(),v=(a=e==="movie"?g.original_title:g.original_name)==null?void 0:a.trim();w&&s.push(w),v&&v!==w&&/^[\x00-\x7F\u00C0-\u024F\s]+$/.test(v)&&s.push(v)}let u=`${P}/${e}/${t}/translations?api_key=${W}`,m=yield j(u);if(m){let w=((yield m.json()).translations||[]).find($=>$.iso_639_1==="fr"),v=((i=(c=w==null?void 0:w.data)==null?void 0:c.name)==null?void 0:i.trim())||((h=(l=w==null?void 0:w.data)==null?void 0:l.title)==null?void 0:h.trim());v&&!s.includes(v)&&s.push(v)}}catch(o){console.error(`[Metadata] TMDB API error: ${o.message}`)}return console.log(`[Metadata] Titles for ${t}: ${s.join(" | ")}`),s})}var M="https://french-anime.com";function wt(t){return f(this,null,function*(){try{let r=`do=search&subaction=search&story=${encodeURIComponent(t)}`,e=yield k(`${M}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:M},body:r}),s=N.load(e),n=[],a=["a.mov-t",".mov-t a",".title a","h2 a","h3 a",".short-story a"],c=new Set;for(let o of a)if(s(o).each((d,u)=>{let m=s(u).attr("href"),g=s(u).text().trim();m&&m.includes("french-anime.com")&&m.includes(".html")&&g.length>2&&!c.has(m)&&(c.add(m),n.push({title:g,url:m}))}),n.length>0)break;n.length===0&&s('a[href*="french-anime.com"][href*=".html"]').each((o,d)=>{let u=s(d).attr("href"),m=s(d).text().trim();u&&m.length>2&&!c.has(u)&&(c.add(u),n.push({title:m,url:u}))});let i=o=>o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),l=i(t);console.log(`[French-Anime] Search results: ${n.length}`);let h=n.filter(o=>i(o.title).includes(l));return h.length>0&&console.log(`[French-Anime] Found ${h.length} matches for ${t}`),h}catch(r){return console.error(`[French-Anime] Search error: ${r.message}`),[]}})}function gt(t){return t.includes("sibnet")?"Sibnet":t.includes("vidmoly")?"Vidmoly":t.includes("christopheruntilpoint")||t.includes("voe")?"Voe":t.includes("luluvid")?"Luluvid":t.includes("savefiles")?"Savefiles":t.includes("up4fun")?"Up4Fun":t.includes("uqload")?"Uqload":t.includes("hgcloud")?"HGCloud":t.includes("myvi")?"MyVi":t.includes("rutube")?"Rutube":t.includes("ok.ru")?"OK.ru":t.includes("doodstream")||t.includes("vvide0")?"Doodstream":t.includes("mail.ru")?"Mail.ru":"Player"}function yt(t,r){let e=[],s=/(\d+)!((?:(?:https?:)?\/\/[^,<\s]+)(?:,(?:(?:https?:)?\/\/[^,<\s]+))*)/g,n;for(;(n=s.exec(t))!==null;)if(parseInt(n[1])===r){let c=n[2].split(",").filter(i=>i.startsWith("http")||i.startsWith("//"));for(let i of c)i=i.trim(),i.startsWith("//")&&(i="https:"+i),i.length>10&&e.push(i)}return e}function z(t,r,e,s){return f(this,null,function*(){let n=yield I(t,r);if(n.length===0)return[];let a=[...n].sort((u,m)=>{let g=/[àâéèêëîïôùûüç']/i.test(u)?-1:1,w=/[àâéèêëîïôùûüç']/i.test(m)?-1:1;return g-w}),c=[s];try{let u=yield q(t,r);if(u){let m=yield L(u,e,s);m&&m!==s&&c.push(m)}}catch(u){console.warn(`[French-Anime] ArmSync failed: ${u.message}`)}let i=[];for(let u of a)if(i=yield wt(u),i&&i.length>0)break;if(!i||i.length===0)return[];i=i.sort((u,m)=>{let g=u.title.toLowerCase(),w=m.title.toLowerCase(),v=`saison ${e}`,$=g.includes(v),b=w.includes(v);return $&&!b?-1:!$&&b?1:0});let l=[],h=new Set,o=i.map(u=>u.url);for(let u of o){if(h.has(u))continue;h.add(u);let g=u.toLowerCase().match(/saison[-_]?(\d+)/);if(!(g&&parseInt(g[1])!==e&&c.length===1))try{let w=yield k(u),v="VOSTFR";(u.includes("animes-vf/")||u.toLowerCase().includes("french"))&&(v="VF");let $=[];for(let b of c){let S=yt(w,b);$.push(...S)}for(let b of $){let S=gt(b),B=yield D({name:`French-Anime (${v})`,title:`${S} Player`,url:b,quality:"HD",headers:{Referer:M}});l.push(B)}$.length>0&&console.log(`[French-Anime] Found ${$.length} players on ${u}`)}catch(w){console.error(`[French-Anime] Failed to fetch ${u}: ${w.message}`)}}let d=l.filter(u=>u&&u.isDirect);return console.log(`[French-Anime] Total streams found: ${d.length}`),d})}function vt(t,r,e,s){return f(this,null,function*(){console.log(`[French-Anime] Request: ${r} ${t} S${e}E${s}`);try{return yield z(t,r,e,s)}catch(n){return console.error("[French-Anime] Error:",n),[]}})}
