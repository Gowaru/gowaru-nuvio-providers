/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-25T23:09:39.626Z
 */
var H=Object.create;var b=Object.defineProperty,K=Object.defineProperties,V=Object.getOwnPropertyDescriptor,z=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,G=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var T=(t,s,e)=>s in t?b(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,m=(t,s)=>{for(var e in s||(s={}))U.call(s,e)&&T(t,e,s[e]);if(M)for(var e of M(s))J.call(s,e)&&T(t,e,s[e]);return t},x=(t,s)=>K(t,z(s));var Y=(t,s)=>{for(var e in s)b(t,e,{get:s[e],enumerable:!0})},E=(t,s,e,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of O(s))!U.call(t,r)&&r!==e&&b(t,r,{get:()=>s[r],enumerable:!(n=V(s,r))||n.enumerable});return t};var Q=(t,s,e)=>(e=t!=null?H(G(t)):{},E(s||!t||!t.__esModule?b(e,"default",{value:t,enumerable:!0}):e,t)),X=t=>E(b({},"__esModule",{value:!0}),t);var f=(t,s,e)=>new Promise((n,r)=>{var i=u=>{try{a(e.next(u))}catch(h){r(h)}},l=u=>{try{a(e.throw(u))}catch(h){r(h)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(i,l);a((e=e.apply(t,s)).next())});var yt={};Y(yt,{getStreams:()=>gt});module.exports=X(yt);var Z={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function S(e){return f(this,arguments,function*(t,s={}){console.log(`[French-Anime] Fetching: ${t}`);let n=yield fetch(t,m({headers:m(m({},Z),s.headers)},s));if(!n.ok)throw new Error(`HTTP error ${n.status} for ${t}`);return yield n.text()})}var I=Q(require("cheerio-without-node-native"));var tt={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36"},C=t=>{try{return typeof atob=="function"?atob(t):Buffer.from(t,"base64").toString("binary")}catch(s){return t}};function g(e){return f(this,arguments,function*(t,s={}){try{let n=yield fetch(t,x(m({},s),{headers:m(m({},tt),s.headers),redirect:"follow"}));if(!n.ok)return null;let r=yield n.text();return{text:()=>Promise.resolve(r),ok:!0,url:n.url,headers:n.headers}}catch(n){return null}})}function A(t){try{if(!t.includes("p,a,c,k,e,d"))return t;let s=new RegExp("eval\\s*\\(\\s*function\\s*\\(\\s*p\\s*,\\s*a\\s*,\\s*c\\s*,\\s*k\\s*,\\s*e\\s*,\\s*d\\s*\\).*?\\}\\s*\\((.*?)\\)\\s*\\)","gs"),e=t,n;for(;(n=s.exec(t))!==null;)try{let i=n[1].match(new RegExp("^'(.*?)',\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*'(.*?)'\\.split\\('\\|'\\)","s"));if(!i)continue;let l=i[1].replace(/\\'/g,"'"),a=parseInt(i[2]),u=parseInt(i[3]),h=i[4].split("|"),o=d=>(d<a?"":o(parseInt(d/a)))+((d=d%a)>35?String.fromCharCode(d+29):d.toString(36)),c={};for(;u--;)c[o(u)]=h[u]||o(u);let v=l.replace(/\b\w+\b/g,d=>c[d]||d);e=e.replace(n[0],v)}catch(r){}return e}catch(s){return t}}function et(t){return f(this,null,function*(){try{let s=yield g(t,{headers:{Referer:"https://video.sibnet.ru/"}});if(!s)return{url:t};let e=yield s.text(),n=e.match(/src\s*:\s*["']([^"']+\.mp4)["']/)||e.match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(n){let r=n[1];return r.startsWith("//")?r="https:"+r:r.startsWith("/")&&(r="https://video.sibnet.ru"+r),{url:r,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(s){}return{url:t}})}function st(t){return f(this,null,function*(){try{let s=yield g(t,{headers:{Referer:"https://vidmoly.to/"}});if(!s)return{url:t};let e=yield s.text();e.includes("eval(function(p,a,c,k,e,d)")&&(e=A(e));let n=e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(n)return{url:n[1],headers:{Referer:"https://vidmoly.to/"}}}catch(s){}return{url:t}})}function nt(t){return f(this,null,function*(){try{let s=yield g(t,{headers:{Referer:"https://uqload.com/"}});if(!s)return{url:t};let e=yield s.text(),n=e.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/);if(n)return{url:n[1],headers:{Referer:"https://uqload.com/"}}}catch(s){}return{url:t}})}function rt(t){return f(this,null,function*(){try{let s=yield g(t);if(!s)return{url:t};let e=yield s.text(),n=e.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(n){let i=yield g(n[1]);i&&(e=yield i.text())}let r=e.match(/'hls'\s*:\s*'([^']+)'/)||e.match(/"hls"\s*:\s*"([^"]+)"/)||e.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(r){let i=r[1]||r[0];return i.includes("base64")&&(i=C(i.split(",")[1]||i)),{url:i,headers:{Referer:t}}}}catch(s){}return{url:t}})}function it(t){return f(this,null,function*(){try{let s=yield g(t);if(!s)return{url:t};let e=yield s.text();e.includes("p,a,c,k,e,d")&&(e=A(e));let n=e.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(n){let r="https:"+n[1],i=n[2].split("+");for(let l of i){let a=l.match(/['"]([^'"]+)['"]/);if(a){let u=a[1],h=l.match(/substring\((\d+)\)/);h&&(u=u.substring(parseInt(h[1]))),r+=u}}return{url:r,headers:{Referer:"https://streamtape.com/"}}}}catch(s){}return{url:t}})}function at(t){return f(this,null,function*(){try{let s=yield g(t);if(!s)return{url:t};let e=yield s.text(),n=e.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["']/)||e.match(/source\s+src=["']([^"']+\.mp4[^"']*)["']/);if(n)return{url:n[1]}}catch(s){}return{url:t}})}function ot(t){return f(this,null,function*(){try{let s=yield g(t);if(!s)return{url:t};let e=yield s.text();e.includes("p,a,c,k,e,d")&&(e=A(e));let n=e.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(n){let r=n[1];return r.includes("base64")&&(r=C(r.split(",")[1]||r)),{url:r,headers:{Referer:t}}}}catch(s){}return{url:t}})}function ct(t){return f(this,null,function*(){try{let s=yield g(t);if(!s)return{url:t};let n=(yield s.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(n)return{url:n[1],headers:{Referer:t}}}catch(s){}return{url:t}})}function lt(t){return f(this,null,function*(){var s;try{let e=((s=t.match(/https?:\/\/([^\/]+)/))==null?void 0:s[1])||"dood.to",n=yield g(t);if(!n)return{url:t};let r=yield n.text();r.includes("eval(function(p,a,c,k,e,d)")&&(r=A(r));let i=r.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(i){let l=i[1],a=`https://${e}/pass_md5/${l}`,u=yield fetch(a,{headers:{Referer:t}});if(u.ok){let h=yield u.text(),o=Math.random().toString(36).substring(2,12);return{url:h+o+"?token="+l+"&expiry="+Date.now(),headers:{Referer:`https://${e}/`}}}}}catch(e){}return{url:t}})}function ut(t){return f(this,null,function*(){try{let s=yield g(t);if(!s)return{url:t};let n=(yield s.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(n)return{url:n[1],headers:{Referer:t}}}catch(s){}return{url:t}})}function k(t,s=0){return f(this,null,function*(){var r;if(s>3)return x(m({},t),{isDirect:!1});let e=t.url,n=e.toLowerCase();if(!e||e.includes("google-analytics")||e.includes("doubleclick"))return null;if(n.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!n.includes("html"))return x(m({},t),{isDirect:!0});try{let i=null;if(n.includes("sibnet.ru")?i=yield et(e):n.includes("vidmoly.")?i=yield st(e):n.includes("uqload.")||n.includes("oneupload.")?i=yield nt(e):n.includes("voe.")?i=yield rt(e):n.includes("streamtape.com")||n.includes("stape")?i=yield it(e):n.includes("dood")||n.includes("ds2play")?i=yield lt(e):n.includes("moonplayer")||n.includes("moon.")?i=yield ut(e):n.includes("sendvid.")?i=yield at(e):n.includes("luluvid.")||n.includes("lulu.")?i=yield ot(e):(n.includes("hgcloud.")||n.includes("savefiles."))&&(i=yield ct(e)),i&&i.url!==e)return x(m({},t),{url:i.url,headers:m(m({},t.headers),i.headers||{}),isDirect:!0,originalUrl:e});if(!i||i.url===e){let l=yield g(e,{headers:t.headers});if(l){let a=yield l.text();a.includes("p,a,c,k,e,d")&&(a=A(a));let u=a.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||a.match(/https?:\/\/[^"']+\.mp4[^"']*/)||a.match(/file\s*:\s*["']([^"']+)["']/);if(u){let h=u[1]||u[0];h.startsWith("//")&&(h="https:"+h),h.startsWith("http")&&!h.includes(ht)&&(i={url:h})}if(!i){let h=a.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(h){let o=h[1];if(o.startsWith("//")&&(o="https:"+o),o.startsWith("/")){let c=(r=e.match(/^https?:\/\/[^\/]+/))==null?void 0:r[0];c&&(o=c+o)}if(o.startsWith("http")&&o!==e)return console.log(`[Resolver] Peeling: Found nested iframe -> ${o}`),yield k(x(m({},t),{url:o}),s+1)}}}}if(i&&i.url!==e&&i.url.startsWith("http"))return x(m({},t),{url:i.url,headers:m(m({},t.headers),i.headers||{}),isDirect:!0,originalUrl:e})}catch(i){}return x(m({},t),{isDirect:!1})})}var ht="googletagmanager";var ft="https://arm.haglund.dev/api/v2";var mt="https://v3-cinemeta.strem.io";function D(e){return f(this,arguments,function*(t,s={}){try{let n=new AbortController,r=setTimeout(()=>n.abort(),8e3),i=yield fetch(t,x(m({},s),{signal:n.signal}));return clearTimeout(r),i}catch(n){return console.error(`[ArmSync] Fetch failed: ${t}`,n.message),null}})}function _(t,s){return f(this,null,function*(){if(!t)return null;let e=yield D(`${ft}/themoviedb?id=${t}`);if(e)try{let i=yield e.json(),l=Array.isArray(i)?i[0]:i;if(l&&l.imdb)return l.imdb}catch(i){}let n=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${t}`,r=yield D(n);if(r){let l=(yield r.text()).match(/imdb\.com\/title\/(tt\d+)/);if(l)return l[1]}return null})}function L(t,s,e){return f(this,null,function*(){var h;if(!t||s===0)return null;let n=yield D(`${mt}/meta/series/${t}.json`);if(!n)return null;let r=yield n.json();if(!((h=r==null?void 0:r.meta)!=null&&h.videos))return null;let i=r.meta.videos.filter(o=>o.season>0&&o.episode>0).sort((o,c)=>o.season-c.season||o.episode-c.episode),l=[],a=new Set;for(let o of i){let c=`${o.season}-${o.episode}`;a.has(c)||(a.add(c),l.push(o))}let u=l.findIndex(o=>o.season==s&&o.episode==e);if(u!==-1){let o=u+1;return console.log(`[ArmSync] Resolved: S${s}E${e} -> Absolute ${o}`),o}return null})}var W="8265bd1679663a7ea12ac168da84d2e8",q="https://api.themoviedb.org/3";function P(t){return f(this,null,function*(){try{let s=new AbortController,e=setTimeout(()=>s.abort(),8e3),n=yield fetch(t,{headers:{"User-Agent":"Mozilla/5.0",Accept:"application/json"},signal:s.signal});return clearTimeout(e),n.ok?n:null}catch(s){return null}})}function j(t,s){return f(this,null,function*(){var r,i,l,a,u,h;let e=s==="movie"?"movie":"tv",n=[];try{let o=`${q}/${e}/${t}?api_key=${W}&language=en-US`,c=yield P(o);if(c){let y=yield c.json(),p=(r=e==="movie"?y.title:y.name)==null?void 0:r.trim(),w=(i=e==="movie"?y.original_title:y.original_name)==null?void 0:i.trim();p&&n.push(p),w&&w!==p&&/^[\x00-\x7F\u00C0-\u024F\s]+$/.test(w)&&n.push(w)}let v=`${q}/${e}/${t}/translations?api_key=${W}`,d=yield P(v);if(d){let p=((yield d.json()).translations||[]).find($=>$.iso_639_1==="fr"),w=((a=(l=p==null?void 0:p.data)==null?void 0:l.name)==null?void 0:a.trim())||((h=(u=p==null?void 0:p.data)==null?void 0:u.title)==null?void 0:h.trim());w&&!n.includes(w)&&n.push(w)}}catch(o){console.error(`[Metadata] TMDB API error: ${o.message}`)}return console.log(`[Metadata] Titles for ${t}: ${n.join(" | ")}`),n})}var F="https://french-anime.com";function dt(t){return f(this,null,function*(){try{let s=`do=search&subaction=search&story=${encodeURIComponent(t)}`,e=yield S(`${F}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:F},body:s}),n=I.load(e),r=[];n("a.mov-t").each((u,h)=>{let o=n(h).attr("href"),c=n(h).text().trim();o&&o.includes(".html")&&r.push({title:c,url:o})});let i=u=>u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),l=i(t);console.log(`[French-Anime] Search results: ${r.length}`);let a=r.filter(u=>i(u.title).includes(l));return a.length>0&&console.log(`[French-Anime] Found ${a.length} matches for ${t}`),a}catch(s){return console.error(`[French-Anime] Search error: ${s.message}`),[]}})}function pt(t){return t.includes("sibnet")?"Sibnet":t.includes("vidmoly")?"Vidmoly":t.includes("christopheruntilpoint")||t.includes("voe")?"Voe":t.includes("luluvid")?"Luluvid":t.includes("savefiles")?"Savefiles":t.includes("up4fun")?"Up4Fun":t.includes("uqload")?"Uqload":t.includes("hgcloud")?"HGCloud":t.includes("myvi")?"MyVi":t.includes("rutube")?"Rutube":t.includes("ok.ru")?"OK.ru":t.includes("doodstream")||t.includes("vvide0")?"Doodstream":t.includes("mail.ru")?"Mail.ru":"Player"}function wt(t,s){let e=[],n=/(\d+)!((?:(?:https?:)?\/\/[^,<\s]+)(?:,(?:(?:https?:)?\/\/[^,<\s]+))*)/g,r;for(;(r=n.exec(t))!==null;)if(parseInt(r[1])===s){let l=r[2].split(",").filter(a=>a.startsWith("http")||a.startsWith("//"));for(let a of l)a=a.trim(),a.startsWith("//")&&(a="https:"+a),a.length>10&&e.push(a)}return e}function N(t,s,e,n){return f(this,null,function*(){let r=yield j(t,s);if(r.length===0)return[];let i=[n];try{let c=yield _(t,s);if(c){let v=yield L(c,e,n);v&&v!==n&&i.push(v)}}catch(c){console.warn(`[French-Anime] ArmSync failed: ${c.message}`)}let l=[];for(let c of r)if(l=yield dt(c),l&&l.length>0)break;if(!l||l.length===0)return[];l=l.sort((c,v)=>{let d=c.title.toLowerCase(),y=v.title.toLowerCase(),p=`saison ${e}`,w=d.includes(p),$=y.includes(p);return w&&!$?-1:!w&&$?1:0});let a=[],u=new Set,h=l.map(c=>c.url);for(let c of h){if(u.has(c))continue;u.add(c);let d=c.toLowerCase().match(/saison[-_]?(\d+)/);if(!(d&&parseInt(d[1])!==e&&i.length===1))try{let y=yield S(c),p="VOSTFR";(c.includes("animes-vf/")||c.toLowerCase().includes("french"))&&(p="VF");let w=[];for(let $ of i){let R=wt(y,$);w.push(...R)}for(let $ of w){let R=pt($),B=yield k({name:`French-Anime (${p})`,title:`${R} Player`,url:$,quality:"HD",headers:{Referer:F}});a.push(B)}w.length>0&&console.log(`[French-Anime] Found ${w.length} players on ${c}`)}catch(y){console.error(`[French-Anime] Failed to fetch ${c}: ${y.message}`)}}let o=a.filter(c=>c&&c.isDirect);return console.log(`[French-Anime] Total streams found: ${o.length}`),o})}function gt(t,s,e,n){return f(this,null,function*(){console.log(`[French-Anime] Request: ${s} ${t} S${e}E${n}`);try{return yield N(t,s,e,n)}catch(r){return console.error("[French-Anime] Error:",r),[]}})}
