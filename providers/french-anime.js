/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-25T10:36:17.672Z
 */
var D=Object.create;var x=Object.defineProperty,k=Object.defineProperties,L=Object.getOwnPropertyDescriptor,M=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,H=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var A=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))T.call(t,n)&&A(e,n,t[n]);if(F)for(var n of F(t))E.call(t,n)&&A(e,n,t[n]);return e},v=(e,t)=>k(e,M(t));var N=(e,t)=>{for(var n in t)x(e,n,{get:t[n],enumerable:!0})},R=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of W(t))!T.call(e,r)&&r!==n&&x(e,r,{get:()=>t[r],enumerable:!(s=L(t,r))||s.enumerable});return e};var V=(e,t,n)=>(n=e!=null?D(H(e)):{},R(t||!e||!e.__esModule?x(n,"default",{value:e,enumerable:!0}):n,e)),z=e=>R(x({},"__esModule",{value:!0}),e);var o=(e,t,n)=>new Promise((s,r)=>{var i=c=>{try{a(n.next(c))}catch(l){r(l)}},f=c=>{try{a(n.throw(c))}catch(l){r(l)}},a=c=>c.done?s(c.value):Promise.resolve(c.value).then(i,f);a((n=n.apply(e,t)).next())});var oe={};N(oe,{getStreams:()=>ie});module.exports=z(oe);var P={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function y(n){return o(this,arguments,function*(e,t={}){console.log(`[French-Anime] Fetching: ${e}`);let s=yield fetch(e,u({headers:u(u({},P),t.headers)},t));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${e}`);return yield s.text()})}var S=V(require("cheerio"));var K={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7"};function h(n){return o(this,arguments,function*(e,t={}){try{let s=new AbortController,r=setTimeout(()=>s.abort(),1e4),i=yield fetch(e,v(u({},t),{headers:u(u({},K),t.headers),signal:s.signal}));return clearTimeout(r),i}catch(s){return console.error(`[Resolver] Fetch failed for ${e}: ${s.message}`),null}})}function O(e){return o(this,null,function*(){let t=yield h(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!t)return e;let n=yield t.text(),s=n.match(/"url"\s*:\s*"([^"]+\.mp4)"/)||n.match(/src\s*:\s*"([^"]+\.mp4)"/)||n.match(/player\.setVideo\(\s*\{\s*"url"\s*:\s*"([^"]+)"/);if(s){let r=s[1];return r.startsWith("//")?r=`https:${r}`:r.startsWith("/")&&(r=`https://video.sibnet.ru${r}`),r}return e})}function B(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let s=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return s?s[1]:e})}function G(e){return o(this,null,function*(){let t=yield h(e,{headers:{Referer:"https://uqload.com/"}});if(!t)return e;let n=yield t.text(),s=n.match(/sources\s*:\s*\["([^"]+)"\]/)||n.match(/src\s*:\s*"([^"]+\.(?:mp4|m3u8))"/);return s?s[1]:e})}function _(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let n=yield t.text(),s=n.match(/'hls'\s*:\s*'([^']+)'/)||n.match(/"hls"\s*:\s*"([^"]+)"/)||n.match(/window\.location\.href\s*=\s*'([^']+)'/);if(s){let r=s[1];if(r.includes("base64"))try{let i=r.split(",")[1]||r;typeof atob!="undefined"&&(r=atob(i))}catch(i){}return r}return e})}function I(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let n=yield t.text(),s=n.match(/sources\s*:\s*\[\s*\{\s*"file"\s*:\s*"([^"]+)"/i)||n.match(/file\s*:\s*"([^"]+)"/i);return s?s[1]:e})}function j(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let n=yield t.text(),s=n.match(/file\s*:\s*"([^"]+)"/i)||n.match(/source\s*:\s*"([^"]+)"/i);return s?s[1]:e})}function J(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let n=yield t.text(),s=n.match(/file\s*:\s*"([^"]+)"/i)||n.match(/src\s*:\s*"([^"]+\.(?:mp4|m3u8))"/i);return s?s[1]:e})}function Q(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let s=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return s?s[1]:e})}function X(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let s=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return s?s[1]:e})}function Y(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let n=yield t.text(),s=n.match(/robotlink\.innerHTML\s*=\s*'([^']+)'/);if(s){let i=s[1];return i.startsWith("//")&&(i=`https:${i}`),i}return n.match(/video_link\s*:\s*"([^"]+)"/)?s[2]:e})}function Z(e){return o(this,null,function*(){let t=yield h(e);if(!t)return e;let n=yield t.text(),s=n.match(/source\s+src="([^"]+\.mp4)"/i)||n.match(/video_source\s*:\s*"([^"]+)"/);return s?s[1]:e})}function ee(e){return o(this,null,function*(){let t=e.replace("/e/","/d/"),n=yield h(t);if(!n)return e;let r=(yield n.text()).match(/window\.open\('([^']+)'\)/);return r?r[1]:e})}function U(e){return o(this,null,function*(){let t=e.url,n=t.toLowerCase();if(n.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/))return v(u({},e),{isDirect:!0});try{let s=t,r=u({},e.headers);if(n.includes("sibnet.ru")?(s=yield O(t),r.Referer="https://video.sibnet.ru/"):n.includes("vidmoly.")?(s=yield B(t),r.Referer="https://vidmoly.to/"):n.includes("uqload.")?(s=yield G(t),r.Referer="https://uqload.com/"):n.includes("voe.sx")||n.includes("christopheruntilpoint")?s=yield _(t):n.includes("moonplayer")||n.includes("moonembed")?s=yield I(t):n.includes("mytv")||n.includes("mycloud")||n.includes("mclls.net")?s=yield j(t):n.includes("fhd")||n.includes("fhd1")?s=yield J(t):n.includes("upstream.")?s=yield Q(t):n.includes("vido.")||n.includes("vidlo.")?s=yield X(t):n.includes("streamtape.com")?s=yield Y(t):n.includes("sendvid.com")?s=yield Z(t):(n.includes("dood")||n.includes("ds2play")||n.includes("viddood"))&&(s=yield ee(t)),s!==t&&s.startsWith("http"))return console.log(`[Resolver] Success: ${t.substring(0,30)}... -> ${s.substring(0,30)}...`),v(u({},e),{url:s,isDirect:!0,headers:r,originalUrl:t})}catch(s){console.error(`[Resolver] Failed for ${t}:`,s)}return v(u({},e),{isDirect:!1})})}var $="https://french-anime.com";function te(e,t){return o(this,null,function*(){try{let n=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}?language=en-US`,s=yield y(n),r=S.default.load(s),i=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return i&&i.includes(" (")&&(i=i.split(" (")[0]),i&&i.includes(" - ")&&(i=i.split(" - ")[0]),i=i?i.trim():null,console.log(`[French-Anime] TMDB Title found: ${i}`),i}catch(n){return console.error(`[French-Anime] Failed to get title from TMDB: ${n.message}`),null}})}function ne(e){return o(this,null,function*(){try{let t=`do=search&subaction=search&story=${encodeURIComponent(e)}`,n=yield y(`${$}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:$},body:t}),s=S.default.load(n),r=[];s("a.mov-t").each((c,l)=>{let m=s(l).attr("href"),d=s(l).text().trim();m&&m.includes(".html")&&r.push({title:d,url:m})});let i=c=>c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),f=i(e);console.log(`[French-Anime] Search results: ${r.length}`);let a=r.find(c=>i(c.title).includes(f)&&c.url.includes("animes-vostfr"));return a||(a=r.find(c=>i(c.title).includes(f))),a||(a=r[0]),a?(console.log(`[French-Anime] Selected: ${a.title} -> ${a.url}`),a):null}catch(t){return console.error(`[French-Anime] Search error: ${t.message}`),null}})}function se(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("up4fun")?"Up4Fun":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("myvi")?"MyVi":e.includes("rutube")?"Rutube":e.includes("ok.ru")?"OK.ru":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("mail.ru")?"Mail.ru":"Player"}function re(e,t){let n=[],s=/(\d+)!((?:https?:\/\/[^,<\s]+)(?:,(?:https?:\/\/[^,<\s]+))*)/g,r;for(;(r=s.exec(e))!==null;)if(parseInt(r[1])===t){let f=r[2].split(",").filter(a=>a.startsWith("http"));for(let a of f){let c=a.trim();c.length>10&&n.push(c)}}return n}function q(e,t,n,s){return o(this,null,function*(){let r=yield te(e,t);if(!r)return[];let i=yield ne(r);if(!i)return[];let f=[],a=new Set,c=[i.url];try{let l=yield y(`${$}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:$},body:`do=search&subaction=search&story=${encodeURIComponent(r)}`}),m=S.default.load(l),d=g=>g.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),w=d(r);m("a.mov-t").each((g,b)=>{let p=m(b).attr("href"),C=d(m(b).text().trim());p&&p.includes(".html")&&C.includes(w)&&(c.includes(p)||c.push(p))})}catch(l){}for(let l of c)if(!a.has(l)){a.add(l);try{let m=yield y(l),d="VOSTFR";(l.includes("animes-vf/")||l.toLowerCase().includes("french"))&&(d="VF");let w=re(m,s);for(let g of w){let b=se(g),p=yield U({name:`French-Anime (${d})`,title:`${b} Player`,url:g,quality:"HD",headers:{Referer:$}});f.push(p)}w.length>0&&console.log(`[French-Anime] Found ${w.length} players on ${l}`)}catch(m){console.error(`[French-Anime] Failed to fetch ${l}: ${m.message}`)}}return f})}function ie(e,t,n,s){return o(this,null,function*(){console.log(`[French-Anime] Request: ${t} ${e} S${n}E${s}`);try{return yield q(e,t,n,s)}catch(r){return console.error("[French-Anime] Error:",r),[]}})}
