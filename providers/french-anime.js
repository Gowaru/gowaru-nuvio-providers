/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-25T10:09:14.931Z
 */
var D=Object.create;var x=Object.defineProperty,L=Object.defineProperties,k=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,N=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var A=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(F)for(var r of F(t))H.call(t,r)&&A(e,r,t[r]);return e},b=(e,t)=>L(e,E(t));var W=(e,t)=>{for(var r in t)x(e,r,{get:t[r],enumerable:!0})},C=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of M(t))!T.call(e,o)&&o!==r&&x(e,o,{get:()=>t[o],enumerable:!(n=k(t,o))||n.enumerable});return e};var V=(e,t,r)=>(r=e!=null?D(N(e)):{},C(t||!e||!e.__esModule?x(r,"default",{value:e,enumerable:!0}):r,e)),z=e=>C(x({},"__esModule",{value:!0}),e);var l=(e,t,r)=>new Promise((n,o)=>{var s=i=>{try{c(r.next(i))}catch(a){o(a)}},h=i=>{try{c(r.throw(i))}catch(a){o(a)}},c=i=>i.done?n(i.value):Promise.resolve(i.value).then(s,h);c((r=r.apply(e,t)).next())});var ee={};W(ee,{getStreams:()=>Z});module.exports=z(ee);var P={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function v(r){return l(this,arguments,function*(e,t={}){console.log(`[French-Anime] Fetching: ${e}`);let n=yield fetch(e,m({headers:m(m({},P),t.headers)},t));if(!n.ok)throw new Error(`HTTP error ${n.status} for ${e}`);return yield n.text()})}var S=V(require("cheerio"));var K={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"*/*"};function p(r){return l(this,arguments,function*(e,t={}){try{let n=new AbortController,o=setTimeout(()=>n.abort(),1e4),s=yield fetch(e,b(m({},t),{headers:m(m({},K),t.headers),signal:n.signal}));return clearTimeout(o),s}catch(n){return console.error(`[Resolver] Fetch failed for ${e}: ${n.message}`),null}})}function O(e){return l(this,null,function*(){let t=yield p(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!t)return e;let n=(yield t.text()).match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(n){let o=n[1];return o.startsWith("/")&&(o=`https://video.sibnet.ru${o}`),o}return e})}function B(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let n=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return n?n[1]:e})}function G(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let n=(yield t.text()).match(/sources\s*:\s*\["([^"]+)"\]/);return n?n[1]:e})}function I(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let r=yield t.text(),n=r.match(/'hls'\s*:\s*'([^']+)'/)||r.match(/"hls"\s*:\s*"([^"]+)"/);return n?n[1]:e})}function _(e){return l(this,null,function*(){let t=yield p(e);if(!t)return e;let n=(yield t.text()).match(/source\s+src="([^"]+\.mp4)"/i);return n?n[1]:e})}function j(e){return l(this,null,function*(){let t=yield p(e.replace("/e/","/d/"));if(!t)return e;let n=(yield t.text()).match(/window\.open\('([^']+)'\)/);return n?n[1]:e})}function R(e){return l(this,null,function*(){let t=e.url,r=t.toLowerCase();try{let n=t;if(r.includes("sibnet.ru")?n=yield O(t):r.includes("vidmoly.")?n=yield B(t):r.includes("uqload.")?n=yield G(t):r.includes("voe.sx")||r.includes("christopheruntilpoint")?n=yield I(t):r.includes("sendvid.com")?n=yield _(t):(r.includes("dood")||r.includes("ds2play")||r.includes("viddood"))&&(n=yield j(t)),n!==t)return console.log(`[Resolver] Success: ${t.substring(0,30)}... -> ${n.substring(0,30)}...`),b(m({},e),{url:n,isDirect:!0,originalUrl:t})}catch(n){console.error(`[Resolver] Failed for ${t}:`,n)}return e})}var y="https://french-anime.com";function J(e,t){return l(this,null,function*(){try{let r=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}?language=en-US`,n=yield v(r),o=S.default.load(n),s=o('meta[property="og:title"]').attr("content")||o("h1").first().text()||o("h2").first().text();return s&&s.includes(" (")&&(s=s.split(" (")[0]),s&&s.includes(" - ")&&(s=s.split(" - ")[0]),s=s?s.trim():null,console.log(`[French-Anime] TMDB Title found: ${s}`),s}catch(r){return console.error(`[French-Anime] Failed to get title from TMDB: ${r.message}`),null}})}function Q(e){return l(this,null,function*(){try{let t=`do=search&subaction=search&story=${encodeURIComponent(e)}`,r=yield v(`${y}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:y},body:t}),n=S.default.load(r),o=[];n("a.mov-t").each((i,a)=>{let u=n(a).attr("href"),f=n(a).text().trim();u&&u.includes(".html")&&o.push({title:f,url:u})});let s=i=>i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),h=s(e);console.log(`[French-Anime] Search results: ${o.length}`);let c=o.find(i=>s(i.title).includes(h)&&i.url.includes("animes-vostfr"));return c||(c=o.find(i=>s(i.title).includes(h))),c||(c=o[0]),c?(console.log(`[French-Anime] Selected: ${c.title} -> ${c.url}`),c):null}catch(t){return console.error(`[French-Anime] Search error: ${t.message}`),null}})}function X(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("up4fun")?"Up4Fun":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("myvi")?"MyVi":e.includes("rutube")?"Rutube":e.includes("ok.ru")?"OK.ru":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("mail.ru")?"Mail.ru":"Player"}function Y(e,t){let r=[],n=/(\d+)!((?:https?:\/\/[^,<\s]+)(?:,(?:https?:\/\/[^,<\s]+))*)/g,o;for(;(o=n.exec(e))!==null;)if(parseInt(o[1])===t){let h=o[2].split(",").filter(c=>c.startsWith("http"));for(let c of h){let i=c.trim();i.length>10&&r.push(i)}}return r}function U(e,t,r,n){return l(this,null,function*(){let o=yield J(e,t);if(!o)return[];let s=yield Q(o);if(!s)return[];let h=[],c=new Set,i=[s.url];try{let a=yield v(`${y}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:y},body:`do=search&subaction=search&story=${encodeURIComponent(o)}`}),u=S.default.load(a),f=w=>w.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),g=f(o);u("a.mov-t").each((w,$)=>{let d=u($).attr("href"),q=f(u($).text().trim());d&&d.includes(".html")&&q.includes(g)&&(i.includes(d)||i.push(d))})}catch(a){}for(let a of i)if(!c.has(a)){c.add(a);try{let u=yield v(a),f="VOSTFR";(a.includes("animes-vf/")||a.toLowerCase().includes("french"))&&(f="VF");let g=Y(u,n);for(let w of g){let $=X(w),d=yield R({name:`French-Anime (${f})`,title:`${$} Player`,url:w,quality:"HD",headers:{Referer:y}});h.push(d)}g.length>0&&console.log(`[French-Anime] Found ${g.length} players on ${a}`)}catch(u){console.error(`[French-Anime] Failed to fetch ${a}: ${u.message}`)}}return h})}function Z(e,t,r,n){return l(this,null,function*(){console.log(`[French-Anime] Request: ${t} ${e} S${r}E${n}`);try{return yield U(e,t,r,n)}catch(o){return console.error("[French-Anime] Error:",o),[]}})}
