/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-25T17:10:18.135Z
 */
var N=Object.create;var x=Object.defineProperty,L=Object.defineProperties,P=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,W=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var F=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))k.call(t,n)&&F(e,n,t[n]);if(D)for(var n of D(t))_.call(t,n)&&F(e,n,t[n]);return e},w=(e,t)=>L(e,j(t));var V=(e,t)=>{for(var n in t)x(e,n,{get:t[n],enumerable:!0})},T=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of H(t))!k.call(e,s)&&s!==n&&x(e,s,{get:()=>t[s],enumerable:!(r=P(t,s))||r.enumerable});return e};var z=(e,t,n)=>(n=e!=null?N(W(e)):{},T(t||!e||!e.__esModule?x(n,"default",{value:e,enumerable:!0}):n,e)),K=e=>T(x({},"__esModule",{value:!0}),e);var m=(e,t,n)=>new Promise((r,s)=>{var o=a=>{try{c(n.next(a))}catch(u){s(u)}},l=a=>{try{c(n.throw(a))}catch(u){s(u)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(o,l);c((n=n.apply(e,t)).next())});var le={};V(le,{getStreams:()=>ce});module.exports=K(le);var B={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function b(n){return m(this,arguments,function*(e,t={}){console.log(`[French-Anime] Fetching: ${e}`);let r=yield fetch(e,h({headers:h(h({},B),t.headers)},t));if(!r.ok)throw new Error(`HTTP error ${r.status} for ${e}`);return yield r.text()})}var S=z(require("cheerio"));var O={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36"},G=e=>{try{return typeof atob=="function"?atob(e):Buffer.from(e,"base64").toString("binary")}catch(t){return e}};function d(n){return m(this,arguments,function*(e,t={}){try{let r=yield fetch(e,w(h({},t),{headers:h(h({},O),t.headers),redirect:"follow"}));if(!r.ok)return null;let s=yield r.text();return{text:()=>Promise.resolve(s),ok:!0,url:r.url,headers:r.headers}}catch(r){return null}})}function M(e){try{if(!e.includes("p,a,c,k,e,d"))return e;let t=e.match(/}\s*\((.*)\)\s*$/);if(!t)return e;let n=t[1].match(/(".+"|\d+)/g);if(n.length<4)return e;let[r,s,o,l]=[n[0].replace(/^"|"$/g,""),parseInt(n[1]),parseInt(n[2]),n[3].replace(/^"|"$/g,"").split("|")],c=u=>(u<s?"":c(parseInt(u/s)))+((u=u%s)>35?String.fromCharCode(u+29):u.toString(36)),a={};for(;o--;)a[c(o)]=l[o]||c(o);return r.replace(/\b\w+\b/g,u=>a[u]||u)}catch(t){return e}}function J(e){return m(this,null,function*(){try{let t=yield d(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!t)return{url:e};let n=yield t.text(),r=n.match(/src\s*:\s*["']([^"']+\.mp4)["']/)||n.match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(r){let s=r[1];return s.startsWith("//")&&(s="https:"+s),{url:s,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(t){}return{url:e}})}function Q(e){return m(this,null,function*(){try{let t=yield d(e,{headers:{Referer:"https://vidmoly.to/"}});if(!t)return{url:e};let n=yield t.text();n.includes("eval(function(p,a,c,k,e,d)")&&(n=M(n));let r=n.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:"https://vidmoly.to/"}}}catch(t){}return{url:e}})}function X(e){return m(this,null,function*(){try{let t=yield d(e,{headers:{Referer:"https://uqload.com/"}});if(!t)return{url:e};let n=yield t.text(),r=n.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||n.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/);if(r)return{url:r[1],headers:{Referer:"https://uqload.com/"}}}catch(t){}return{url:e}})}function Y(e){return m(this,null,function*(){try{let t=yield d(e);if(!t)return{url:e};let n=yield t.text(),r=n.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(r){let o=yield d(r[1]);o&&(n=yield o.text())}let s=n.match(/'hls'\s*:\s*'([^']+)'/)||n.match(/"hls"\s*:\s*"([^"]+)"/)||n.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(s){let o=s[1]||s[0];return o.includes("base64")&&(o=G(o.split(",")[1]||o)),{url:o}}}catch(t){}return{url:e}})}function Z(e){return m(this,null,function*(){try{let t=yield d(e);if(!t)return{url:e};let r=(yield t.text()).match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(r){let s="https:"+r[1],o=r[2].split("+");for(let l of o){let c=l.match(/['"]([^'"]+)['"]/);if(c){let a=c[1],u=l.match(/substring\((\d+)\)/);u&&(a=a.substring(parseInt(u[1]))),s+=a}}return{url:s}}}catch(t){}return{url:e}})}function ee(e){return m(this,null,function*(){var t;try{let n=((t=e.match(/https?:\/\/([^\/]+)/))==null?void 0:t[1])||"dood.to",r=yield d(e);if(!r)return{url:e};let s=yield r.text();s.includes("eval(function(p,a,c,k,e,d)")&&(s=M(s));let o=s.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(o){let l=o[1],c=`https://${n}/pass_md5/${l}`,a=yield fetch(c,{headers:{Referer:e}});if(a.ok){let u=yield a.text(),i=Math.random().toString(36).substring(2,12);return{url:u+i+"?token="+l+"&expiry="+Date.now()}}}}catch(n){}return{url:e}})}function te(e){return m(this,null,function*(){try{let t=yield d(e);if(!t)return{url:e};let r=(yield t.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(r)return{url:r[1]}}catch(t){}return{url:e}})}function U(e){return m(this,null,function*(){let t=e.url,n=t.toLowerCase();if(n.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/))return w(h({},e),{isDirect:!0});try{let r=null;if(n.includes("sibnet.ru"))r=yield J(t);else if(n.includes("vidmoly."))r=yield Q(t);else if(n.includes("uqload.")||n.includes("oneupload."))r=yield X(t);else if(n.includes("voe."))r=yield Y(t);else if(n.includes("streamtape.com")||n.includes("stape"))r=yield Z(t);else if(n.includes("dood")||n.includes("ds2play"))r=yield ee(t);else if(n.includes("moonplayer")||n.includes("moon."))r=yield te(t);else{let s=yield d(t);if(s){let o=yield s.text(),l=o.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||o.match(/https?:\/\/[^"']+\.mp4[^"']*/);l&&(r={url:l[0]})}}if(r&&r.url!==t&&r.url.startsWith("http"))return w(h({},e),{url:r.url,isDirect:!0,headers:h(h({},e.headers),r.headers||{}),originalUrl:t})}catch(r){}return w(h({},e),{isDirect:!1})})}var ne="https://arm.haglund.dev/api/v2";var re="https://v3-cinemeta.strem.io";function R(n){return m(this,arguments,function*(e,t={}){try{let r=new AbortController,s=setTimeout(()=>r.abort(),8e3),o=yield fetch(e,w(h({},t),{signal:r.signal}));return clearTimeout(s),o}catch(r){return console.error(`[ArmSync] Fetch failed: ${e}`,r.message),null}})}function C(e,t){return m(this,null,function*(){if(!e)return null;let n=yield R(`${ne}/themoviedb?id=${e}`);if(n)try{let o=yield n.json(),l=Array.isArray(o)?o[0]:o;if(l&&l.imdb)return l.imdb}catch(o){}let r=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}`,s=yield R(r);if(s){let l=(yield s.text()).match(/imdb\.com\/title\/(tt\d+)/);if(l)return l[1]}return null})}function E(e,t,n){return m(this,null,function*(){var u;if(!e||t===0)return null;let r=yield R(`${re}/meta/series/${e}.json`);if(!r)return null;let s=yield r.json();if(!((u=s==null?void 0:s.meta)!=null&&u.videos))return null;let o=s.meta.videos.filter(i=>i.season>0&&i.episode>0).sort((i,f)=>i.season-f.season||i.episode-f.episode),l=[],c=new Set;for(let i of o){let f=`${i.season}-${i.episode}`;c.has(f)||(c.add(f),l.push(i))}let a=l.findIndex(i=>i.season==t&&i.episode==n);if(a!==-1){let i=a+1;return console.log(`[ArmSync] Resolved: S${t}E${n} -> Absolute ${i}`),i}return null})}var A="https://french-anime.com";function se(e,t){return m(this,null,function*(){try{let n=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}?language=en-US`,r=yield b(n),s=S.default.load(r),o=s('meta[property="og:title"]').attr("content")||s("h1").first().text()||s("h2").first().text();return o&&o.includes(" (")&&(o=o.split(" (")[0]),o&&o.includes(" - ")&&(o=o.split(" - ")[0]),o=o?o.trim():null,console.log(`[French-Anime] TMDB Title found: ${o}`),o}catch(n){return console.error(`[French-Anime] Failed to get title from TMDB: ${n.message}`),null}})}function oe(e){return m(this,null,function*(){try{let t=`do=search&subaction=search&story=${encodeURIComponent(e)}`,n=yield b(`${A}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:A},body:t}),r=S.default.load(n),s=[];r("a.mov-t").each((a,u)=>{let i=r(u).attr("href"),f=r(u).text().trim();i&&i.includes(".html")&&s.push({title:f,url:i})});let o=a=>a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),l=o(e);console.log(`[French-Anime] Search results: ${s.length}`);let c=s.find(a=>o(a.title).includes(l)&&a.url.includes("animes-vostfr"));return c||(c=s.find(a=>o(a.title).includes(l))),c||(c=s[0]),c?(console.log(`[French-Anime] Selected: ${c.title} -> ${c.url}`),c):null}catch(t){return console.error(`[French-Anime] Search error: ${t.message}`),null}})}function ie(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("up4fun")?"Up4Fun":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("myvi")?"MyVi":e.includes("rutube")?"Rutube":e.includes("ok.ru")?"OK.ru":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("mail.ru")?"Mail.ru":"Player"}function ae(e,t){let n=[],r=/(\d+)!((?:https?:\/\/[^,<\s]+)(?:,(?:https?:\/\/[^,<\s]+))*)/g,s;for(;(s=r.exec(e))!==null;)if(parseInt(s[1])===t){let l=s[2].split(",").filter(c=>c.startsWith("http"));for(let c of l){let a=c.trim();a.length>10&&n.push(a)}}return n}function q(e,t,n,r){return m(this,null,function*(){let s=yield se(e,t);if(!s)return[];let o=[r];try{let i=yield C(e,t);if(i){let f=yield E(i,n,r);f&&o.push(f)}}catch(i){console.warn(`[French-Anime] ArmSync failed: ${i.message}`)}let l=yield oe(s);if(!l)return[];let c=[],a=new Set,u=[l.url];try{let i=yield b(`${A}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:A},body:`do=search&subaction=search&story=${encodeURIComponent(s)}`}),f=S.default.load(i),$=p=>p.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),y=$(s);f("a.mov-t").each((p,g)=>{let v=f(g).attr("href"),I=$(f(g).text().trim());v&&v.includes(".html")&&I.includes(y)&&(u.includes(v)||u.push(v))})}catch(i){}for(let i of u)if(!a.has(i)){a.add(i);try{let f=yield b(i),$="VOSTFR";(i.includes("animes-vf/")||i.toLowerCase().includes("french"))&&($="VF");let y=[];for(let p of o){let g=ae(f,p);y.push(...g)}for(let p of y){let g=ie(p),v=yield U({name:`French-Anime (${$})`,title:`${g} Player`,url:p,quality:"HD",headers:{Referer:A}});c.push(v)}y.length>0&&console.log(`[French-Anime] Found ${y.length} players on ${i}`)}catch(f){console.error(`[French-Anime] Failed to fetch ${i}: ${f.message}`)}}return c})}function ce(e,t,n,r){return m(this,null,function*(){console.log(`[French-Anime] Request: ${t} ${e} S${n}E${r}`);try{return yield q(e,t,n,r)}catch(s){return console.error("[French-Anime] Error:",s),[]}})}
