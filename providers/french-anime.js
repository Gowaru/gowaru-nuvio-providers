/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-25T18:32:18.215Z
 */
var I=Object.create;var $=Object.defineProperty,L=Object.defineProperties,P=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertyNames,F=Object.getOwnPropertySymbols,H=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var T=(t,n,e)=>n in t?$(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,m=(t,n)=>{for(var e in n||(n={}))U.call(n,e)&&T(t,e,n[e]);if(F)for(var e of F(n))V.call(n,e)&&T(t,e,n[e]);return t},p=(t,n)=>L(t,_(n));var z=(t,n)=>{for(var e in n)$(t,e,{get:n[e],enumerable:!0})},E=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of j(n))!U.call(t,i)&&i!==e&&$(t,i,{get:()=>n[i],enumerable:!(r=P(n,i))||r.enumerable});return t};var B=(t,n,e)=>(e=t!=null?I(H(t)):{},E(n||!t||!t.__esModule?$(e,"default",{value:t,enumerable:!0}):e,t)),K=t=>E($({},"__esModule",{value:!0}),t);var f=(t,n,e)=>new Promise((r,i)=>{var s=c=>{try{l(e.next(c))}catch(o){i(o)}},u=c=>{try{l(e.throw(c))}catch(o){i(o)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,u);l((e=e.apply(t,n)).next())});var mt={};z(mt,{getStreams:()=>ht});module.exports=K(mt);var O={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function b(e){return f(this,arguments,function*(t,n={}){console.log(`[French-Anime] Fetching: ${t}`);let r=yield fetch(t,m({headers:m(m({},O),n.headers)},n));if(!r.ok)throw new Error(`HTTP error ${r.status} for ${t}`);return yield r.text()})}var k=B(require("cheerio"));var G={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36"},M=t=>{try{return typeof atob=="function"?atob(t):Buffer.from(t,"base64").toString("binary")}catch(n){return t}};function d(e){return f(this,arguments,function*(t,n={}){try{let r=yield fetch(t,p(m({},n),{headers:m(m({},G),n.headers),redirect:"follow"}));if(!r.ok)return null;let i=yield r.text();return{text:()=>Promise.resolve(i),ok:!0,url:r.url,headers:r.headers}}catch(r){return null}})}function A(t){try{if(!t.includes("p,a,c,k,e,d"))return t;let n=t.match(/}\s*\((.*)\)\s*$/);if(!n)return t;let e=n[1].match(/(".+"|\d+)/g);if(e.length<4)return t;let[r,i,s,u]=[e[0].replace(/^"|"$/g,""),parseInt(e[1]),parseInt(e[2]),e[3].replace(/^"|"$/g,"").split("|")],l=o=>(o<i?"":l(parseInt(o/i)))+((o=o%i)>35?String.fromCharCode(o+29):o.toString(36)),c={};for(;s--;)c[l(s)]=u[s]||l(s);return r.replace(/\b\w+\b/g,o=>c[o]||o)}catch(n){return t}}function J(t){return f(this,null,function*(){try{let n=yield d(t,{headers:{Referer:"https://video.sibnet.ru/"}});if(!n)return{url:t};let e=yield n.text(),r=e.match(/src\s*:\s*["']([^"']+\.mp4)["']/)||e.match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(r){let i=r[1];return i.startsWith("//")&&(i="https:"+i),{url:i,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(n){}return{url:t}})}function Q(t){return f(this,null,function*(){try{let n=yield d(t,{headers:{Referer:"https://vidmoly.to/"}});if(!n)return{url:t};let e=yield n.text();e.includes("eval(function(p,a,c,k,e,d)")&&(e=A(e));let r=e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(r)return{url:r[1],headers:{Referer:"https://vidmoly.to/"}}}catch(n){}return{url:t}})}function X(t){return f(this,null,function*(){try{let n=yield d(t,{headers:{Referer:"https://uqload.com/"}});if(!n)return{url:t};let e=yield n.text(),r=e.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/);if(r)return{url:r[1],headers:{Referer:"https://uqload.com/"}}}catch(n){}return{url:t}})}function Y(t){return f(this,null,function*(){try{let n=yield d(t);if(!n)return{url:t};let e=yield n.text(),r=e.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(r){let s=yield d(r[1]);s&&(e=yield s.text())}let i=e.match(/'hls'\s*:\s*'([^']+)'/)||e.match(/"hls"\s*:\s*"([^"]+)"/)||e.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(i){let s=i[1]||i[0];return s.includes("base64")&&(s=M(s.split(",")[1]||s)),{url:s}}}catch(n){}return{url:t}})}function Z(t){return f(this,null,function*(){try{let n=yield d(t);if(!n)return{url:t};let e=yield n.text();e.includes("p,a,c,k,e,d")&&(e=A(e));let r=e.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(r){let i="https:"+r[1],s=r[2].split("+");for(let u of s){let l=u.match(/['"]([^'"]+)['"]/);if(l){let c=l[1],o=u.match(/substring\((\d+)\)/);o&&(c=c.substring(parseInt(o[1]))),i+=c}}return{url:i,headers:{Referer:"https://streamtape.com/"}}}}catch(n){}return{url:t}})}function tt(t){return f(this,null,function*(){try{let n=yield d(t);if(!n)return{url:t};let e=yield n.text(),r=e.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["']/)||e.match(/source\s+src=["']([^"']+\.mp4[^"']*)["']/);if(r)return{url:r[1]}}catch(n){}return{url:t}})}function et(t){return f(this,null,function*(){try{let n=yield d(t);if(!n)return{url:t};let e=yield n.text();e.includes("p,a,c,k,e,d")&&(e=A(e));let r=e.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(r){let i=r[1];return i.includes("base64")&&(i=M(i.split(",")[1]||i)),{url:i}}}catch(n){}return{url:t}})}function nt(t){return f(this,null,function*(){try{let n=yield d(t);if(!n)return{url:t};let r=(yield n.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(r)return{url:r[1]}}catch(n){}return{url:t}})}function rt(t){return f(this,null,function*(){var n;try{let e=((n=t.match(/https?:\/\/([^\/]+)/))==null?void 0:n[1])||"dood.to",r=yield d(t);if(!r)return{url:t};let i=yield r.text();i.includes("eval(function(p,a,c,k,e,d)")&&(i=A(i));let s=i.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(s){let u=s[1],l=`https://${e}/pass_md5/${u}`,c=yield fetch(l,{headers:{Referer:t}});if(c.ok){let o=yield c.text(),a=Math.random().toString(36).substring(2,12);return{url:o+a+"?token="+u+"&expiry="+Date.now()}}}}catch(e){}return{url:t}})}function st(t){return f(this,null,function*(){try{let n=yield d(t);if(!n)return{url:t};let r=(yield n.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(r)return{url:r[1]}}catch(n){}return{url:t}})}function R(t,n=0){return f(this,null,function*(){var i;if(n>3)return p(m({},t),{isDirect:!1});let e=t.url,r=e.toLowerCase();if(!e||e.includes("google-analytics")||e.includes("doubleclick"))return null;if(r.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!r.includes("html"))return p(m({},t),{isDirect:!0});try{let s=null;if(r.includes("sibnet.ru")?s=yield J(e):r.includes("vidmoly.")?s=yield Q(e):r.includes("uqload.")||r.includes("oneupload.")?s=yield X(e):r.includes("voe.")?s=yield Y(e):r.includes("streamtape.com")||r.includes("stape")?s=yield Z(e):r.includes("dood")||r.includes("ds2play")?s=yield rt(e):r.includes("moonplayer")||r.includes("moon.")?s=yield st(e):r.includes("sendvid.")?s=yield tt(e):r.includes("luluvid.")||r.includes("lulu.")?s=yield et(e):(r.includes("hgcloud.")||r.includes("savefiles."))&&(s=yield nt(e)),!s||s.url===e){let u=yield d(e,{headers:t.headers});if(u){let l=yield u.text();l.includes("p,a,c,k,e,d")&&(l=A(l));let c=l.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||l.match(/https?:\/\/[^"']+\.mp4[^"']*/)||l.match(/file\s*:\s*["']([^"']+)["']/);if(c){let o=c[1]||c[0];o.startsWith("//")&&(o="https:"+o),o.startsWith("http")&&!o.includes(it)&&(s={url:o})}if(!s){let o=l.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(o){let a=o[1];if(a.startsWith("//")&&(a="https:"+a),a.startsWith("/")){let h=(i=e.match(/^https?:\/\/[^\/]+/))==null?void 0:i[0];h&&(a=h+a)}if(a.startsWith("http")&&a!==e)return console.log(`[Resolver] Peeling: Found nested iframe -> ${a}`),yield R(p(m({},t),{url:a}),n+1)}}}}if(s&&s.url!==e&&s.url.startsWith("http")){let u=yield R(p(m({},t),{url:s.url,headers:m(m({},t.headers),s.headers||{})}),n+1);return p(m({},u),{isDirect:!0,originalUrl:e})}}catch(s){}return p(m({},t),{isDirect:!1})})}var it="googletagmanager";var at="https://arm.haglund.dev/api/v2";var ot="https://v3-cinemeta.strem.io";function D(e){return f(this,arguments,function*(t,n={}){try{let r=new AbortController,i=setTimeout(()=>r.abort(),8e3),s=yield fetch(t,p(m({},n),{signal:r.signal}));return clearTimeout(i),s}catch(r){return console.error(`[ArmSync] Fetch failed: ${t}`,r.message),null}})}function C(t,n){return f(this,null,function*(){if(!t)return null;let e=yield D(`${at}/themoviedb?id=${t}`);if(e)try{let s=yield e.json(),u=Array.isArray(s)?s[0]:s;if(u&&u.imdb)return u.imdb}catch(s){}let r=`https://www.themoviedb.org/${n==="movie"?"movie":"tv"}/${t}`,i=yield D(r);if(i){let u=(yield i.text()).match(/imdb\.com\/title\/(tt\d+)/);if(u)return u[1]}return null})}function q(t,n,e){return f(this,null,function*(){var o;if(!t||n===0)return null;let r=yield D(`${ot}/meta/series/${t}.json`);if(!r)return null;let i=yield r.json();if(!((o=i==null?void 0:i.meta)!=null&&o.videos))return null;let s=i.meta.videos.filter(a=>a.season>0&&a.episode>0).sort((a,h)=>a.season-h.season||a.episode-h.episode),u=[],l=new Set;for(let a of s){let h=`${a.season}-${a.episode}`;l.has(h)||(l.add(h),u.push(a))}let c=u.findIndex(a=>a.season==n&&a.episode==e);if(c!==-1){let a=c+1;return console.log(`[ArmSync] Resolved: S${n}E${e} -> Absolute ${a}`),a}return null})}var S="https://french-anime.com";function ct(t,n){return f(this,null,function*(){try{let e=`https://www.themoviedb.org/${n==="movie"?"movie":"tv"}/${t}?language=en-US`,r=yield b(e),i=k.default.load(r),s=i('meta[property="og:title"]').attr("content")||i("h1").first().text()||i("h2").first().text();return s&&s.includes(" (")&&(s=s.split(" (")[0]),s&&s.includes(" - ")&&(s=s.split(" - ")[0]),s=s?s.trim():null,console.log(`[French-Anime] TMDB Title found: ${s}`),s}catch(e){return console.error(`[French-Anime] Failed to get title from TMDB: ${e.message}`),null}})}function lt(t){return f(this,null,function*(){try{let n=`do=search&subaction=search&story=${encodeURIComponent(t)}`,e=yield b(`${S}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:S},body:n}),r=k.default.load(e),i=[];r("a.mov-t").each((c,o)=>{let a=r(o).attr("href"),h=r(o).text().trim();a&&a.includes(".html")&&i.push({title:h,url:a})});let s=c=>c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),u=s(t);console.log(`[French-Anime] Search results: ${i.length}`);let l=i.filter(c=>s(c.title).includes(u));return l.length>0&&console.log(`[French-Anime] Found ${l.length} matches for ${t}`),l}catch(n){return console.error(`[French-Anime] Search error: ${n.message}`),[]}})}function ut(t){return t.includes("sibnet")?"Sibnet":t.includes("vidmoly")?"Vidmoly":t.includes("christopheruntilpoint")||t.includes("voe")?"Voe":t.includes("luluvid")?"Luluvid":t.includes("savefiles")?"Savefiles":t.includes("up4fun")?"Up4Fun":t.includes("uqload")?"Uqload":t.includes("hgcloud")?"HGCloud":t.includes("myvi")?"MyVi":t.includes("rutube")?"Rutube":t.includes("ok.ru")?"OK.ru":t.includes("doodstream")||t.includes("vvide0")?"Doodstream":t.includes("mail.ru")?"Mail.ru":"Player"}function ft(t,n){let e=[],r=/(\d+)!((?:https?:\/\/[^,<\s]+)(?:,(?:https?:\/\/[^,<\s]+))*)/g,i;for(;(i=r.exec(t))!==null;)if(parseInt(i[1])===n){let u=i[2].split(",").filter(l=>l.startsWith("http"));for(let l of u){let c=l.trim();c.length>10&&e.push(c)}}return e}function N(t,n,e,r){return f(this,null,function*(){let i=yield ct(t,n);if(!i)return[];let s=[r];try{let a=yield C(t,n);if(a){let h=yield q(a,e,r);h&&s.push(h)}}catch(a){console.warn(`[French-Anime] ArmSync failed: ${a.message}`)}let u=yield lt(i);if(!u)return[];let l=[],c=new Set,o=[u.url];try{let a=yield b(`${S}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:S},body:`do=search&subaction=search&story=${encodeURIComponent(i)}`}),h=k.default.load(a),x=w=>w.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),g=x(i);h("a.mov-t").each((w,y)=>{let v=h(y).attr("href"),W=x(h(y).text().trim());v&&v.includes(".html")&&W.includes(g)&&(o.includes(v)||o.push(v))})}catch(a){}for(let a of o)if(!c.has(a)){c.add(a);try{let h=yield b(a),x="VOSTFR";(a.includes("animes-vf/")||a.toLowerCase().includes("french"))&&(x="VF");let g=[];for(let w of s){let y=ft(h,w);g.push(...y)}for(let w of g){let y=ut(w),v=yield R({name:`French-Anime (${x})`,title:`${y} Player`,url:w,quality:"HD",headers:{Referer:S}});l.push(v)}g.length>0&&console.log(`[French-Anime] Found ${g.length} players on ${a}`)}catch(h){console.error(`[French-Anime] Failed to fetch ${a}: ${h.message}`)}}return l})}function ht(t,n,e,r){return f(this,null,function*(){console.log(`[French-Anime] Request: ${n} ${t} S${e}E${r}`);try{return yield N(t,n,e,r)}catch(i){return console.error("[French-Anime] Error:",i),[]}})}
