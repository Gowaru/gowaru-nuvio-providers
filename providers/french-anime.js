/**
 * french-anime - Built from src/french-anime/
 * Generated: 2026-02-24T23:41:23.017Z
 */
var R=Object.create;var p=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var A=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))S.call(t,n)&&A(e,n,t[n]);if(v)for(var n of v(t))N.call(t,n)&&A(e,n,t[n]);return e};var k=(e,t)=>{for(var n in t)p(e,n,{get:t[n],enumerable:!0})},T=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of q(t))!S.call(e,r)&&r!==n&&p(e,r,{get:()=>t[r],enumerable:!(s=U(t,r))||s.enumerable});return e};var E=(e,t,n)=>(n=e!=null?R(D(e)):{},T(t||!e||!e.__esModule?p(n,"default",{value:e,enumerable:!0}):n,e)),L=e=>T(p({},"__esModule",{value:!0}),e);var h=(e,t,n)=>new Promise((s,r)=>{var o=i=>{try{c(n.next(i))}catch(a){r(a)}},u=i=>{try{c(n.throw(i))}catch(a){r(a)}},c=i=>i.done?s(i.value):Promise.resolve(i.value).then(o,u);c((n=n.apply(e,t)).next())});var W={};k(W,{getStreams:()=>O});module.exports=L(W);var M={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function g(n){return h(this,arguments,function*(e,t={}){console.log(`[French-Anime] Fetching: ${e}`);let s=yield fetch(e,x({headers:x(x({},M),t.headers)},t));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${e}`);return yield s.text()})}var F=E(require("cheerio-without-node-native"));var $="https://french-anime.com";function H(e,t){return h(this,null,function*(){try{let n=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}?language=en-US`,s=yield g(n),r=F.default.load(s),o=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return o&&o.includes(" (")&&(o=o.split(" (")[0]),o&&o.includes(" - ")&&(o=o.split(" - ")[0]),o=o?o.trim():null,console.log(`[French-Anime] TMDB Title found: ${o}`),o}catch(n){return console.error(`[French-Anime] Failed to get title from TMDB: ${n.message}`),null}})}function P(e){return h(this,null,function*(){try{let t=`do=search&subaction=search&story=${encodeURIComponent(e)}`,n=yield g(`${$}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:$},body:t}),s=F.default.load(n),r=[];s("a.mov-t").each((i,a)=>{let l=s(a).attr("href"),m=s(a).text().trim();l&&l.includes(".html")&&r.push({title:m,url:l})});let o=i=>i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),u=o(e);console.log(`[French-Anime] Search results: ${r.length}`);let c=r.find(i=>o(i.title).includes(u)&&i.url.includes("animes-vostfr"));return c||(c=r.find(i=>o(i.title).includes(u))),c||(c=r[0]),c?(console.log(`[French-Anime] Selected: ${c.title} -> ${c.url}`),c):null}catch(t){return console.error(`[French-Anime] Search error: ${t.message}`),null}})}function z(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("up4fun")?"Up4Fun":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("myvi")?"MyVi":e.includes("rutube")?"Rutube":e.includes("ok.ru")?"OK.ru":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("mail.ru")?"Mail.ru":"Player"}function V(e,t){let n=[],s=/(\d+)!((?:https?:\/\/[^,<\s]+)(?:,(?:https?:\/\/[^,<\s]+))*)/g,r;for(;(r=s.exec(e))!==null;)if(parseInt(r[1])===t){let u=r[2].split(",").filter(c=>c.startsWith("http"));for(let c of u){let i=c.trim();i.length>10&&n.push(i)}}return n}function b(e,t,n,s){return h(this,null,function*(){let r=yield H(e,t);if(!r)return[];let o=yield P(r);if(!o)return[];let u=[],c=new Set,i=[o.url];try{let a=yield g(`${$}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:$},body:`do=search&subaction=search&story=${encodeURIComponent(r)}`}),l=F.default.load(a),m=d=>d.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),f=m(r);l("a.mov-t").each((d,w)=>{let y=l(w).attr("href"),C=m(l(w).text().trim());y&&y.includes(".html")&&C.includes(f)&&(i.includes(y)||i.push(y))})}catch(a){}for(let a of i)if(!c.has(a)){c.add(a);try{let l=yield g(a),m="VOSTFR";(a.includes("animes-vf/")||a.toLowerCase().includes("french"))&&(m="VF");let f=V(l,s);for(let d of f){let w=z(d);u.push({name:`French-Anime (${m})`,title:`${w} Player`,url:d,quality:"HD",headers:{Referer:$}})}f.length>0&&console.log(`[French-Anime] Found ${f.length} players on ${a}`)}catch(l){console.error(`[French-Anime] Failed to fetch ${a}: ${l.message}`)}}return u})}function O(e,t,n,s){return h(this,null,function*(){console.log(`[French-Anime] Request: ${t} ${e} S${n}E${s}`);try{return yield b(e,t,n,s)}catch(r){return console.error("[French-Anime] Error:",r),[]}})}
