/**
 * vostfree - Built from src/vostfree/
 * Generated: 2026-02-25T10:36:17.679Z
 */
var W=Object.create;var v=Object.defineProperty,k=Object.defineProperties,F=Object.getOwnPropertyDescriptor,M=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,H=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var T=(t,e,s)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,l=(t,e)=>{for(var s in e||(e={}))V.call(e,s)&&T(t,s,e[s]);if(R)for(var s of R(e))N.call(e,s)&&T(t,s,e[s]);return t},y=(t,e)=>k(t,M(e));var P=(t,e)=>{for(var s in e)v(t,s,{get:e[s],enumerable:!0})},U=(t,e,s,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of _(e))!V.call(t,r)&&r!==s&&v(t,r,{get:()=>e[r],enumerable:!(o=F(e,r))||o.enumerable});return t};var B=(t,e,s)=>(s=t!=null?W(H(t)):{},U(e||!t||!t.__esModule?v(s,"default",{value:t,enumerable:!0}):s,t)),I=t=>U(v({},"__esModule",{value:!0}),t);var a=(t,e,s)=>new Promise((o,r)=>{var n=c=>{try{i(s.next(c))}catch(h){r(h)}},u=c=>{try{i(s.throw(c))}catch(h){r(h)}},i=c=>c.done?o(c.value):Promise.resolve(c.value).then(n,u);i((s=s.apply(t,e)).next())});var at={};P(at,{getStreams:()=>it});module.exports=I(at);var K={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function $(s){return a(this,arguments,function*(t,e={}){console.log(`[Vostfree] Fetching: ${t}`);let o=yield fetch(t,l({headers:l(l({},K),e.headers)},e));if(!o.ok)throw new Error(`HTTP error ${o.status} for ${t}`);return yield o.text()})}var b=B(require("cheerio"));var O={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7"};function f(s){return a(this,arguments,function*(t,e={}){try{let o=new AbortController,r=setTimeout(()=>o.abort(),1e4),n=yield fetch(t,y(l({},e),{headers:l(l({},O),e.headers),signal:o.signal}));return clearTimeout(r),n}catch(o){return console.error(`[Resolver] Fetch failed for ${t}: ${o.message}`),null}})}function z(t){return a(this,null,function*(){let e=yield f(t,{headers:{Referer:"https://video.sibnet.ru/"}});if(!e)return t;let s=yield e.text(),o=s.match(/"url"\s*:\s*"([^"]+\.mp4)"/)||s.match(/src\s*:\s*"([^"]+\.mp4)"/)||s.match(/player\.setVideo\(\s*\{\s*"url"\s*:\s*"([^"]+)"/);if(o){let r=o[1];return r.startsWith("//")?r=`https:${r}`:r.startsWith("/")&&(r=`https://video.sibnet.ru${r}`),r}return t})}function J(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let o=(yield e.text()).match(/file\s*:\s*"([^"]+)"/);return o?o[1]:t})}function G(t){return a(this,null,function*(){let e=yield f(t,{headers:{Referer:"https://uqload.com/"}});if(!e)return t;let s=yield e.text(),o=s.match(/sources\s*:\s*\["([^"]+)"\]/)||s.match(/src\s*:\s*"([^"]+\.(?:mp4|m3u8))"/);return o?o[1]:t})}function j(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let s=yield e.text(),o=s.match(/'hls'\s*:\s*'([^']+)'/)||s.match(/"hls"\s*:\s*"([^"]+)"/)||s.match(/window\.location\.href\s*=\s*'([^']+)'/);if(o){let r=o[1];if(r.includes("base64"))try{let n=r.split(",")[1]||r;typeof atob!="undefined"&&(r=atob(n))}catch(n){}return r}return t})}function Q(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let s=yield e.text(),o=s.match(/sources\s*:\s*\[\s*\{\s*"file"\s*:\s*"([^"]+)"/i)||s.match(/file\s*:\s*"([^"]+)"/i);return o?o[1]:t})}function X(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let s=yield e.text(),o=s.match(/file\s*:\s*"([^"]+)"/i)||s.match(/source\s*:\s*"([^"]+)"/i);return o?o[1]:t})}function Y(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let s=yield e.text(),o=s.match(/file\s*:\s*"([^"]+)"/i)||s.match(/src\s*:\s*"([^"]+\.(?:mp4|m3u8))"/i);return o?o[1]:t})}function Z(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let o=(yield e.text()).match(/file\s*:\s*"([^"]+)"/);return o?o[1]:t})}function tt(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let o=(yield e.text()).match(/file\s*:\s*"([^"]+)"/);return o?o[1]:t})}function et(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let s=yield e.text(),o=s.match(/robotlink\.innerHTML\s*=\s*'([^']+)'/);if(o){let n=o[1];return n.startsWith("//")&&(n=`https:${n}`),n}return s.match(/video_link\s*:\s*"([^"]+)"/)?o[2]:t})}function st(t){return a(this,null,function*(){let e=yield f(t);if(!e)return t;let s=yield e.text(),o=s.match(/source\s+src="([^"]+\.mp4)"/i)||s.match(/video_source\s*:\s*"([^"]+)"/);return o?o[1]:t})}function ot(t){return a(this,null,function*(){let e=t.replace("/e/","/d/"),s=yield f(e);if(!s)return t;let r=(yield s.text()).match(/window\.open\('([^']+)'\)/);return r?r[1]:t})}function A(t){return a(this,null,function*(){let e=t.url,s=e.toLowerCase();if(s.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/))return y(l({},t),{isDirect:!0});try{let o=e,r=l({},t.headers);if(s.includes("sibnet.ru")?(o=yield z(e),r.Referer="https://video.sibnet.ru/"):s.includes("vidmoly.")?(o=yield J(e),r.Referer="https://vidmoly.to/"):s.includes("uqload.")?(o=yield G(e),r.Referer="https://uqload.com/"):s.includes("voe.sx")||s.includes("christopheruntilpoint")?o=yield j(e):s.includes("moonplayer")||s.includes("moonembed")?o=yield Q(e):s.includes("mytv")||s.includes("mycloud")||s.includes("mclls.net")?o=yield X(e):s.includes("fhd")||s.includes("fhd1")?o=yield Y(e):s.includes("upstream.")?o=yield Z(e):s.includes("vido.")||s.includes("vidlo.")?o=yield tt(e):s.includes("streamtape.com")?o=yield et(e):s.includes("sendvid.com")?o=yield st(e):(s.includes("dood")||s.includes("ds2play")||s.includes("viddood"))&&(o=yield ot(e)),o!==e&&o.startsWith("http"))return console.log(`[Resolver] Success: ${e.substring(0,30)}... -> ${o.substring(0,30)}...`),y(l({},t),{url:o,isDirect:!0,headers:r,originalUrl:e})}catch(o){console.error(`[Resolver] Failed for ${e}:`,o)}return y(l({},t),{isDirect:!1})})}var S="https://vostfree.ws";function rt(t,e){return a(this,null,function*(){try{let s=`https://www.themoviedb.org/${e==="movie"?"movie":"tv"}/${t}?language=en-US`,o=yield $(s),r=b.default.load(o),n=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return n&&n.includes(" (")&&(n=n.split(" (")[0]),n&&n.includes(" - ")&&(n=n.split(" - ")[0]),n=n?n.trim():null,console.log(`[Vostfree] TMDB Title found: ${n}`),n}catch(s){return console.error(`[Vostfree] Failed to get title from TMDB: ${s.message}`),null}})}function nt(t){return a(this,null,function*(){try{let e=`do=search&subaction=search&story=${encodeURIComponent(t)}`,s=yield $(`${S}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:S},body:e}),o=b.default.load(s),r=[];o(".title a, .search-result-item a, .movie-title a").each((c,h)=>{let m=o(h).attr("href");m&&(m.includes(".html")||m.includes("/anime/"))&&r.push({title:o(h).text().trim()||o(h).attr("title"),url:m})});let n=c=>c.toLowerCase().replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),u=n(t);console.log(`[Vostfree] Results found: ${r.length}`);let i=r.find(c=>n(c.title)===u);return i||(i=r.find(c=>n(c.title).includes(u)&&c.title.includes("VOSTFR"))),i||(i=r.find(c=>n(c.title).includes(u))),i||(i=r[0]),i?(console.log(`[Vostfree] Selected: ${i.title} -> ${i.url}`),i.url):null}catch(e){return console.error(`[Vostfree] Search error: ${e.message}`),null}})}function C(t,e,s,o){return a(this,null,function*(){let r=yield rt(t,e);if(!r)return[];let n=yield nt(r);if(!n)return[];try{let u=yield $(n),i=b.default.load(u),c=o.toString(),h=c.padStart(2,"0"),m=null;if(i("select.new_player_selector option").each((p,g)=>{let d=i(g).text();if(d.includes(`Episode ${c}`)||d.includes(`Episode ${h}`))return m=i(g).val(),!1}),!m){console.warn(`[Vostfree] Episode ${o} not found in selector on ${n}`);let p=i('div[id^="buttons_"]').first().attr("id");if(p)console.log(`[Vostfree] Falling back to first available buttons: ${p}`),m=p;else return[]}console.log(`[Vostfree] Using buttons ID: ${m}`);let q=[],E=i(`#${m} div[id^="player_"]`).toArray();for(let p of E){let g=i(p).attr("id").replace("player_",""),d=i(p).text().trim()||"Player",D=`content_player_${g}`,x=i(`#${D}`).text().trim();if(x){let w=x;if(w.startsWith("http")||(d.toLowerCase().includes("sibnet")?w=`https://video.sibnet.ru/shell.php?videoid=${x}`:d.toLowerCase().includes("vidmoly")?w=`https://vidmoly.to/embed-${x}.html`:d.toLowerCase().includes("uqload")&&(w=`https://uqload.com/embed-${x}.html`)),w.startsWith("http")){let L=yield A({name:`Vostfree (${d})`,title:`${d} Player`,url:w,quality:"HD",headers:{Referer:S}});q.push(L)}}}return q}catch(u){return console.error(`[Vostfree] Extraction error: ${u.message}`),[]}})}function it(t,e,s,o){return a(this,null,function*(){console.log(`[Vostfree] Request: ${e} ${t} S${s}E${o}`);try{return yield C(t,e,s,o)}catch(r){return console.error("[Vostfree] Error:",r),[]}})}
