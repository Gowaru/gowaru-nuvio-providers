/**
 * vostfree - Built from src/vostfree/
 * Generated: 2026-02-26T16:00:43.552Z
 */
var Y=Object.create;var D=Object.defineProperty,Z=Object.defineProperties,Q=Object.getOwnPropertyDescriptor,X=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertyNames,q=Object.getOwnPropertySymbols,et=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var V=(t,r,e)=>r in t?D(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,p=(t,r)=>{for(var e in r||(r={}))W.call(r,e)&&V(t,e,r[e]);if(q)for(var e of q(r))st.call(r,e)&&V(t,e,r[e]);return t},A=(t,r)=>Z(t,X(r));var rt=(t,r)=>{for(var e in r)D(t,e,{get:r[e],enumerable:!0})},j=(t,r,e,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of tt(r))!W.call(t,n)&&n!==e&&D(t,n,{get:()=>r[n],enumerable:!(s=Q(r,n))||s.enumerable});return t};var nt=(t,r,e)=>(e=t!=null?Y(et(t)):{},j(r||!t||!t.__esModule?D(e,"default",{value:t,enumerable:!0}):e,t)),ot=t=>j(D({},"__esModule",{value:!0}),t);var f=(t,r,e)=>new Promise((s,n)=>{var o=i=>{try{a(e.next(i))}catch(h){n(h)}},u=i=>{try{a(e.throw(i))}catch(h){n(h)}},a=i=>i.done?s(i.value):Promise.resolve(i.value).then(o,u);a((e=e.apply(t,r)).next())});var At={};rt(At,{getStreams:()=>Rt});module.exports=ot(At);var at={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function C(e){return f(this,arguments,function*(t,r={}){console.log(`[Vostfree] Fetching: ${t}`);let s=yield fetch(t,p({headers:p(p({},at),r.headers)},r));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${t}`);return yield s.text()})}var E=nt(require("cheerio-without-node-native"));var it={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36"},P=t=>{try{return typeof atob=="function"?atob(t):Buffer.from(t,"base64").toString("binary")}catch(r){return t}};function v(e){return f(this,arguments,function*(t,r={}){let s,n;try{s=new AbortController,n=setTimeout(()=>s.abort(),1e4);let o=yield fetch(t,A(p({},r),{headers:p(p({},it),r.headers),redirect:"follow",signal:s.signal}));if(clearTimeout(n),!o.ok)return null;let u=yield o.text();return{text:()=>Promise.resolve(u),ok:!0,url:o.url,headers:o.headers}}catch(o){return n&&clearTimeout(n),null}})}function k(t){try{if(!t.includes("p,a,c,k,e,d"))return t;let r=new RegExp("eval\\s*\\(\\s*function\\s*\\(\\s*p\\s*,\\s*a\\s*,\\s*c\\s*,\\s*k\\s*,\\s*e\\s*,\\s*d\\s*\\).*?\\}\\s*\\((.*?)\\)\\s*\\)","gs"),e=t,s;for(;(s=r.exec(t))!==null;)try{let o=s[1].match(new RegExp("^'(.*?)',\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*'(.*?)'\\.split\\('\\|'\\)","s"));if(!o)continue;let u=o[1].replace(/\\'/g,"'"),a=parseInt(o[2]),i=parseInt(o[3]),h=o[4].split("|"),l=d=>(d<a?"":l(parseInt(d/a)))+((d=d%a)>35?String.fromCharCode(d+29):d.toString(36)),c={};for(;i--;)c[l(i)]=h[i]||l(i);let m=u.replace(/\b\w+\b/g,d=>c[d]||d);e=e.replace(s[0],m)}catch(n){}return e}catch(r){return t}}function ct(t){return f(this,null,function*(){try{let r=yield v(t,{headers:{Referer:"https://video.sibnet.ru/"}});if(!r)return{url:t};let e=yield r.text(),s=e.match(/file\s*:\s*["']([^"']*\.mp4[^"']*)['"]/i)||e.match(/src\s*:\s*["']([^"']*\.mp4[^"']*)['"]/i)||e.match(/["']((?:https?:)?\/\/[^"'\s]+\.mp4[^"'\s]*)["']/i);if(s){let n=s[1];return n.startsWith("//")?n="https:"+n:n.startsWith("/")&&(n="https://video.sibnet.ru"+n),{url:n,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(r){}return{url:t}})}function lt(t){return f(this,null,function*(){try{let r={Referer:"https://vidmoly.to/",Origin:"https://vidmoly.to"},e=yield v(t,{headers:r});if(!e)return{url:t};let s=yield e.text(),n=s.match(/window\.location\.replace\(['"]([^'"]+)['"]\)/)||s.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);n&&n[1]!==t&&(e=yield v(n[1],{headers:r}),e&&(s=yield e.text())),s.includes("eval(function(p,a,c,k,e,d)")&&(s=k(s));let o=s.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/i)||s.match(/["'](https?:\/\/[^"']+\.(?:m3u8|mp4)[^"']*)["']/i);if(o)return{url:o[1],headers:{Referer:"https://vidmoly.to/"}}}catch(r){}return{url:t}})}function ut(t){return f(this,null,function*(){let r=t.replace(/^https?:\/\/[^/]+/,""),e=["uqload.co","uqload.com","uqload.io","uqloads.xyz","uqload.to"],s="https://uqload.co/";for(let n of e)try{let o=`https://${n}${r}`,u=yield v(o,{headers:{Referer:s}});if(!u)continue;let a=yield u.text(),i=a.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||a.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/)||a.match(/["'](https?:\/\/[^"']+\.(?:mp4|m3u8)[^"']*)["']/i);if(i)return{url:i[1],headers:{Referer:s}}}catch(o){}return{url:t}})}function ht(t){return f(this,null,function*(){try{let r=yield v(t);if(!r)return{url:t};let e=yield r.text(),s=e.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(s){let o=yield v(s[1]);o&&(e=yield o.text())}let n=e.match(/'hls'\s*:\s*'([^']+)'/)||e.match(/"hls"\s*:\s*"([^"]+)"/)||e.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(n){let o=n[1]||n[0];return o.includes("base64")&&(o=P(o.split(",")[1]||o)),{url:o,headers:{Referer:t}}}}catch(r){}return{url:t}})}function ft(t){return f(this,null,function*(){try{let r=yield v(t);if(!r)return{url:t};let e=yield r.text();e.includes("p,a,c,k,e,d")&&(e=k(e));let s=e.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(s){let n="https:"+s[1],o=s[2].split("+");for(let u of o){let a=u.match(/['"]([^'"]+)['"]/);if(a){let i=a[1],h=u.match(/substring\((\d+)\)/);h&&(i=i.substring(parseInt(h[1]))),n+=i}}return{url:n,headers:{Referer:"https://streamtape.com/"}}}}catch(r){}return{url:t}})}function dt(t){return f(this,null,function*(){try{let r=t.includes("/embed/")?t:t.replace(/sendvid\.com\/([a-z0-9]+)/i,"sendvid.com/embed/$1"),e=yield v(r,{headers:{Referer:"https://sendvid.com/"}});if(!e)return{url:t};let s=yield e.text(),n=s.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["|']/)||s.match(/source\s+src=["']([^"']+\.mp4[^"']*)["|']/)||s.match(/<source[^>]+src=["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/)||s.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["|']/)||s.match(/["'](https?:\/\/[^"']+\.mp4[^"']*)["']/);if(n)return{url:n[1],headers:{Referer:"https://sendvid.com/"}}}catch(r){}return{url:t}})}function mt(t){return f(this,null,function*(){try{let r=yield v(t);if(!r)return{url:t};let e=yield r.text();e.includes("p,a,c,k,e,d")&&(e=k(e));let s=e.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(s){let n=s[1];return n.includes("base64")&&(n=P(n.split(",")[1]||n)),{url:n,headers:{Referer:t}}}}catch(r){}return{url:t}})}function pt(t){return f(this,null,function*(){try{let r=yield v(t);if(!r)return{url:t};let s=(yield r.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(s)return{url:s[1],headers:{Referer:t}}}catch(r){}return{url:t}})}function wt(t){return f(this,null,function*(){var r;try{let e=((r=t.match(/https?:\/\/([^\/]+)/))==null?void 0:r[1])||"dood.to",s=yield v(t);if(!s)return{url:t};let n=yield s.text();n.includes("eval(function(p,a,c,k,e,d)")&&(n=k(n));let o=n.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(o){let u=o[1],a=`https://${e}/pass_md5/${u}`,i=yield fetch(a,{headers:{Referer:t}});if(i.ok){let h=yield i.text(),l=Math.random().toString(36).substring(2,12);return{url:h+l+"?token="+u+"&expiry="+Date.now(),headers:{Referer:`https://${e}/`}}}}}catch(e){}return{url:t}})}function yt(t){return f(this,null,function*(){try{let r=yield v(t,{headers:{Referer:"https://www.myvi.ru/"}});if(!r)return{url:t};let e=yield r.text();e.includes("eval(function(p,a,c,k,e,d)")&&(e=k(e));let s=e.match(/["'](?:file|src|url|stream_url)["']\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/)||e.match(/["'](https?:\/\/[^"']+\.(?:mp4|m3u8)[^"']*)["']/)||e.match(/source\s+src=["']([^"']+\.(?:mp4|m3u8)[^"']*)/);if(s)return{url:s[1],headers:{Referer:"https://www.myvi.ru/"}};let n=t.match(/\/(?:embed\/|watch\/|video\/)([a-zA-Z0-9_-]+)/);if(n){let o=`https://www.myvi.ru/api/video/${n[1]}`,u=yield v(o,{headers:{Referer:t}});if(u){let i=(yield u.text()).match(/["'](?:url|src|file)["']\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(i)return{url:i[1],headers:{Referer:"https://www.myvi.ru/"}}}}}catch(r){}return{url:t}})}function gt(t){return f(this,null,function*(){try{let r=yield v(t);if(!r)return{url:t};let s=(yield r.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(s)return{url:s[1],headers:{Referer:t}}}catch(r){}return{url:t}})}function F(t,r=0){return f(this,null,function*(){var n;if(r>3)return A(p({},t),{isDirect:!1});let e=t.url,s=e.toLowerCase();if(!e||e.includes("google-analytics")||e.includes("doubleclick"))return null;if(s.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!s.includes("html"))return A(p({},t),{isDirect:!0});try{let o=null;if(s.includes("sibnet.ru")?o=yield ct(e):s.includes("vidmoly.")?o=yield lt(e):s.includes("uqload.")||s.includes("oneupload.")?o=yield ut(e):s.includes("voe.")?o=yield ht(e):s.includes("streamtape.com")||s.includes("stape")?o=yield ft(e):s.includes("dood")||s.includes("ds2play")?o=yield wt(e):s.includes("moonplayer")||s.includes("moon.")?o=yield gt(e):s.includes("sendvid.")?o=yield dt(e):s.includes("myvi.")||s.includes("mytv.")?o=yield yt(e):s.includes("luluvid.")||s.includes("lulu.")?o=yield mt(e):(s.includes("hgcloud.")||s.includes("savefiles."))&&(o=yield pt(e)),o&&o.url!==e)return A(p({},t),{url:o.url,headers:p(p({},t.headers),o.headers||{}),isDirect:!0,originalUrl:e});if(!o||o.url===e){let u=yield v(e,{headers:t.headers});if(u){let a=yield u.text();a.includes("p,a,c,k,e,d")&&(a=k(a));let i=a.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||a.match(/https?:\/\/[^"']+\.mp4[^"']*/)||a.match(/file\s*:\s*["']([^"']+)["']/);if(i){let h=i[1]||i[0];h.startsWith("//")&&(h="https:"+h),h.startsWith("http")&&!h.includes(vt)&&(o={url:h})}if(!o){let h=a.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(h){let l=h[1];if(l.startsWith("//")&&(l="https:"+l),l.startsWith("/")){let c=(n=e.match(/^https?:\/\/[^\/]+/))==null?void 0:n[0];c&&(l=c+l)}if(l.startsWith("http")&&l!==e)return console.log(`[Resolver] Peeling: Found nested iframe -> ${l}`),yield F(A(p({},t),{url:l}),r+1)}}}}if(o&&o.url!==e&&o.url.startsWith("http"))return A(p({},t),{url:o.url,headers:p(p({},t.headers),o.headers||{}),isDirect:!0,originalUrl:e})}catch(o){}return A(p({},t),{isDirect:!1})})}var vt="googletagmanager";var $t="https://arm.haglund.dev/api/v2";var xt="https://v3-cinemeta.strem.io";function I(e){return f(this,arguments,function*(t,r={}){try{let s=new AbortController,n=setTimeout(()=>s.abort(),8e3),o=yield fetch(t,A(p({},r),{signal:s.signal}));return clearTimeout(n),o}catch(s){return console.error(`[ArmSync] Fetch failed: ${t}`,s.message),null}})}function N(t,r){return f(this,null,function*(){if(!t)return null;let e=yield I(`${$t}/themoviedb?id=${t}`);if(e)try{let o=yield e.json(),u=Array.isArray(o)?o[0]:o;if(u&&u.imdb)return u.imdb}catch(o){}let s=`https://www.themoviedb.org/${r==="movie"?"movie":"tv"}/${t}`,n=yield I(s);if(n){let u=(yield n.text()).match(/imdb\.com\/title\/(tt\d+)/);if(u)return u[1]}return null})}function H(t,r,e){return f(this,null,function*(){var h;if(!t||r===0)return null;let s=yield I(`${xt}/meta/series/${t}.json`);if(!s)return null;let n=yield s.json();if(!((h=n==null?void 0:n.meta)!=null&&h.videos))return null;let o=n.meta.videos.filter(l=>l.season>0&&l.episode>0).sort((l,c)=>l.season-c.season||l.episode-c.episode),u=[],a=new Set;for(let l of o){let c=`${l.season}-${l.episode}`;a.has(c)||(a.add(c),u.push(l))}let i=u.findIndex(l=>l.season==r&&l.episode==e);if(i!==-1){let l=i+1;return console.log(`[ArmSync] Resolved: S${r}E${e} -> Absolute ${l}`),l}return null})}var z="8265bd1679663a7ea12ac168da84d2e8",B="https://api.themoviedb.org/3";function O(t){return f(this,null,function*(){try{let r=new AbortController,e=setTimeout(()=>r.abort(),8e3),s=yield fetch(t,{headers:{"User-Agent":"Mozilla/5.0",Accept:"application/json"},signal:r.signal});return clearTimeout(e),s.ok?s:null}catch(r){return null}})}function J(t,r){return f(this,null,function*(){var n,o,u,a,i,h;let e=r==="movie"?"movie":"tv",s=[];try{let l=`${B}/${e}/${t}?api_key=${z}&language=en-US`,c=yield O(l);if(c){let w=yield c.json(),y=(n=e==="movie"?w.title:w.name)==null?void 0:n.trim(),g=(o=e==="movie"?w.original_title:w.original_name)==null?void 0:o.trim();y&&s.push(y),g&&g!==y&&/^[\x00-\x7F\u00C0-\u024F\s]+$/.test(g)&&s.push(g)}let m=`${B}/${e}/${t}/translations?api_key=${z}`,d=yield O(m);if(d){let y=((yield d.json()).translations||[]).find(x=>x.iso_639_1==="fr"),g=((a=(u=y==null?void 0:y.data)==null?void 0:u.name)==null?void 0:a.trim())||((h=(i=y==null?void 0:y.data)==null?void 0:i.title)==null?void 0:h.trim());g&&!s.includes(g)&&s.push(g)}}catch(l){console.error(`[Metadata] TMDB API error: ${l.message}`)}return console.log(`[Metadata] Titles for ${t}: ${s.join(" | ")}`),s})}var S="https://vostfree.ws";function bt(t){return f(this,null,function*(){try{let r=[],e=new Set,s=(a,i)=>{a&&a.length>10&&i&&i.length>2&&!e.has(a)&&(e.add(a),r.push({title:i,url:a.startsWith("http")?a:S+a}))};try{let a=yield C(`${S}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:S,Origin:S},body:`do=search&subaction=search&story=${encodeURIComponent(t)}`}),i=E.load(a);i("a[href]").each((h,l)=>{let c=i(l).attr("href")||"",m=i(l).text().trim()||i(l).attr("title")||"";(c.includes(S)||c.startsWith("/"))&&m.length>2&&!c.includes("/category/")&&!c.includes("/page/")&&!c.includes("?do=")&&!c.includes("#")&&(/\.\w{2,4}$/.test(c)||/\/\d+/.test(c))&&s(c,m)})}catch(a){}if(r.length===0){let a=yield C(`${S}/?s=${encodeURIComponent(t)}`),i=E.load(a),h=[".post-title a",".film-name a","h2.title a","h3.title a",".title a"];for(let l of h)if(i(l).each((c,m)=>{let d=i(m).attr("href")||"",w=i(m).text().trim()||i(m).attr("title")||"";d.includes(S)&&w.length>2&&!d.includes("/category/")&&!d.includes("/page/")&&s(d,w)}),r.length>0)break}let n=a=>a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),o=n(t);console.log(`[Vostfree] Results found: ${r.length}`);let u=r.filter(a=>n(a.title).includes(o));return u.length>0&&console.log(`[Vostfree] Found ${u.length} matches for "${t}"`),u}catch(r){return console.error(`[Vostfree] Search error: ${r.message}`),[]}})}function K(t,r,e,s){return f(this,null,function*(){let n=yield J(t,r);if(n.length===0)return[];let o=[...n].sort((c,m)=>{let d=/[^\x00-\x7F]/.test(c)?-1:/[àâéèêëîïôùûüç'L']/i.test(c)?0:1,w=/[^\x00-\x7F]/.test(m)?-1:/[àâéèêëîïôùûüç'L']/i.test(m)?0:1;return d-w}),u=[s];try{let c=yield N(t,r);if(c){let m=yield H(c,e,s);m&&m!==s&&u.push(m)}}catch(c){console.warn(`[Vostfree] ArmSync failed: ${c.message}`)}let a=[];for(let c of o)if(a=yield bt(c),a&&a.length>0)break;if(!a||a.length===0)return[];a=a.sort((c,m)=>{let d=c.title.toLowerCase(),w=m.title.toLowerCase(),y=`saison ${e}`,g=d.includes(y),x=w.includes(y);return g&&!x?-1:!g&&x?1:0});let i=[],h=new Set;for(let c of a){if(h.has(c.url))continue;h.add(c.url);let m=c.title.toLowerCase(),d=c.url,w=c.title.toUpperCase().includes(" VF")||c.url.includes("/vf/")?"VF":"VOSTFR",y=m.match(/saison\s*(\d+)/);if(!(y&&parseInt(y[1])!==e&&u.length===1))try{let g=yield C(d),x=E.load(g),M=null;if(x("select.new_player_selector option").each((U,T)=>{let b=x(T).text().trim();for(let _ of u){let R=parseInt(_,10),$=b.match(/[Ee]pisode\s*(0*)(\d+)/i);if($&&parseInt($[1]+$[2],10)===R)return M=x(T).val(),!1}}),!M){console.warn(`[Vostfree] Episode ${s} not found in selector on ${d}`);continue}console.log(`[Vostfree] Using buttons ID: ${M} for ${w}`);let G=x(`#${M} div[id^="player_"]`).toArray();for(let U of G){let T=x(U).attr("id").replace("player_",""),b=x(U).text().trim()||"Player",_=`content_player_${T}`,R=x(`#${_}`).text().trim();if(R){let $=R;if($.startsWith("http")||(b.toLowerCase().includes("sibnet")?$=`https://video.sibnet.ru/shell.php?videoid=${R}`:b.toLowerCase().includes("vidmoly")?$=`https://vidmoly.to/embed-${R}.html`:b.toLowerCase().includes("uqload")||b.toLowerCase().includes("oneupload")?$=`https://uqload.com/embed-${R}.html`:b.toLowerCase().includes("sendvid")?$=`https://sendvid.com/embed/${R}`:b.toLowerCase().includes("voe")?$=`https://voe.sx/e/${R}`:b.toLowerCase().includes("dood")?$=`https://dood.to/e/${R}`:(b.toLowerCase().includes("stape")||b.toLowerCase().includes("streamtape"))&&($=`https://streamtape.com/e/${R}`)),$.startsWith("http")){let L=yield F({name:`Vostfree (${w})`,title:`${b} - ${w}`,url:$,quality:"HD",headers:{Referer:S}});L&&i.push(L)}}}}catch(g){console.error(`[Vostfree] Match handle error: ${g.message}`)}}let l=i.filter(c=>c&&c.isDirect);return console.log(`[Vostfree] Total streams found: ${l.length}`),l})}function Rt(t,r,e,s){return f(this,null,function*(){console.log(`[Vostfree] Request: ${r} ${t} S${e}E${s}`);try{return yield K(t,r,e,s)}catch(n){return console.error("[Vostfree] Error:",n),[]}})}
