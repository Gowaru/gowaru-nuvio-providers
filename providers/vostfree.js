/**
 * vostfree - Built from src/vostfree/
 * Generated: 2026-02-25T10:09:14.937Z
 */
var F=Object.create;var x=Object.defineProperty,W=Object.defineProperties,_=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,N=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var R=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&R(e,r,t[r]);if(V)for(var r of V(t))H.call(t,r)&&R(e,r,t[r]);return e},b=(e,t)=>W(e,k(t));var P=(e,t)=>{for(var r in t)x(e,r,{get:t[r],enumerable:!0})},C=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of M(t))!A.call(e,s)&&s!==r&&x(e,s,{get:()=>t[s],enumerable:!(o=_(t,s))||o.enumerable});return e};var B=(e,t,r)=>(r=e!=null?F(N(e)):{},C(t||!e||!e.__esModule?x(r,"default",{value:e,enumerable:!0}):r,e)),I=e=>C(x({},"__esModule",{value:!0}),e);var c=(e,t,r)=>new Promise((o,s)=>{var n=a=>{try{i(r.next(a))}catch(u){s(u)}},f=a=>{try{i(r.throw(a))}catch(u){s(u)}},i=a=>a.done?o(a.value):Promise.resolve(a.value).then(n,f);i((r=r.apply(e,t)).next())});var et={};P(et,{getStreams:()=>tt});module.exports=I(et);var K={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function y(r){return c(this,arguments,function*(e,t={}){console.log(`[Vostfree] Fetching: ${e}`);let o=yield fetch(e,h({headers:h(h({},K),t.headers)},t));if(!o.ok)throw new Error(`HTTP error ${o.status} for ${e}`);return yield o.text()})}var v=B(require("cheerio"));var O={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"*/*"};function w(r){return c(this,arguments,function*(e,t={}){try{let o=new AbortController,s=setTimeout(()=>o.abort(),1e4),n=yield fetch(e,b(h({},t),{headers:h(h({},O),t.headers),signal:o.signal}));return clearTimeout(s),n}catch(o){return console.error(`[Resolver] Fetch failed for ${e}: ${o.message}`),null}})}function z(e){return c(this,null,function*(){let t=yield w(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!t)return e;let o=(yield t.text()).match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(o){let s=o[1];return s.startsWith("/")&&(s=`https://video.sibnet.ru${s}`),s}return e})}function J(e){return c(this,null,function*(){let t=yield w(e);if(!t)return e;let o=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return o?o[1]:e})}function G(e){return c(this,null,function*(){let t=yield w(e);if(!t)return e;let o=(yield t.text()).match(/sources\s*:\s*\["([^"]+)"\]/);return o?o[1]:e})}function j(e){return c(this,null,function*(){let t=yield w(e);if(!t)return e;let r=yield t.text(),o=r.match(/'hls'\s*:\s*'([^']+)'/)||r.match(/"hls"\s*:\s*"([^"]+)"/);return o?o[1]:e})}function Q(e){return c(this,null,function*(){let t=yield w(e);if(!t)return e;let o=(yield t.text()).match(/source\s+src="([^"]+\.mp4)"/i);return o?o[1]:e})}function X(e){return c(this,null,function*(){let t=yield w(e.replace("/e/","/d/"));if(!t)return e;let o=(yield t.text()).match(/window\.open\('([^']+)'\)/);return o?o[1]:e})}function E(e){return c(this,null,function*(){let t=e.url,r=t.toLowerCase();try{let o=t;if(r.includes("sibnet.ru")?o=yield z(t):r.includes("vidmoly.")?o=yield J(t):r.includes("uqload.")?o=yield G(t):r.includes("voe.sx")||r.includes("christopheruntilpoint")?o=yield j(t):r.includes("sendvid.com")?o=yield Q(t):(r.includes("dood")||r.includes("ds2play")||r.includes("viddood"))&&(o=yield X(t)),o!==t)return console.log(`[Resolver] Success: ${t.substring(0,30)}... -> ${o.substring(0,30)}...`),b(h({},e),{url:o,isDirect:!0,originalUrl:t})}catch(o){console.error(`[Resolver] Failed for ${t}:`,o)}return e})}var S="https://vostfree.ws";function Y(e,t){return c(this,null,function*(){try{let r=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}?language=en-US`,o=yield y(r),s=v.default.load(o),n=s('meta[property="og:title"]').attr("content")||s("h1").first().text()||s("h2").first().text();return n&&n.includes(" (")&&(n=n.split(" (")[0]),n&&n.includes(" - ")&&(n=n.split(" - ")[0]),n=n?n.trim():null,console.log(`[Vostfree] TMDB Title found: ${n}`),n}catch(r){return console.error(`[Vostfree] Failed to get title from TMDB: ${r.message}`),null}})}function Z(e){return c(this,null,function*(){try{let t=`do=search&subaction=search&story=${encodeURIComponent(e)}`,r=yield y(`${S}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:S},body:t}),o=v.default.load(r),s=[];o(".title a, .search-result-item a, .movie-title a").each((a,u)=>{let l=o(u).attr("href");l&&(l.includes(".html")||l.includes("/anime/"))&&s.push({title:o(u).text().trim()||o(u).attr("title"),url:l})});let n=a=>a.toLowerCase().replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),f=n(e);console.log(`[Vostfree] Results found: ${s.length}`);let i=s.find(a=>n(a.title)===f);return i||(i=s.find(a=>n(a.title).includes(f)&&a.title.includes("VOSTFR"))),i||(i=s.find(a=>n(a.title).includes(f))),i||(i=s[0]),i?(console.log(`[Vostfree] Selected: ${i.title} -> ${i.url}`),i.url):null}catch(t){return console.error(`[Vostfree] Search error: ${t.message}`),null}})}function U(e,t,r,o){return c(this,null,function*(){let s=yield Y(e,t);if(!s)return[];let n=yield Z(s);if(!n)return[];try{let f=yield y(n),i=v.default.load(f),a=o.toString(),u=a.padStart(2,"0"),l=null;if(i("select.new_player_selector option").each((d,$)=>{let m=i($).text();if(m.includes(`Episode ${a}`)||m.includes(`Episode ${u}`))return l=i($).val(),!1}),!l){console.warn(`[Vostfree] Episode ${o} not found in selector on ${n}`);let d=i('div[id^="buttons_"]').first().attr("id");if(d)console.log(`[Vostfree] Falling back to first available buttons: ${d}`),l=d;else return[]}console.log(`[Vostfree] Using buttons ID: ${l}`);let T=[],q=i(`#${l} div[id^="player_"]`).toArray();for(let d of q){let $=i(d).attr("id").replace("player_",""),m=i(d).text().trim()||"Player",D=`content_player_${$}`,g=i(`#${D}`).text().trim();if(g){let p=g;if(p.startsWith("http")||(m.toLowerCase().includes("sibnet")?p=`https://video.sibnet.ru/shell.php?videoid=${g}`:m.toLowerCase().includes("vidmoly")?p=`https://vidmoly.to/embed-${g}.html`:m.toLowerCase().includes("uqload")&&(p=`https://uqload.com/embed-${g}.html`)),p.startsWith("http")){let L=yield E({name:`Vostfree (${m})`,title:`${m} Player`,url:p,quality:"HD",headers:{Referer:S}});T.push(L)}}}return T}catch(f){return console.error(`[Vostfree] Extraction error: ${f.message}`),[]}})}function tt(e,t,r,o){return c(this,null,function*(){console.log(`[Vostfree] Request: ${t} ${e} S${r}E${o}`);try{return yield U(e,t,r,o)}catch(s){return console.error("[Vostfree] Error:",s),[]}})}
