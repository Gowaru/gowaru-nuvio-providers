/**
 * vostfree - Built from src/vostfree/
 * Generated: 2026-02-24T23:41:23.039Z
 */
var _=Object.create;var g=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var T=(t,e,o)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,w=(t,e)=>{for(var o in e||(e={}))q.call(e,o)&&T(t,o,e[o]);if(V)for(var o of V(e))U.call(e,o)&&T(t,o,e[o]);return t};var F=(t,e)=>{for(var o in e)g(t,o,{get:e[o],enumerable:!0})},C=(t,e,o,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of D(e))!q.call(t,r)&&r!==o&&g(t,r,{get:()=>e[r],enumerable:!(i=A(e,r))||i.enumerable});return t};var N=(t,e,o)=>(o=t!=null?_(L(t)):{},C(e||!t||!t.__esModule?g(o,"default",{value:t,enumerable:!0}):o,t)),k=t=>C(g({},"__esModule",{value:!0}),t);var u=(t,e,o)=>new Promise((i,r)=>{var s=a=>{try{n(o.next(a))}catch(f){r(f)}},c=a=>{try{n(o.throw(a))}catch(f){r(f)}},n=a=>a.done?i(a.value):Promise.resolve(a.value).then(s,c);n((o=o.apply(t,e)).next())});var H={};F(H,{getStreams:()=>B});module.exports=k(H);var M={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function y(o){return u(this,arguments,function*(t,e={}){console.log(`[Vostfree] Fetching: ${t}`);let i=yield fetch(t,w({headers:w(w({},M),e.headers)},e));if(!i.ok)throw new Error(`HTTP error ${i.status} for ${t}`);return yield i.text()})}var b=N(require("cheerio-without-node-native"));var v="https://vostfree.ws";function P(t,e){return u(this,null,function*(){try{let o=`https://www.themoviedb.org/${e==="movie"?"movie":"tv"}/${t}?language=en-US`,i=yield y(o),r=b.default.load(i),s=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return s&&s.includes(" (")&&(s=s.split(" (")[0]),s&&s.includes(" - ")&&(s=s.split(" - ")[0]),s=s?s.trim():null,console.log(`[Vostfree] TMDB Title found: ${s}`),s}catch(o){return console.error(`[Vostfree] Failed to get title from TMDB: ${o.message}`),null}})}function W(t){return u(this,null,function*(){try{let e=`do=search&subaction=search&story=${encodeURIComponent(t)}`,o=yield y(`${v}/index.php?do=search`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:v},body:e}),i=b.default.load(o),r=[];i(".title a, .search-result-item a, .movie-title a").each((a,f)=>{let l=i(f).attr("href");l&&(l.includes(".html")||l.includes("/anime/"))&&r.push({title:i(f).text().trim()||i(f).attr("title"),url:l})});let s=a=>a.toLowerCase().replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),c=s(t);console.log(`[Vostfree] Results found: ${r.length}`);let n=r.find(a=>s(a.title)===c);return n||(n=r.find(a=>s(a.title).includes(c)&&a.title.includes("VOSTFR"))),n||(n=r.find(a=>s(a.title).includes(c))),n||(n=r[0]),n?(console.log(`[Vostfree] Selected: ${n.title} -> ${n.url}`),n.url):null}catch(e){return console.error(`[Vostfree] Search error: ${e.message}`),null}})}function E(t,e,o,i){return u(this,null,function*(){let r=yield P(t,e);if(!r)return[];let s=yield W(r);if(!s)return[];try{let c=yield y(s),n=b.default.load(c),a=i.toString(),f=a.padStart(2,"0"),l=null;if(n("select.new_player_selector option").each((h,m)=>{let x=n(m).text();if(x.includes(`Episode ${a}`)||x.includes(`Episode ${f}`))return l=n(m).val(),!1}),!l){console.warn(`[Vostfree] Episode ${i} not found in selector on ${s}`);let h=n('div[id^="buttons_"]').first().attr("id");if(h)console.log(`[Vostfree] Falling back to first available buttons: ${h}`),l=h;else return[]}console.log(`[Vostfree] Using buttons ID: ${l}`);let S=[];return n(`#${l} div[id^="player_"]`).each((h,m)=>{let x=n(m).attr("id").replace("player_",""),p=n(m).text().trim()||"Player",R=`content_player_${x}`,$=n(`#${R}`).text().trim();if($){let d=$;d.startsWith("http")||(p.toLowerCase().includes("sibnet")?d=`https://video.sibnet.ru/shell.php?videoid=${$}`:p.toLowerCase().includes("vidmoly")?d=`https://vidmoly.to/embed-${$}.html`:p.toLowerCase().includes("uqload")&&(d=`https://uqload.com/embed-${$}.html`)),d.startsWith("http")&&S.push({name:`Vostfree (${p})`,title:`${p} Player`,url:d,quality:"HD",headers:{Referer:v}})}}),S}catch(c){return console.error(`[Vostfree] Extraction error: ${c.message}`),[]}})}function B(t,e,o,i){return u(this,null,function*(){console.log(`[Vostfree] Request: ${e} ${t} S${o}E${i}`);try{return yield E(t,e,o,i)}catch(r){return console.error("[Vostfree] Error:",r),[]}})}
