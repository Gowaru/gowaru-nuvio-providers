/**
 * franime - Built from src/franime/
 * Generated: 2026-02-24T23:41:23.006Z
 */
var C=Object.create;var h=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var w=(e,n,t)=>n in e?h(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,d=(e,n)=>{for(var t in n||(n={}))y.call(n,t)&&w(e,t,n[t]);if(R)for(var t of R(n))O.call(n,t)&&w(e,t,n[t]);return e};var k=(e,n)=>{for(var t in n)h(e,t,{get:n[t],enumerable:!0})},S=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of B(n))!y.call(e,r)&&r!==t&&h(e,r,{get:()=>n[r],enumerable:!(i=U(n,r))||i.enumerable});return e};var H=(e,n,t)=>(t=e!=null?C(M(e)):{},S(n||!e||!e.__esModule?h(t,"default",{value:e,enumerable:!0}):t,e)),J=e=>S(h({},"__esModule",{value:!0}),e);var s=(e,n,t)=>new Promise((i,r)=>{var o=a=>{try{l(t.next(a))}catch(m){r(m)}},c=a=>{try{l(t.throw(a))}catch(m){r(m)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(o,c);l((t=t.apply(e,n)).next())});var V={};k(V,{getStreams:()=>K});module.exports=J(V);var W={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function F(t){return s(this,arguments,function*(e,n={}){console.log(`[FRAnime] Fetching: ${e}`);let i=yield fetch(e,d({headers:d(d({},W),n.headers)},n));if(!i.ok)throw new Error(`HTTP error ${i.status} for ${e}`);return yield i.text()})}function T(t){return s(this,arguments,function*(e,n={}){let i=yield F(e,n);try{return JSON.parse(i)}catch(r){throw console.error(`[FRAnime] Failed to parse JSON from ${e}`),r}})}var v=H(require("cheerio-without-node-native"));var L="https://api.franime.fr/api",p=null;function z(e,n){return s(this,null,function*(){try{let t=`https://www.themoviedb.org/${n==="movie"?"movie":"tv"}/${e}?language=en-US`,i=yield F(t),r=v.default.load(i),o=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return o&&o.includes(" (")&&(o=o.split(" (")[0]),o&&o.includes(" - ")&&(o=o.split(" - ")[0]),o=o?o.trim():null,console.log(`[FRAnime] TMDB Title found: ${o}`),o}catch(t){return console.error(`[FRAnime] Failed to get title from TMDB: ${t.message}`),null}})}function I(){return s(this,null,function*(){if(p)return p;try{return console.log("[FRAnime] Loading full anime list..."),p=yield T(`${L}/animes/`),console.log(`[FRAnime] Loaded ${p.length} animes.`),p}catch(e){return console.error(`[FRAnime] Failed to load anime list: ${e.message}`),[]}})}function P(e,n){let t=o=>o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),i=t(n),r=e.find(o=>t(o.title)===i||t(o.titleO||"")===i);return r||(r=e.find(o=>t(o.title).includes(i)||t(o.titleO||"").includes(i))),r}function q(e,n,t,i){return s(this,null,function*(){let r=yield z(e,n);if(!r)return[];let o=yield I(),c=P(o,r);if(!c)return console.warn(`[FRAnime] No match found for "${r}" in anime list.`),[];console.log(`[FRAnime] Found match: ${c.title} (ID: ${c.id})`);let l=[],a=t-1,m=i-1,A=c.saisons[a];if(!A)return console.warn(`[FRAnime] Season ${t} not found for ${c.title}`),[];let x=A.episodes[m];if(!x)return console.warn(`[FRAnime] Episode ${i} not found in Season ${t}`),[];let E=["vo","vf"];for(let g of E){let $=x.lang[g];if(!$||!$.lecteurs)continue;let D=g==="vo"?"VOSTFR":"VF";for(let f=0;f<$.lecteurs.length;f++){let N=$.lecteurs[f],b=`${L}/anime/${c.id}/${a}/${m}/${g}/${f}`;try{let u=yield F(b,{headers:{Referer:"https://franime.fr/"}});u&&u.startsWith("http")&&l.push({name:`FRAnime (${D})`,title:`${N} Player`,url:u,quality:"HD",headers:{Referer:"https://franime.fr/"}})}catch(u){console.error(`[FRAnime] Failed to fetch player ${f} for ${g}: ${u.message}`)}}}return l})}function K(e,n,t,i){return s(this,null,function*(){console.log(`[FRAnime] Request: ${n} ${e} S${t}E${i}`);try{return yield q(e,n,t,i)}catch(r){return console.error("[FRAnime] Error:",r),[]}})}
