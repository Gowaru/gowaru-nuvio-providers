/**
 * animevostfr - Built from src/animevostfr/
 * Generated: 2026-02-25T15:40:09.541Z
 */
var M=Object.create;var v=Object.defineProperty,O=Object.defineProperties,q=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,W=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var S=(e,n,t)=>n in e?v(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,d=(e,n)=>{for(var t in n||(n={}))A.call(n,t)&&S(e,t,n[t]);if(x)for(var t of x(n))j.call(n,t)&&S(e,t,n[t]);return e},h=(e,n)=>O(e,U(n));var C=(e,n)=>{for(var t in n)v(e,t,{get:n[t],enumerable:!0})},b=(e,n,t,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of L(n))!A.call(e,r)&&r!==t&&v(e,r,{get:()=>n[r],enumerable:!(s=q(n,r))||s.enumerable});return e};var P=(e,n,t)=>(t=e!=null?M(W(e)):{},b(n||!e||!e.__esModule?v(t,"default",{value:e,enumerable:!0}):t,e)),H=e=>b(v({},"__esModule",{value:!0}),e);var u=(e,n,t)=>new Promise((s,r)=>{var i=o=>{try{l(t.next(o))}catch(c){r(c)}},a=o=>{try{l(t.throw(o))}catch(c){r(c)}},l=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,a);l((t=t.apply(e,n)).next())});var oe={};C(oe,{getStreams:()=>ie});module.exports=H(oe);var N={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function y(t){return u(this,arguments,function*(e,n={}){console.log(`[AnimeVOSTFR] Fetching: ${e}`);let s=yield fetch(e,d({headers:d(d({},N),n.headers)},n));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${e}`);return yield s.text()})}var g=P(require("cheerio"));var R={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"};function p(t){return u(this,arguments,function*(e,n={}){try{let s=yield fetch(e,h(d({},n),{headers:d(d({},R),n.headers),redirect:"follow"}));if(!s.ok)return null;let r=yield s.text(),i=r.match(/window\.location\.(?:replace|href)\s*\(['"]([^'"]+)['"]\)/i);if(i){let a=i[1];a.startsWith("/")&&(a=e.match(/https?:\/\/[^\/]+/)[0]+a);let l=yield fetch(a,h(d({},n),{headers:d(h(d({},R),{Referer:e}),n.headers)}));if(l.ok){let o=yield l.text();return{text:()=>Promise.resolve(o),ok:!0,url:l.url}}}return{text:()=>Promise.resolve(r),ok:!0,url:s.url}}catch(s){return null}})}function z(e){return u(this,null,function*(){let n=yield p(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!n)return e;let t=yield n.text(),s=t.match(/src\s*:\s*["']([^"']+\.mp4)["']/)||t.match(/"url"\s*:\s*"([^"]+\.mp4)"/)||t.match(/video_url\s*:\s*'([^']+)'/);if(s){let r=s[1];return r.startsWith("//")?r="https:"+r:r.startsWith("/")&&(r="https://video.sibnet.ru"+r),r}return e})}function I(e){return u(this,null,function*(){let n=yield p(e,{headers:{Referer:"https://vidmoly.to/"}});if(!n)return e;let t=yield n.text(),s=t.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/)||t.match(/sources\s*:\s*\[\s*\{\s*file\s*:\s*["']([^"']+)["']/)||t.match(/["']?file["']?\s*:\s*["']([^"']+)["']/);return s?s[1]:e})}function _(e){return u(this,null,function*(){let n=yield p(e,{headers:{Referer:"https://uqload.com/"}});if(!n)return e;let t=yield n.text(),s=t.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||t.match(/src\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/)||t.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/);return s?s[1]:e})}function K(e){return u(this,null,function*(){let n=yield p(e);if(!n)return e;let t=yield n.text(),s=t.match(/'hls'\s*:\s*'([^']+)'/)||t.match(/"hls"\s*:\s*"([^"]+)"/);if(s){let i=s[1];if(i.includes("base64"))try{let a=i.split(",")[1]||i;i=atob(a)}catch(a){}return i}let r=t.match(/https?:\/\/[^"']+\.m3u8[^"']*/);return r?r[0]:e})}function B(e){return u(this,null,function*(){let n=yield p(e);if(!n)return e;let t=yield n.text(),s=t.match(/document\.getElementById\(['"]robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*(?:['"]([^'"]+)['"]|(\w+))/);if(s){let i=s[1],a=s[2]||"";return"https:"+i+a}let r=t.match(/id=['"]robotlink['"]>([^<]+)/);return r?"https:"+r[1]:e})}function G(e){return u(this,null,function*(){try{let n=e.match(/https?:\/\/([^\/]+)/)[1],t=yield p(e);if(!t)return e;let r=(yield t.text()).match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(r){let i=`https://${n}/pass_md5/${r[1]}`,a=yield fetch(i,{headers:{Referer:e}});if(a.ok)return(yield a.text())+"z762vpz?token="+r[1]+"&expiry="+Date.now()}}catch(n){}return e})}function J(e){return u(this,null,function*(){let n=yield p(e);if(!n)return e;let t=yield n.text(),s=t.match(/source\s*src=['"]([^'"]+\.mp4)['"]/)||t.match(/content=['"]([^'"]+\.mp4)['"]/);return s?s[1]:e})}function Q(e){return u(this,null,function*(){let n=yield p(e);if(!n)return e;let t=yield n.text(),s=t.match(/vurl=["']([^"']+)["']/)||t.match(/file\s*:\s*["']([^"']+)["']/);if(s){let r=s[1];return r.startsWith("//")&&(r="https:"+r),r}return e})}function X(e){return u(this,null,function*(){let n=yield p(e);if(!n)return e;let s=(yield n.text()).match(/sources\s*:\s*\[\s*{\s*file\s*:\s*["']([^"']+)["']/);return s?s[1]:e})}function T(e){return u(this,null,function*(){let n=e.url,t=n.toLowerCase();if(t.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/))return h(d({},e),{isDirect:!0});try{let s=n,r=d({},e.headers);if(t.includes("sibnet.ru")?(s=yield z(n),r.Referer="https://video.sibnet.ru/"):t.includes("vidmoly.")?(s=yield I(n),r.Referer="https://vidmoly.to/"):t.includes("uqload.")||t.includes("oneupload.")?(s=yield _(n),r.Referer="https://uqload.com/"):t.includes("voe.")?s=yield K(n):t.includes("streamtape.com")||t.includes("stape")?s=yield B(n):t.includes("dood")||t.includes("ds2play")?s=yield G(n):t.includes("sendvid.com")?s=yield J(n):t.includes("myvi.")||t.includes("mytv")?s=yield Q(n):(t.includes("moonplayer")||t.includes("moon."))&&(s=yield X(n)),s!==n&&s.startsWith("http"))return h(d({},e),{url:s,isDirect:!0,headers:r})}catch(s){}return h(d({},e),{isDirect:!1})})}var Y="https://arm.haglund.dev/api/v2";var Z="https://v3-cinemeta.strem.io";function F(t){return u(this,arguments,function*(e,n={}){try{let s=new AbortController,r=setTimeout(()=>s.abort(),8e3),i=yield fetch(e,h(d({},n),{signal:s.signal}));return clearTimeout(r),i}catch(s){return console.error(`[ArmSync] Fetch failed: ${e}`,s.message),null}})}function E(e,n){return u(this,null,function*(){if(!e)return null;let t=yield F(`${Y}/themoviedb?id=${e}`);if(t){let s=yield t.json(),r=Array.isArray(s)?s[0]:s;if(r&&r.imdb)return r.imdb}return null})}function V(e,n,t){return u(this,null,function*(){var l;if(!e||n===0)return null;let s=yield F(`${Z}/meta/series/${e}.json`);if(!s)return null;let r=yield s.json();if(!((l=r==null?void 0:r.meta)!=null&&l.videos))return null;let a=r.meta.videos.filter(o=>o.season>0).sort((o,c)=>o.season-c.season||o.episode-c.episode).findIndex(o=>o.season==n&&o.episode==t);if(a!==-1){let o=a+1;return console.log(`[ArmSync] Resolved: S${n}E${t} -> Absolute ${o}`),o}return null})}var $="https://animevostfr.org";function ee(e,n){return u(this,null,function*(){try{let t=`https://www.themoviedb.org/${n==="movie"?"movie":"tv"}/${e}?language=en-US`,s=yield y(t),r=g.default.load(s),i=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return i&&i.includes(" (")&&(i=i.split(" (")[0]),i&&i.includes(" - ")&&(i=i.split(" - ")[0]),i=i?i.trim():null,console.log(`[AnimeVOSTFR] TMDB Title found: ${i}`),i}catch(t){return console.error(`[AnimeVOSTFR] Failed to get title from TMDB: ${t.message}`),null}})}function te(e){return u(this,null,function*(){try{let n=yield y(`${$}/?s=${encodeURIComponent(e)}`),t=g.default.load(n),s=[];t("a").each((c,m)=>{let f=t(m).attr("href")||"",w=t(m).text().trim();f.includes("/animes/")&&w.length>2&&s.push({title:w,url:f})});let r=new Set,i=s.filter(c=>r.has(c.url)?!1:(r.add(c.url),!0));console.log(`[AnimeVOSTFR] Search results: ${i.length}`);let a=c=>c.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),l=a(e),o=i.find(c=>a(c.title).includes(l)&&(c.url.includes("vostfr")||c.url.includes("voir-")));return o||(o=i.find(c=>a(c.title).includes(l))),!o&&i.length>0&&(o=i[0]),o&&console.log(`[AnimeVOSTFR] Selected: ${o.title} -> ${o.url}`),o||null}catch(n){return console.error(`[AnimeVOSTFR] Search error: ${n.message}`),null}})}function ne(e,n,t){return u(this,null,function*(){try{let s=yield y(e),r=g.default.load(s),i=[];r('a[href*="/episode/"]').each((c,m)=>{let f=r(m).attr("href")||"",w=r(m).text().trim();i.push({url:f,text:w})}),console.log(`[AnimeVOSTFR] Found ${i.length} episode links`);let a=[`episode-${t}/`,`episode-${t}`,`saison-${n}-episode-${t}`,`-${n}-episode-${t}`];for(let c of a){let m=i.find(f=>f.url.includes(c));if(m)return console.log(`[AnimeVOSTFR] Found episode: ${m.url}`),m.url}let l=String(t).padStart(1,"0"),o=i.find(c=>{let m=c.url.toLowerCase();return m.includes(`episode-${l}/`)||m.includes(`episode-${l}`)});return o?(console.log(`[AnimeVOSTFR] Found episode (fallback): ${o.url}`),o.url):null}catch(s){return console.error(`[AnimeVOSTFR] Error finding episode: ${s.message}`),null}})}function se(e){return u(this,null,function*(){let n=[];try{let t=yield y(e),s=g.default.load(t),r=[];s(".TPlayerNv li").each((a,l)=>{r.push(s(l).text().trim())});let i=[];s(".TPlayerTb").each((a,l)=>{let o=s(l).find("iframe"),c=s(l).find(".lazy-player");o.length&&o.attr("src")?i.push(o.attr("src")):c.length&&c.attr("data-src")&&i.push(c.attr("data-src"))}),console.log(`[AnimeVOSTFR] Found ${i.length} player tabs`);for(let a=0;a<i.length;a++)try{let l=i[a];l.startsWith("/")&&(l=$+l);let o=yield y(l),m=g.default.load(o)("iframe").attr("src");if(m&&m.startsWith("http")){let f=r[a]||`Lecteur ${a+1}`,w=re(m),k=yield T({name:"AnimeVOSTFR",title:`${w} (${f})`,url:m,quality:"HD",headers:{Referer:$}});n.push(k)}}catch(l){console.error(`[AnimeVOSTFR] Failed to resolve player ${a}: ${l.message}`)}}catch(t){console.error(`[AnimeVOSTFR] Error extracting players: ${t.message}`)}return n})}function re(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("uqload")||e.includes("oneupload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("dood")||e.includes("ds2play")?"Doodstream":e.includes("myvi")||e.includes("mytv")?"MyVi":e.includes("sendvid")?"Sendvid":e.includes("stape")||e.includes("streamtape")?"Streamtape":e.includes("moon")?"Moon":"Player"}function D(e,n,t,s){return u(this,null,function*(){let r=yield ee(e,n);if(!r)return[];let i=[s];try{let c=yield E(e,n);if(c){let m=yield V(c,t,s);m&&i.push(m)}}catch(c){console.warn(`[AnimeVOSTFR] ArmSync failed: ${c.message}`)}let a=yield te(r);if(!a)return[];let l=[],o=new Set;for(let c of i){let m=yield ne(a.url,t,c);if(m&&!o.has(m)){o.add(m);let f=yield se(m);l.push(...f)}}return l.length===0&&console.warn(`[AnimeVOSTFR] Episode S${t}E${s} not found (targets: ${i.join(", ")})`),console.log(`[AnimeVOSTFR] Total streams found: ${l.length}`),l})}function ie(e,n,t,s){return u(this,null,function*(){console.log(`[AnimeVOSTFR] Request: ${n} ${e} S${t}E${s}`);try{return yield D(e,n,t,s)}catch(r){return console.error("[AnimeVOSTFR] Error:",r),[]}})}
