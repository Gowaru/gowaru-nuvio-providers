/**
 * animevostfr - Built from src/animevostfr/
 * Generated: 2026-02-26T16:00:43.531Z
 */
var K=Object.create;var S=Object.defineProperty,G=Object.defineProperties,J=Object.getOwnPropertyDescriptor,Y=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,Q=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var _=(t,r,e)=>r in t?S(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,w=(t,r)=>{for(var e in r||(r={}))P.call(r,e)&&_(t,e,r[e]);if(O)for(var e of O(r))X.call(r,e)&&_(t,e,r[e]);return t},$=(t,r)=>G(t,Y(r));var tt=(t,r)=>{for(var e in r)S(t,e,{get:r[e],enumerable:!0})},q=(t,r,e,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Z(r))!P.call(t,i)&&i!==e&&S(t,i,{get:()=>r[i],enumerable:!(s=J(r,i))||s.enumerable});return t};var et=(t,r,e)=>(e=t!=null?K(Q(t)):{},q(r||!t||!t.__esModule?S(e,"default",{value:t,enumerable:!0}):e,t)),st=t=>q(S({},"__esModule",{value:!0}),t);var d=(t,r,e)=>new Promise((s,i)=>{var n=o=>{try{a(e.next(o))}catch(u){i(u)}},c=o=>{try{a(e.throw(o))}catch(u){i(u)}},a=o=>o.done?s(o.value):Promise.resolve(o.value).then(n,c);a((e=e.apply(t,r)).next())});var St={};tt(St,{getStreams:()=>bt});module.exports=st(St);var rt={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function A(e){return d(this,arguments,function*(t,r={}){console.log(`[AnimeVOSTFR] Fetching: ${t}`);let s=yield fetch(t,w({headers:w(w({},rt),r.headers)},r));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${t}`);return yield s.text()})}var T=et(require("cheerio-without-node-native"));var nt={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36"},C=t=>{try{return typeof atob=="function"?atob(t):Buffer.from(t,"base64").toString("binary")}catch(r){return t}};function g(e){return d(this,arguments,function*(t,r={}){let s,i;try{s=new AbortController,i=setTimeout(()=>s.abort(),1e4);let n=yield fetch(t,$(w({},r),{headers:w(w({},nt),r.headers),redirect:"follow",signal:s.signal}));if(clearTimeout(i),!n.ok)return null;let c=yield n.text();return{text:()=>Promise.resolve(c),ok:!0,url:n.url,headers:n.headers}}catch(n){return i&&clearTimeout(i),null}})}function b(t){try{if(!t.includes("p,a,c,k,e,d"))return t;let r=new RegExp("eval\\s*\\(\\s*function\\s*\\(\\s*p\\s*,\\s*a\\s*,\\s*c\\s*,\\s*k\\s*,\\s*e\\s*,\\s*d\\s*\\).*?\\}\\s*\\((.*?)\\)\\s*\\)","gs"),e=t,s;for(;(s=r.exec(t))!==null;)try{let n=s[1].match(new RegExp("^'(.*?)',\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*'(.*?)'\\.split\\('\\|'\\)","s"));if(!n)continue;let c=n[1].replace(/\\'/g,"'"),a=parseInt(n[2]),o=parseInt(n[3]),u=n[4].split("|"),l=f=>(f<a?"":l(parseInt(f/a)))+((f=f%a)>35?String.fromCharCode(f+29):f.toString(36)),m={};for(;o--;)m[l(o)]=u[o]||l(o);let h=c.replace(/\b\w+\b/g,f=>m[f]||f);e=e.replace(s[0],h)}catch(i){}return e}catch(r){return t}}function it(t){return d(this,null,function*(){try{let r=yield g(t,{headers:{Referer:"https://video.sibnet.ru/"}});if(!r)return{url:t};let e=yield r.text(),s=e.match(/file\s*:\s*["']([^"']*\.mp4[^"']*)['"]/i)||e.match(/src\s*:\s*["']([^"']*\.mp4[^"']*)['"]/i)||e.match(/["']((?:https?:)?\/\/[^"'\s]+\.mp4[^"'\s]*)["']/i);if(s){let i=s[1];return i.startsWith("//")?i="https:"+i:i.startsWith("/")&&(i="https://video.sibnet.ru"+i),{url:i,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(r){}return{url:t}})}function at(t){return d(this,null,function*(){try{let r={Referer:"https://vidmoly.to/",Origin:"https://vidmoly.to"},e=yield g(t,{headers:r});if(!e)return{url:t};let s=yield e.text(),i=s.match(/window\.location\.replace\(['"]([^'"]+)['"]\)/)||s.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);i&&i[1]!==t&&(e=yield g(i[1],{headers:r}),e&&(s=yield e.text())),s.includes("eval(function(p,a,c,k,e,d)")&&(s=b(s));let n=s.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/i)||s.match(/["'](https?:\/\/[^"']+\.(?:m3u8|mp4)[^"']*)["']/i);if(n)return{url:n[1],headers:{Referer:"https://vidmoly.to/"}}}catch(r){}return{url:t}})}function ot(t){return d(this,null,function*(){let r=t.replace(/^https?:\/\/[^/]+/,""),e=["uqload.co","uqload.com","uqload.io","uqloads.xyz","uqload.to"],s="https://uqload.co/";for(let i of e)try{let n=`https://${i}${r}`,c=yield g(n,{headers:{Referer:s}});if(!c)continue;let a=yield c.text(),o=a.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||a.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/)||a.match(/["'](https?:\/\/[^"']+\.(?:mp4|m3u8)[^"']*)["']/i);if(o)return{url:o[1],headers:{Referer:s}}}catch(n){}return{url:t}})}function ct(t){return d(this,null,function*(){try{let r=yield g(t);if(!r)return{url:t};let e=yield r.text(),s=e.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(s){let n=yield g(s[1]);n&&(e=yield n.text())}let i=e.match(/'hls'\s*:\s*'([^']+)'/)||e.match(/"hls"\s*:\s*"([^"]+)"/)||e.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(i){let n=i[1]||i[0];return n.includes("base64")&&(n=C(n.split(",")[1]||n)),{url:n,headers:{Referer:t}}}}catch(r){}return{url:t}})}function lt(t){return d(this,null,function*(){try{let r=yield g(t);if(!r)return{url:t};let e=yield r.text();e.includes("p,a,c,k,e,d")&&(e=b(e));let s=e.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(s){let i="https:"+s[1],n=s[2].split("+");for(let c of n){let a=c.match(/['"]([^'"]+)['"]/);if(a){let o=a[1],u=c.match(/substring\((\d+)\)/);u&&(o=o.substring(parseInt(u[1]))),i+=o}}return{url:i,headers:{Referer:"https://streamtape.com/"}}}}catch(r){}return{url:t}})}function ut(t){return d(this,null,function*(){try{let r=t.includes("/embed/")?t:t.replace(/sendvid\.com\/([a-z0-9]+)/i,"sendvid.com/embed/$1"),e=yield g(r,{headers:{Referer:"https://sendvid.com/"}});if(!e)return{url:t};let s=yield e.text(),i=s.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["|']/)||s.match(/source\s+src=["']([^"']+\.mp4[^"']*)["|']/)||s.match(/<source[^>]+src=["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/)||s.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["|']/)||s.match(/["'](https?:\/\/[^"']+\.mp4[^"']*)["']/);if(i)return{url:i[1],headers:{Referer:"https://sendvid.com/"}}}catch(r){}return{url:t}})}function ft(t){return d(this,null,function*(){try{let r=yield g(t);if(!r)return{url:t};let e=yield r.text();e.includes("p,a,c,k,e,d")&&(e=b(e));let s=e.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||e.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(s){let i=s[1];return i.includes("base64")&&(i=C(i.split(",")[1]||i)),{url:i,headers:{Referer:t}}}}catch(r){}return{url:t}})}function mt(t){return d(this,null,function*(){try{let r=yield g(t);if(!r)return{url:t};let s=(yield r.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(s)return{url:s[1],headers:{Referer:t}}}catch(r){}return{url:t}})}function dt(t){return d(this,null,function*(){var r;try{let e=((r=t.match(/https?:\/\/([^\/]+)/))==null?void 0:r[1])||"dood.to",s=yield g(t);if(!s)return{url:t};let i=yield s.text();i.includes("eval(function(p,a,c,k,e,d)")&&(i=b(i));let n=i.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(n){let c=n[1],a=`https://${e}/pass_md5/${c}`,o=yield fetch(a,{headers:{Referer:t}});if(o.ok){let u=yield o.text(),l=Math.random().toString(36).substring(2,12);return{url:u+l+"?token="+c+"&expiry="+Date.now(),headers:{Referer:`https://${e}/`}}}}}catch(e){}return{url:t}})}function ht(t){return d(this,null,function*(){try{let r=yield g(t,{headers:{Referer:"https://www.myvi.ru/"}});if(!r)return{url:t};let e=yield r.text();e.includes("eval(function(p,a,c,k,e,d)")&&(e=b(e));let s=e.match(/["'](?:file|src|url|stream_url)["']\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/)||e.match(/["'](https?:\/\/[^"']+\.(?:mp4|m3u8)[^"']*)["']/)||e.match(/source\s+src=["']([^"']+\.(?:mp4|m3u8)[^"']*)/);if(s)return{url:s[1],headers:{Referer:"https://www.myvi.ru/"}};let i=t.match(/\/(?:embed\/|watch\/|video\/)([a-zA-Z0-9_-]+)/);if(i){let n=`https://www.myvi.ru/api/video/${i[1]}`,c=yield g(n,{headers:{Referer:t}});if(c){let o=(yield c.text()).match(/["'](?:url|src|file)["']\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(o)return{url:o[1],headers:{Referer:"https://www.myvi.ru/"}}}}}catch(r){}return{url:t}})}function pt(t){return d(this,null,function*(){try{let r=yield g(t);if(!r)return{url:t};let s=(yield r.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(s)return{url:s[1],headers:{Referer:t}}}catch(r){}return{url:t}})}function D(t,r=0){return d(this,null,function*(){var i;if(r>3)return $(w({},t),{isDirect:!1});let e=t.url,s=e.toLowerCase();if(!e||e.includes("google-analytics")||e.includes("doubleclick"))return null;if(s.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!s.includes("html"))return $(w({},t),{isDirect:!0});try{let n=null;if(s.includes("sibnet.ru")?n=yield it(e):s.includes("vidmoly.")?n=yield at(e):s.includes("uqload.")||s.includes("oneupload.")?n=yield ot(e):s.includes("voe.")?n=yield ct(e):s.includes("streamtape.com")||s.includes("stape")?n=yield lt(e):s.includes("dood")||s.includes("ds2play")?n=yield dt(e):s.includes("moonplayer")||s.includes("moon.")?n=yield pt(e):s.includes("sendvid.")?n=yield ut(e):s.includes("myvi.")||s.includes("mytv.")?n=yield ht(e):s.includes("luluvid.")||s.includes("lulu.")?n=yield ft(e):(s.includes("hgcloud.")||s.includes("savefiles."))&&(n=yield mt(e)),n&&n.url!==e)return $(w({},t),{url:n.url,headers:w(w({},t.headers),n.headers||{}),isDirect:!0,originalUrl:e});if(!n||n.url===e){let c=yield g(e,{headers:t.headers});if(c){let a=yield c.text();a.includes("p,a,c,k,e,d")&&(a=b(a));let o=a.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||a.match(/https?:\/\/[^"']+\.mp4[^"']*/)||a.match(/file\s*:\s*["']([^"']+)["']/);if(o){let u=o[1]||o[0];u.startsWith("//")&&(u="https:"+u),u.startsWith("http")&&!u.includes(wt)&&(n={url:u})}if(!n){let u=a.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(u){let l=u[1];if(l.startsWith("//")&&(l="https:"+l),l.startsWith("/")){let m=(i=e.match(/^https?:\/\/[^\/]+/))==null?void 0:i[0];m&&(l=m+l)}if(l.startsWith("http")&&l!==e)return console.log(`[Resolver] Peeling: Found nested iframe -> ${l}`),yield D($(w({},t),{url:l}),r+1)}}}}if(n&&n.url!==e&&n.url.startsWith("http"))return $(w({},t),{url:n.url,headers:w(w({},t.headers),n.headers||{}),isDirect:!0,originalUrl:e})}catch(n){}return $(w({},t),{isDirect:!1})})}var wt="googletagmanager";var gt="https://arm.haglund.dev/api/v2";var yt="https://v3-cinemeta.strem.io";function U(e){return d(this,arguments,function*(t,r={}){try{let s=new AbortController,i=setTimeout(()=>s.abort(),8e3),n=yield fetch(t,$(w({},r),{signal:s.signal}));return clearTimeout(i),n}catch(s){return console.error(`[ArmSync] Fetch failed: ${t}`,s.message),null}})}function L(t,r){return d(this,null,function*(){if(!t)return null;let e=yield U(`${gt}/themoviedb?id=${t}`);if(e)try{let n=yield e.json(),c=Array.isArray(n)?n[0]:n;if(c&&c.imdb)return c.imdb}catch(n){}let s=`https://www.themoviedb.org/${r==="movie"?"movie":"tv"}/${t}`,i=yield U(s);if(i){let c=(yield i.text()).match(/imdb\.com\/title\/(tt\d+)/);if(c)return c[1]}return null})}function W(t,r,e){return d(this,null,function*(){var u;if(!t||r===0)return null;let s=yield U(`${yt}/meta/series/${t}.json`);if(!s)return null;let i=yield s.json();if(!((u=i==null?void 0:i.meta)!=null&&u.videos))return null;let n=i.meta.videos.filter(l=>l.season>0&&l.episode>0).sort((l,m)=>l.season-m.season||l.episode-m.episode),c=[],a=new Set;for(let l of n){let m=`${l.season}-${l.episode}`;a.has(m)||(a.add(m),c.push(l))}let o=c.findIndex(l=>l.season==r&&l.episode==e);if(o!==-1){let l=o+1;return console.log(`[ArmSync] Resolved: S${r}E${e} -> Absolute ${l}`),l}return null})}var I="8265bd1679663a7ea12ac168da84d2e8",N="https://api.themoviedb.org/3";function j(t){return d(this,null,function*(){try{let r=new AbortController,e=setTimeout(()=>r.abort(),8e3),s=yield fetch(t,{headers:{"User-Agent":"Mozilla/5.0",Accept:"application/json"},signal:r.signal});return clearTimeout(e),s.ok?s:null}catch(r){return null}})}function z(t,r){return d(this,null,function*(){var i,n,c,a,o,u;let e=r==="movie"?"movie":"tv",s=[];try{let l=`${N}/${e}/${t}?api_key=${I}&language=en-US`,m=yield j(l);if(m){let p=yield m.json(),y=(i=e==="movie"?p.title:p.name)==null?void 0:i.trim(),v=(n=e==="movie"?p.original_title:p.original_name)==null?void 0:n.trim();y&&s.push(y),v&&v!==y&&/^[\x00-\x7F\u00C0-\u024F\s]+$/.test(v)&&s.push(v)}let h=`${N}/${e}/${t}/translations?api_key=${I}`,f=yield j(h);if(f){let y=((yield f.json()).translations||[]).find(x=>x.iso_639_1==="fr"),v=((a=(c=y==null?void 0:y.data)==null?void 0:c.name)==null?void 0:a.trim())||((u=(o=y==null?void 0:y.data)==null?void 0:o.title)==null?void 0:u.trim());v&&!s.includes(v)&&s.push(v)}}catch(l){console.error(`[Metadata] TMDB API error: ${l.message}`)}return console.log(`[Metadata] Titles for ${t}: ${s.join(" | ")}`),s})}var M="https://animevostfr.org";function vt(t){return d(this,null,function*(){try{let r=yield A(`${M}/?s=${encodeURIComponent(t)}`),e=T.load(r),s=[];e("a").each((u,l)=>{let m=e(l).attr("href")||"",h=e(l).text().trim();m.includes("/animes/")&&h.length>2&&s.push({title:h,url:m})});let i=new Set,n=s.filter(u=>i.has(u.url)?!1:(i.add(u.url),!0));console.log(`[AnimeVOSTFR] Search results: ${n.length}`);let c=u=>u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),a=c(t),o=n.filter(u=>c(u.title).includes(a));return o.length===0&&n.length>0&&(console.log(`[AnimeVOSTFR] No exact match for "${t}", falling back to ${n.length} search results`),o=n),o.length>0&&console.log(`[AnimeVOSTFR] Found ${o.length} matches for ${t}`),o}catch(r){return console.error(`[AnimeVOSTFR] Search error: ${r.message}`),[]}})}function $t(t,r,e,s=!1){return d(this,null,function*(){try{let i=yield A(t),n=T.load(i),c=[];n('a[href*="/episode/"]').each((m,h)=>{let f=n(h).attr("href")||"",p=n(h).text().trim();c.push({url:f,text:p})}),console.log(`[AnimeVOSTFR] Found ${c.length} episode links`);let a=String(e),o=a.padStart(2,"0"),u=[new RegExp(`-${r}-episode-${a}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-${r}-episode-${o}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-saison-${r}-episode-${a}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-saison-${r}-episode-${o}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-episode-${a}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-episode-${o}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-ep-${a}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-ep-${o}(?:-vostfr|-vf|/|$)`,"i")];for(let m of u){let h=c.find(f=>{if(!m.test(f.url))return!1;if(!s){let p=f.url.match(/-(?:saison-)?(\d+)-episode-/i);if(p&&parseInt(p[1])!==r)return!1}return!0});if(h)return console.log(`[AnimeVOSTFR] Found episode in URL: ${h.url}`),h.url}let l=[new RegExp(`^\\s*Episode\\s+${a}\\s*$`,"i"),new RegExp(`^\\s*Ep\\s*${a}\\s*$`,"i"),new RegExp(`(?:^|[^0-9])${a}(?:$|[^0-9])`)];for(let m of l){let h=c.find(f=>{if(!m.test(f.text))return!1;if(!s){let p=f.url.match(/-(?:saison-)?(\d+)-episode-/i);if(p&&parseInt(p[1])!==r)return!1}return!0});if(h)return console.log(`[AnimeVOSTFR] Found episode in text: ${h.url}`),h.url}return null}catch(i){return console.error(`[AnimeVOSTFR] Error finding episode: ${i.message}`),null}})}function xt(t){return d(this,null,function*(){let r=[];try{let e=yield A(t),s=T.load(e),i={};s(".TPlayerNv li").each((c,a)=>{let o=s(a).attr("data-tplayernv")||s(a).attr("id")||`Opt${c+1}`;i[o]=s(a).text().trim()||`Lecteur ${c+1}`});let n=[];s(".TPlayerTb, .TPlayer .TPlayerTb").each((c,a)=>{let o=s(a).attr("id")||`Opt${c+1}`,u=i[o]||`Lecteur ${c+1}`,l=s(a).find("iframe"),m=s(a).find(".lazy-player, [data-src]"),h=null;l.length&&l.attr("src")?h=l.attr("src"):m.length&&m.attr("data-src")&&(h=m.attr("data-src")),h&&n.push({src:h,serverName:u})}),n.length===0&&s('iframe[src*="trembed"]').each((c,a)=>{let o=s(a).attr("src");o&&n.push({src:o,serverName:`Lecteur ${c+1}`})}),console.log(`[AnimeVOSTFR] Found ${n.length} player tabs`);for(let c of n)try{let a=c.src;if(a.startsWith("/")?a=M+a:a.startsWith("?")&&(a=M+"/"+a),!a.startsWith("http"))continue;let o=yield A(a,{headers:{Referer:t}}),u=T.load(o),l=u("iframe").first().attr("src")||u("[data-src]").first().attr("data-src");if(!l){let m=o.match(/(?:src|href)=["'](https?:\/\/(?!animevostfr)[^"']+)["']/i);m&&(l=m[1])}if(l&&l.startsWith("http")){let m=Rt(l),h=yield D({name:"AnimeVOSTFR",title:`${m} (${c.serverName})`,url:l,quality:"HD",headers:{Referer:M}});h&&r.push(h)}}catch(a){console.error(`[AnimeVOSTFR] Failed to resolve player "${c.serverName}": ${a.message}`)}}catch(e){console.error(`[AnimeVOSTFR] Error extracting players: ${e.message}`)}return r})}function Rt(t){return t.includes("sibnet")?"Sibnet":t.includes("vidmoly")?"Vidmoly":t.includes("christopheruntilpoint")||t.includes("voe")?"Voe":t.includes("luluvid")?"Luluvid":t.includes("savefiles")?"Savefiles":t.includes("uqload")||t.includes("oneupload")?"Uqload":t.includes("hgcloud")?"HGCloud":t.includes("dood")||t.includes("ds2play")?"Doodstream":t.includes("myvi")||t.includes("mytv")?"MyVi":t.includes("sendvid")?"Sendvid":t.includes("stape")||t.includes("streamtape")?"Streamtape":t.includes("moon")?"Moon":"Player"}function H(t,r,e,s){return d(this,null,function*(){let i=yield z(t,r);if(i.length===0)return[];let n=f=>/[àâéèêëîïôùûüçœæ']/i.test(f),c=[...i.filter(n),...i.filter(f=>!n(f))],a=[s];try{let f=yield L(t,r);if(f){let p=yield W(f,e,s);p&&p!==s&&a.push(p)}}catch(f){console.warn(`[AnimeVOSTFR] ArmSync failed: ${f.message}`)}let o=[];for(let f of c)if(o=yield vt(f),o&&o.length>0)break;if(!o||o.length===0)return[];o=o.sort((f,p)=>{let y=f.title.toLowerCase(),v=p.title.toLowerCase(),x=`saison ${e}`,R=y.includes(x),E=v.includes(x);return R&&!E?-1:!R&&E?1:0});let u=[],l=new Set,m=new Set;for(let f of o){if(m.has(f.url))continue;m.add(f.url);let p=f.title.toLowerCase(),v=p.includes(" vf")||f.url.includes("vf")?"VF":"VOSTFR",x=p.match(/saison\s*(\d+)/);if(!(x&&parseInt(x[1])!==e&&a.length===1))for(let R of a){let E=R!==s,F=yield $t(f.url,e,R,E);if(F&&!l.has(F)){l.add(F);let V=yield xt(F),B=R===s?"":` (Abs ${R})`;V.forEach(k=>{k.name.includes("(")||(k.name=`AnimeVOSTFR (${v})`),k.title=`${k.title}${B}`}),u.push(...V)}}}u.length===0&&console.warn(`[AnimeVOSTFR] Episode S${e}E${s} not found (targets: ${a.join(", ")})`);let h=u.filter(f=>f&&f.isDirect);return console.log(`[AnimeVOSTFR] Total streams found: ${h.length}`),h})}function bt(t,r,e,s){return d(this,null,function*(){console.log(`[AnimeVOSTFR] Request: ${r} ${t} S${e}E${s}`);try{return yield H(t,r,e,s)}catch(i){return console.error("[AnimeVOSTFR] Error:",i),[]}})}
