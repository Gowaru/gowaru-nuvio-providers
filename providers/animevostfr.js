/**
 * animevostfr - Built from src/animevostfr/
 * Generated: 2026-02-24T23:41:22.992Z
 */
var R=Object.create;var g=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,V=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var y=(e,r,t)=>r in e?g(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,$=(e,r)=>{for(var t in r||(r={}))F.call(r,t)&&y(e,t,r[t]);if(T)for(var t of T(r))O.call(r,t)&&y(e,t,r[t]);return e};var b=(e,r)=>{for(var t in r)g(e,t,{get:r[t],enumerable:!0})},v=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of x(r))!F.call(e,o)&&o!==t&&g(e,o,{get:()=>r[o],enumerable:!(i=w(r,o))||i.enumerable});return e};var E=(e,r,t)=>(t=e!=null?R(V(e)):{},v(r||!e||!e.__esModule?g(t,"default",{value:e,enumerable:!0}):t,e)),q=e=>v(g({},"__esModule",{value:!0}),e);var d=(e,r,t)=>new Promise((i,o)=>{var n=s=>{try{l(t.next(s))}catch(a){o(a)}},c=s=>{try{l(t.throw(s))}catch(a){o(a)}},l=s=>s.done?i(s.value):Promise.resolve(s.value).then(n,c);l((t=t.apply(e,r)).next())});var H={};b(H,{getStreams:()=>P});module.exports=q(H);var U={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function h(t){return d(this,arguments,function*(e,r={}){console.log(`[AnimeVOSTFR] Fetching: ${e}`);let i=yield fetch(e,$({headers:$($({},U),r.headers)},r));if(!i.ok)throw new Error(`HTTP error ${i.status} for ${e}`);return yield i.text()})}var p=E(require("cheerio-without-node-native"));var S="https://animevostfr.org";function L(e,r){return d(this,null,function*(){try{let t=`https://www.themoviedb.org/${r==="movie"?"movie":"tv"}/${e}?language=en-US`,i=yield h(t),o=p.default.load(i),n=o('meta[property="og:title"]').attr("content")||o("h1").first().text()||o("h2").first().text();return n&&n.includes(" (")&&(n=n.split(" (")[0]),n&&n.includes(" - ")&&(n=n.split(" - ")[0]),n=n?n.trim():null,console.log(`[AnimeVOSTFR] TMDB Title found: ${n}`),n}catch(t){return console.error(`[AnimeVOSTFR] Failed to get title from TMDB: ${t.message}`),null}})}function C(e){return d(this,null,function*(){try{let r=yield h(`${S}/?s=${encodeURIComponent(e)}`),t=p.default.load(r),i=[];t("a").each((a,u)=>{let m=t(u).attr("href")||"",f=t(u).text().trim();m.includes("/animes/")&&f.length>2&&i.push({title:f,url:m})});let o=new Set,n=i.filter(a=>o.has(a.url)?!1:(o.add(a.url),!0));console.log(`[AnimeVOSTFR] Search results: ${n.length}`);let c=a=>a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),l=c(e),s=n.find(a=>c(a.title).includes(l)&&(a.url.includes("vostfr")||a.url.includes("voir-")));return s||(s=n.find(a=>c(a.title).includes(l))),!s&&n.length>0&&(s=n[0]),s&&console.log(`[AnimeVOSTFR] Selected: ${s.title} -> ${s.url}`),s||null}catch(r){return console.error(`[AnimeVOSTFR] Search error: ${r.message}`),null}})}function k(e,r,t){return d(this,null,function*(){try{let i=yield h(e),o=p.default.load(i),n=[];o('a[href*="/episode/"]').each((a,u)=>{let m=o(u).attr("href")||"",f=o(u).text().trim();n.push({url:m,text:f})}),console.log(`[AnimeVOSTFR] Found ${n.length} episode links`);let c=[`episode-${t}/`,`episode-${t}`,`saison-${r}-episode-${t}`,`-${r}-episode-${t}`];for(let a of c){let u=n.find(m=>m.url.includes(a));if(u)return console.log(`[AnimeVOSTFR] Found episode: ${u.url}`),u.url}let l=String(t).padStart(1,"0"),s=n.find(a=>{let u=a.url.toLowerCase();return u.includes(`episode-${l}/`)||u.includes(`episode-${l}`)});return s?(console.log(`[AnimeVOSTFR] Found episode (fallback): ${s.url}`),s.url):null}catch(i){return console.error(`[AnimeVOSTFR] Error finding episode: ${i.message}`),null}})}function D(e){return d(this,null,function*(){let r=[];try{let t=yield h(e),i=p.default.load(t),o=[];i(".TPlayerNv li").each((c,l)=>{o.push(i(l).text().trim())});let n=[];i(".TPlayerTb").each((c,l)=>{let s=i(l).find("iframe"),a=i(l).find(".lazy-player");s.length&&s.attr("src")?n.push(s.attr("src")):a.length&&a.attr("data-src")&&n.push(a.attr("data-src"))}),console.log(`[AnimeVOSTFR] Found ${n.length} player tabs`);for(let c=0;c<n.length;c++)try{let l=n[c];l.startsWith("/")&&(l=S+l);let s=yield h(l),u=p.default.load(s)("iframe").attr("src");if(u&&u.startsWith("http")){let m=o[c]||`Lecteur ${c+1}`,f=N(u);r.push({name:"AnimeVOSTFR",title:`${f} (${m})`,url:u,quality:"HD",headers:{Referer:S}})}}catch(l){console.error(`[AnimeVOSTFR] Failed to resolve player ${c}: ${l.message}`)}}catch(t){console.error(`[AnimeVOSTFR] Error extracting players: ${t.message}`)}return r})}function N(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("myvi")?"MyVi":e.includes("sendvid")?"Sendvid":"Player"}function A(e,r,t,i){return d(this,null,function*(){let o=yield L(e,r);if(!o)return[];let n=yield C(o);if(!n)return[];let c=yield k(n.url,t,i);if(!c)return console.warn(`[AnimeVOSTFR] Episode S${t}E${i} not found`),[];let l=yield D(c);return console.log(`[AnimeVOSTFR] Total streams found: ${l.length}`),l})}function P(e,r,t,i){return d(this,null,function*(){console.log(`[AnimeVOSTFR] Request: ${r} ${e} S${t}E${i}`);try{return yield A(e,r,t,i)}catch(o){return console.error("[AnimeVOSTFR] Error:",o),[]}})}
