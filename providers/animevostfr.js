/**
 * animevostfr - Built from src/animevostfr/
 * Generated: 2026-02-25T10:36:17.664Z
 */
var V=Object.create;var v=Object.defineProperty,q=Object.defineProperties,U=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,$=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var S=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))T.call(t,n)&&S(e,n,t[n]);if($)for(var n of $(t))k.call(t,n)&&S(e,n,t[n]);return e},y=(e,t)=>q(e,O(t));var C=(e,t)=>{for(var n in t)v(e,n,{get:t[n],enumerable:!0})},b=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of E(t))!T.call(e,r)&&r!==n&&v(e,r,{get:()=>t[r],enumerable:!(s=U(t,r))||s.enumerable});return e};var D=(e,t,n)=>(n=e!=null?V(L(e)):{},b(t||!e||!e.__esModule?v(n,"default",{value:e,enumerable:!0}):n,e)),W=e=>b(v({},"__esModule",{value:!0}),e);var c=(e,t,n)=>new Promise((s,r)=>{var i=o=>{try{l(n.next(o))}catch(a){r(a)}},u=o=>{try{l(n.throw(o))}catch(a){r(a)}},l=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,u);l((n=n.apply(e,t)).next())});var re={};C(re,{getStreams:()=>se});module.exports=W(re);var M={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function w(n){return c(this,arguments,function*(e,t={}){console.log(`[AnimeVOSTFR] Fetching: ${e}`);let s=yield fetch(e,d({headers:d(d({},M),t.headers)},t));if(!s.ok)throw new Error(`HTTP error ${s.status} for ${e}`);return yield s.text()})}var g=D(require("cheerio"));var H={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7"};function f(n){return c(this,arguments,function*(e,t={}){try{let s=new AbortController,r=setTimeout(()=>s.abort(),1e4),i=yield fetch(e,y(d({},t),{headers:d(d({},H),t.headers),signal:s.signal}));return clearTimeout(r),i}catch(s){return console.error(`[Resolver] Fetch failed for ${e}: ${s.message}`),null}})}function N(e){return c(this,null,function*(){let t=yield f(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!t)return e;let n=yield t.text(),s=n.match(/"url"\s*:\s*"([^"]+\.mp4)"/)||n.match(/src\s*:\s*"([^"]+\.mp4)"/)||n.match(/player\.setVideo\(\s*\{\s*"url"\s*:\s*"([^"]+)"/);if(s){let r=s[1];return r.startsWith("//")?r=`https:${r}`:r.startsWith("/")&&(r=`https://video.sibnet.ru${r}`),r}return e})}function P(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let s=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return s?s[1]:e})}function z(e){return c(this,null,function*(){let t=yield f(e,{headers:{Referer:"https://uqload.com/"}});if(!t)return e;let n=yield t.text(),s=n.match(/sources\s*:\s*\["([^"]+)"\]/)||n.match(/src\s*:\s*"([^"]+\.(?:mp4|m3u8))"/);return s?s[1]:e})}function K(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let n=yield t.text(),s=n.match(/'hls'\s*:\s*'([^']+)'/)||n.match(/"hls"\s*:\s*"([^"]+)"/)||n.match(/window\.location\.href\s*=\s*'([^']+)'/);if(s){let r=s[1];if(r.includes("base64"))try{let i=r.split(",")[1]||r;typeof atob!="undefined"&&(r=atob(i))}catch(i){}return r}return e})}function B(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let n=yield t.text(),s=n.match(/sources\s*:\s*\[\s*\{\s*"file"\s*:\s*"([^"]+)"/i)||n.match(/file\s*:\s*"([^"]+)"/i);return s?s[1]:e})}function G(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let n=yield t.text(),s=n.match(/file\s*:\s*"([^"]+)"/i)||n.match(/source\s*:\s*"([^"]+)"/i);return s?s[1]:e})}function _(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let n=yield t.text(),s=n.match(/file\s*:\s*"([^"]+)"/i)||n.match(/src\s*:\s*"([^"]+\.(?:mp4|m3u8))"/i);return s?s[1]:e})}function j(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let s=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return s?s[1]:e})}function I(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let s=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return s?s[1]:e})}function J(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let n=yield t.text(),s=n.match(/robotlink\.innerHTML\s*=\s*'([^']+)'/);if(s){let i=s[1];return i.startsWith("//")&&(i=`https:${i}`),i}return n.match(/video_link\s*:\s*"([^"]+)"/)?s[2]:e})}function Q(e){return c(this,null,function*(){let t=yield f(e);if(!t)return e;let n=yield t.text(),s=n.match(/source\s+src="([^"]+\.mp4)"/i)||n.match(/video_source\s*:\s*"([^"]+)"/);return s?s[1]:e})}function X(e){return c(this,null,function*(){let t=e.replace("/e/","/d/"),n=yield f(t);if(!n)return e;let r=(yield n.text()).match(/window\.open\('([^']+)'\)/);return r?r[1]:e})}function R(e){return c(this,null,function*(){let t=e.url,n=t.toLowerCase();if(n.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/))return y(d({},e),{isDirect:!0});try{let s=t,r=d({},e.headers);if(n.includes("sibnet.ru")?(s=yield N(t),r.Referer="https://video.sibnet.ru/"):n.includes("vidmoly.")?(s=yield P(t),r.Referer="https://vidmoly.to/"):n.includes("uqload.")?(s=yield z(t),r.Referer="https://uqload.com/"):n.includes("voe.sx")||n.includes("christopheruntilpoint")?s=yield K(t):n.includes("moonplayer")||n.includes("moonembed")?s=yield B(t):n.includes("mytv")||n.includes("mycloud")||n.includes("mclls.net")?s=yield G(t):n.includes("fhd")||n.includes("fhd1")?s=yield _(t):n.includes("upstream.")?s=yield j(t):n.includes("vido.")||n.includes("vidlo.")?s=yield I(t):n.includes("streamtape.com")?s=yield J(t):n.includes("sendvid.com")?s=yield Q(t):(n.includes("dood")||n.includes("ds2play")||n.includes("viddood"))&&(s=yield X(t)),s!==t&&s.startsWith("http"))return console.log(`[Resolver] Success: ${t.substring(0,30)}... -> ${s.substring(0,30)}...`),y(d({},e),{url:s,isDirect:!0,headers:r,originalUrl:t})}catch(s){console.error(`[Resolver] Failed for ${t}:`,s)}return y(d({},e),{isDirect:!1})})}var x="https://animevostfr.org";function Y(e,t){return c(this,null,function*(){try{let n=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}?language=en-US`,s=yield w(n),r=g.default.load(s),i=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return i&&i.includes(" (")&&(i=i.split(" (")[0]),i&&i.includes(" - ")&&(i=i.split(" - ")[0]),i=i?i.trim():null,console.log(`[AnimeVOSTFR] TMDB Title found: ${i}`),i}catch(n){return console.error(`[AnimeVOSTFR] Failed to get title from TMDB: ${n.message}`),null}})}function Z(e){return c(this,null,function*(){try{let t=yield w(`${x}/?s=${encodeURIComponent(e)}`),n=g.default.load(t),s=[];n("a").each((a,m)=>{let h=n(m).attr("href")||"",p=n(m).text().trim();h.includes("/animes/")&&p.length>2&&s.push({title:p,url:h})});let r=new Set,i=s.filter(a=>r.has(a.url)?!1:(r.add(a.url),!0));console.log(`[AnimeVOSTFR] Search results: ${i.length}`);let u=a=>a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),l=u(e),o=i.find(a=>u(a.title).includes(l)&&(a.url.includes("vostfr")||a.url.includes("voir-")));return o||(o=i.find(a=>u(a.title).includes(l))),!o&&i.length>0&&(o=i[0]),o&&console.log(`[AnimeVOSTFR] Selected: ${o.title} -> ${o.url}`),o||null}catch(t){return console.error(`[AnimeVOSTFR] Search error: ${t.message}`),null}})}function ee(e,t,n){return c(this,null,function*(){try{let s=yield w(e),r=g.default.load(s),i=[];r('a[href*="/episode/"]').each((a,m)=>{let h=r(m).attr("href")||"",p=r(m).text().trim();i.push({url:h,text:p})}),console.log(`[AnimeVOSTFR] Found ${i.length} episode links`);let u=[`episode-${n}/`,`episode-${n}`,`saison-${t}-episode-${n}`,`-${t}-episode-${n}`];for(let a of u){let m=i.find(h=>h.url.includes(a));if(m)return console.log(`[AnimeVOSTFR] Found episode: ${m.url}`),m.url}let l=String(n).padStart(1,"0"),o=i.find(a=>{let m=a.url.toLowerCase();return m.includes(`episode-${l}/`)||m.includes(`episode-${l}`)});return o?(console.log(`[AnimeVOSTFR] Found episode (fallback): ${o.url}`),o.url):null}catch(s){return console.error(`[AnimeVOSTFR] Error finding episode: ${s.message}`),null}})}function te(e){return c(this,null,function*(){let t=[];try{let n=yield w(e),s=g.default.load(n),r=[];s(".TPlayerNv li").each((u,l)=>{r.push(s(l).text().trim())});let i=[];s(".TPlayerTb").each((u,l)=>{let o=s(l).find("iframe"),a=s(l).find(".lazy-player");o.length&&o.attr("src")?i.push(o.attr("src")):a.length&&a.attr("data-src")&&i.push(a.attr("data-src"))}),console.log(`[AnimeVOSTFR] Found ${i.length} player tabs`);for(let u=0;u<i.length;u++)try{let l=i[u];l.startsWith("/")&&(l=x+l);let o=yield w(l),m=g.default.load(o)("iframe").attr("src");if(m&&m.startsWith("http")){let h=r[u]||`Lecteur ${u+1}`,p=ne(m),A=yield R({name:"AnimeVOSTFR",title:`${p} (${h})`,url:m,quality:"HD",headers:{Referer:x}});t.push(A)}}catch(l){console.error(`[AnimeVOSTFR] Failed to resolve player ${u}: ${l.message}`)}}catch(n){console.error(`[AnimeVOSTFR] Error extracting players: ${n.message}`)}return t})}function ne(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("myvi")?"MyVi":e.includes("sendvid")?"Sendvid":"Player"}function F(e,t,n,s){return c(this,null,function*(){let r=yield Y(e,t);if(!r)return[];let i=yield Z(r);if(!i)return[];let u=yield ee(i.url,n,s);if(!u)return console.warn(`[AnimeVOSTFR] Episode S${n}E${s} not found`),[];let l=yield te(u);return console.log(`[AnimeVOSTFR] Total streams found: ${l.length}`),l})}function se(e,t,n,s){return c(this,null,function*(){console.log(`[AnimeVOSTFR] Request: ${t} ${e} S${n}E${s}`);try{return yield F(e,t,n,s)}catch(r){return console.error("[AnimeVOSTFR] Error:",r),[]}})}
