/**
 * animevostfr - Built from src/animevostfr/
 * Generated: 2026-02-25T11:06:32.916Z
 */
var _=Object.create;var $=Object.defineProperty,z=Object.defineProperties,I=Object.getOwnPropertyDescriptor,K=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertyNames,q=Object.getOwnPropertySymbols,G=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var M=(e,s,t)=>s in e?$(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,h=(e,s)=>{for(var t in s||(s={}))U.call(s,t)&&M(e,t,s[t]);if(q)for(var t of q(s))J.call(s,t)&&M(e,t,s[t]);return e},w=(e,s)=>z(e,K(s));var Q=(e,s)=>{for(var t in s)$(e,t,{get:s[t],enumerable:!0})},O=(e,s,t,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of B(s))!U.call(e,r)&&r!==t&&$(e,r,{get:()=>s[r],enumerable:!(n=I(s,r))||n.enumerable});return e};var X=(e,s,t)=>(t=e!=null?_(G(e)):{},O(s||!e||!e.__esModule?$(t,"default",{value:e,enumerable:!0}):t,e)),Y=e=>O($({},"__esModule",{value:!0}),e);var m=(e,s,t)=>new Promise((n,r)=>{var i=a=>{try{c(t.next(a))}catch(o){r(o)}},u=a=>{try{c(t.throw(a))}catch(o){r(o)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,u);c((t=t.apply(e,s)).next())});var ge={};Q(ge,{getStreams:()=>we});module.exports=Y(ge);var Z={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function g(t){return m(this,arguments,function*(e,s={}){console.log(`[AnimeVOSTFR] Fetching: ${e}`);let n=yield fetch(e,h({headers:h(h({},Z),s.headers)},s));if(!n.ok)throw new Error(`HTTP error ${n.status} for ${e}`);return yield n.text()})}var y=X(require("cheerio"));var ee={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7"};function p(t){return m(this,arguments,function*(e,s={}){try{let n=new AbortController,r=setTimeout(()=>n.abort(),12e3),i=yield fetch(e,w(h({},s),{headers:h(h({},ee),s.headers),signal:n.signal}));return clearTimeout(r),i}catch(n){return console.error(`[Resolver] Fetch failed for ${e}: ${n.message}`),null}})}function te(e){return m(this,null,function*(){let s=yield p(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!s)return e;let t=yield s.text(),n=t.match(/"url"\s*:\s*"([^"]+\.mp4)"/)||t.match(/src\s*:\s*"([^"]+\.mp4)"/)||t.match(/player\.setVideo\(\s*\{\s*"url"\s*:\s*"([^"]+)"/);if(n){let r=n[1];return r.startsWith("//")?r=`https:${r}`:r.startsWith("/")&&(r=`https://video.sibnet.ru${r}`),r}return e})}function b(e){return m(this,null,function*(){let s=yield p(e,{headers:{Referer:"https://vidmoly.to/"}});if(!s)return e;let t=yield s.text(),n=t.match(/file\s*:\s*"([^"]+\.m3u8)"/)||t.match(/file\s*:\s*"([^"]+\.mp4)"/)||t.match(/sources\s*:\s*\[\s*\{\s*file\s*:\s*"([^"]+)"/);return n?n[1]:e})}function se(e){return m(this,null,function*(){let s=yield p(e,{headers:{Referer:"https://uqload.com/"}});if(!s)return e;let t=yield s.text(),n=t.match(/sources\s*:\s*\["([^"]+\.(?:mp4|m3u8))"\]/)||t.match(/src\s*:\s*"([^"]+\.(?:mp4|m3u8))"/)||t.match(/file\s*:\s*"([^"]+\.(?:mp4|m3u8))"/);return n?n[1]:e})}function ne(e){return m(this,null,function*(){let s=yield p(e);if(!s)return e;let t=yield s.text(),n=t.match(/'hls'\s*:\s*'([^']+)'/)||t.match(/"hls"\s*:\s*"([^"]+)"/)||t.match(/window\.location\.href\s*=\s*'([^']+)'/);if(n){let r=n[1];if(r.includes("base64"))try{let i=r.split(",")[1]||r;typeof atob=="function"&&(r=atob(i))}catch(i){}return r}return e})}function re(e){return m(this,null,function*(){let s=yield p(e);if(!s)return e;let t=yield s.text(),n=t.match(/sources\s*:\s*\[\s*\{\s*"file"\s*:\s*"([^"]+)"/i)||t.match(/file\s*:\s*"([^"]+)"/i)||t.match(/src\s*:\s*"([^"]+\.m3u8)"/i);return n?n[1]:e})}function ie(e){return m(this,null,function*(){let s=yield p(e);if(!s)return e;let t=yield s.text(),n=t.match(/file\s*:\s*"([^"]+)"/i)||t.match(/source\s*:\s*"([^"]+)"/i)||t.match(/video\s+src="([^"]+)"/i);return n?n[1]:e})}function oe(e){return m(this,null,function*(){let s=yield p(e);if(!s)return e;let t=yield s.text(),n=t.match(/file\s*:\s*"([^"]+)"/i)||t.match(/src\s*:\s*"([^"]+\.(?:mp4|m3u8|mkv))"/i);return n?n[1]:e})}function ae(e){return m(this,null,function*(){let s=yield p(e);if(!s)return e;let t=yield s.text(),n=t.match(/robotlink\.innerHTML\s*=\s*'([^']+)'\s*\+\s*'([^']+)'/);if(n)return`https:${n[1]}${n[2].substring(3)}`;let r=t.match(/id="robotlink">([^<]+)/);return r?`https:${r[1]}`:e})}function ce(e){return m(this,null,function*(){let s=yield p(e);if(!s)return e;let t=yield s.text(),n=t.match(/source\s+src="([^"]+\.mp4)"/i)||t.match(/video_source\s*:\s*"([^"]+)"/);return n?n[1]:e})}function le(e){return m(this,null,function*(){let s="https://dood.to",t=yield p(e,{headers:{Referer:s}});if(!t)return e;let n=yield t.text(),r=n.match(/\$.get\('\/pass_md5\/([^']+)'/);if(r){let u=`${s}/pass_md5/${r[1]}`,c=yield p(u,{headers:{Referer:e}});if(c)return`${yield c.text()}z72899?token=${r[1]}&expiry=${Date.now()}`}let i=n.match(/window\.open\('([^']+)'\)/);return i?i[1]:e})}function k(e){return m(this,null,function*(){let s=e.url,t=s.toLowerCase();if(t.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/))return w(h({},e),{isDirect:!0});try{let n=s,r=h({},e.headers);if(t.includes("sibnet.ru")?(n=yield te(s),r.Referer="https://video.sibnet.ru/"):t.includes("vidmoly.")?(n=yield b(s),r.Referer="https://vidmoly.to/"):t.includes("uqload.")?(n=yield se(s),r.Referer="https://uqload.com/"):t.includes("voe.sx")||t.includes("christopheruntilpoint")?n=yield ne(s):t.includes("moonplayer")||t.includes("moonembed")?n=yield re(s):t.includes("mytv")||t.includes("mycloud")||t.includes("mclls.net")?(n=yield ie(s),r.Referer="https://mycloud.cc/"):t.includes("fhd")||t.includes("fhd1")?n=yield oe(s):t.includes("upstream.")?n=yield b(s):t.includes("vido.")||t.includes("vidlo.")?n=yield b(s):t.includes("streamtape.com")?n=yield ae(s):t.includes("sendvid.com")?n=yield ce(s):(t.includes("dood")||t.includes("ds2play")||t.includes("viddood"))&&(n=yield le(s)),n!==s&&n.startsWith("http"))return console.log(`[Resolver] Success: ${s.substring(0,30)}... -> ${n.substring(0,30)}...`),w(h({},e),{url:n,isDirect:!0,headers:r,originalUrl:s})}catch(n){console.error(`[Resolver] Failed for ${s}:`,n)}return w(h({},e),{isDirect:!1})})}var L="https://arm.haglund.dev/api/v2",C="https://api.jikan.moe/v4",ue="https://v3-cinemeta.strem.io";function v(t){return m(this,arguments,function*(e,s={}){try{let n=new AbortController,r=setTimeout(()=>n.abort(),8e3),i=yield fetch(e,w(h({},s),{signal:n.signal}));return clearTimeout(r),i}catch(n){return console.error(`[ArmSync] Fetch failed: ${e}`,n.message),null}})}function P(e,s){return m(this,null,function*(){if(!e)return null;let t=yield v(`${L}/themoviedb?id=${e}`);if(t){let n=yield t.json(),r=Array.isArray(n)?n[0]:n;if(r&&r.imdb)return r.imdb}return null})}function W(e,s,t){return m(this,null,function*(){var c,a,o;if(!e)return null;let n=s===0||s===void 0?"movie":"series",r=yield v(`${ue}/meta/${n}/${e}.json`);if(!r)return null;let i=yield r.json();if(n==="movie")return((a=(c=i==null?void 0:i.meta)==null?void 0:c.released)==null?void 0:a.split("T")[0])||null;if(!((o=i==null?void 0:i.meta)!=null&&o.videos))return null;let u=i.meta.videos.find(l=>l.season==s&&l.episode==t);return u&&u.released?u.released.split("T")[0]:null})}function H(e,s){return m(this,null,function*(){var i,u,c,a;if(!e||!s)return null;let t=yield v(`${L}/imdb?id=${e}`);if(!t)return null;let n=yield t.json();if(!Array.isArray(n))return null;let r=new Date(s);for(let o of n){let l=o.myanimelist;if(!l)continue;let f=yield v(`${C}/anime/${l}`);if(!f)continue;let d=(i=yield f.json())==null?void 0:i.data;if(!d)continue;let x=(u=d.aired)!=null&&u.from?new Date(d.aired.from):null,T=(c=d.aired)!=null&&c.to?new Date(d.aired.to):null;if(x){let S=new Date(x);S.setDate(S.getDate()-2);let A=T?new Date(T):new Date;if(A.setDate(A.getDate()+2),r>=S&&r<=A){if(d.type==="Movie"||d.episodes===1)return{malId:l,absoluteEpisode:1,type:d.type};let F=yield v(`${C}/anime/${l}/episodes`);if(F){let D=(a=yield F.json())==null?void 0:a.data;if(Array.isArray(D)){let V=D.find(E=>{if(!E.aired)return!1;let j=new Date(E.aired);return Math.abs(r-j)/(1e3*60*60*24)<=2});if(V)return{malId:l,absoluteEpisode:V.mal_id,title:d.title,animeType:d.type}}}return{malId:l,absoluteEpisode:null,potentialMatch:!0}}}}return null})}var R="https://animevostfr.org";function me(e,s){return m(this,null,function*(){try{let t=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${e}?language=en-US`,n=yield g(t),r=y.default.load(n),i=r('meta[property="og:title"]').attr("content")||r("h1").first().text()||r("h2").first().text();return i&&i.includes(" (")&&(i=i.split(" (")[0]),i&&i.includes(" - ")&&(i=i.split(" - ")[0]),i=i?i.trim():null,console.log(`[AnimeVOSTFR] TMDB Title found: ${i}`),i}catch(t){return console.error(`[AnimeVOSTFR] Failed to get title from TMDB: ${t.message}`),null}})}function fe(e){return m(this,null,function*(){try{let s=yield g(`${R}/?s=${encodeURIComponent(e)}`),t=y.default.load(s),n=[];t("a").each((o,l)=>{let f=t(l).attr("href")||"",d=t(l).text().trim();f.includes("/animes/")&&d.length>2&&n.push({title:d,url:f})});let r=new Set,i=n.filter(o=>r.has(o.url)?!1:(r.add(o.url),!0));console.log(`[AnimeVOSTFR] Search results: ${i.length}`);let u=o=>o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),c=u(e),a=i.find(o=>u(o.title).includes(c)&&(o.url.includes("vostfr")||o.url.includes("voir-")));return a||(a=i.find(o=>u(o.title).includes(c))),!a&&i.length>0&&(a=i[0]),a&&console.log(`[AnimeVOSTFR] Selected: ${a.title} -> ${a.url}`),a||null}catch(s){return console.error(`[AnimeVOSTFR] Search error: ${s.message}`),null}})}function de(e,s,t){return m(this,null,function*(){try{let n=yield g(e),r=y.default.load(n),i=[];r('a[href*="/episode/"]').each((o,l)=>{let f=r(l).attr("href")||"",d=r(l).text().trim();i.push({url:f,text:d})}),console.log(`[AnimeVOSTFR] Found ${i.length} episode links`);let u=[`episode-${t}/`,`episode-${t}`,`saison-${s}-episode-${t}`,`-${s}-episode-${t}`];for(let o of u){let l=i.find(f=>f.url.includes(o));if(l)return console.log(`[AnimeVOSTFR] Found episode: ${l.url}`),l.url}let c=String(t).padStart(1,"0"),a=i.find(o=>{let l=o.url.toLowerCase();return l.includes(`episode-${c}/`)||l.includes(`episode-${c}`)});return a?(console.log(`[AnimeVOSTFR] Found episode (fallback): ${a.url}`),a.url):null}catch(n){return console.error(`[AnimeVOSTFR] Error finding episode: ${n.message}`),null}})}function he(e){return m(this,null,function*(){let s=[];try{let t=yield g(e),n=y.default.load(t),r=[];n(".TPlayerNv li").each((u,c)=>{r.push(n(c).text().trim())});let i=[];n(".TPlayerTb").each((u,c)=>{let a=n(c).find("iframe"),o=n(c).find(".lazy-player");a.length&&a.attr("src")?i.push(a.attr("src")):o.length&&o.attr("data-src")&&i.push(o.attr("data-src"))}),console.log(`[AnimeVOSTFR] Found ${i.length} player tabs`);for(let u=0;u<i.length;u++)try{let c=i[u];c.startsWith("/")&&(c=R+c);let a=yield g(c),l=y.default.load(a)("iframe").attr("src");if(l&&l.startsWith("http")){let f=r[u]||`Lecteur ${u+1}`,d=pe(l),x=yield k({name:"AnimeVOSTFR",title:`${d} (${f})`,url:l,quality:"HD",headers:{Referer:R}});s.push(x)}}catch(c){console.error(`[AnimeVOSTFR] Failed to resolve player ${u}: ${c.message}`)}}catch(t){console.error(`[AnimeVOSTFR] Error extracting players: ${t.message}`)}return s})}function pe(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("myvi")?"MyVi":e.includes("sendvid")?"Sendvid":"Player"}function N(e,s,t,n){return m(this,null,function*(){let r=yield me(e,s);if(!r)return[];let i=[n];try{let o=yield P(e,s);if(o){let l=yield W(o,t,n);if(l){let f=yield H(o,l);f&&f.absoluteEpisode&&(console.log(`[AnimeVOSTFR] ArmSync: S${t}E${n} -> Absolute ${f.absoluteEpisode}`),i.push(f.absoluteEpisode))}}}catch(o){console.warn(`[AnimeVOSTFR] ArmSync failed: ${o.message}`)}let u=yield fe(r);if(!u)return[];let c=[],a=new Set;for(let o of i){let l=yield de(u.url,t,o);if(l&&!a.has(l)){a.add(l);let f=yield he(l);c.push(...f)}}return c.length===0&&console.warn(`[AnimeVOSTFR] Episode S${t}E${n} not found (targets: ${i.join(", ")})`),console.log(`[AnimeVOSTFR] Total streams found: ${c.length}`),c})}function we(e,s,t,n){return m(this,null,function*(){console.log(`[AnimeVOSTFR] Request: ${s} ${e} S${t}E${n}`);try{return yield N(e,s,t,n)}catch(r){return console.error("[AnimeVOSTFR] Error:",r),[]}})}
