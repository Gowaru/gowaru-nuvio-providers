/**
 * animevostfr - Built from src/animevostfr/
 * Generated: 2026-02-25T21:06:41.827Z
 */
var N=Object.create;var R=Object.defineProperty,I=Object.defineProperties,_=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,B=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var U=(e,s,t)=>s in e?R(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,h=(e,s)=>{for(var t in s||(s={}))M.call(s,t)&&U(e,t,s[t]);if(V)for(var t of V(s))z.call(s,t)&&U(e,t,s[t]);return e},g=(e,s)=>I(e,j(s));var K=(e,s)=>{for(var t in s)R(e,t,{get:s[t],enumerable:!0})},O=(e,s,t,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of H(s))!M.call(e,i)&&i!==t&&R(e,i,{get:()=>s[i],enumerable:!(n=_(s,i))||n.enumerable});return e};var G=(e,s,t)=>(t=e!=null?N(B(e)):{},O(s||!e||!e.__esModule?R(t,"default",{value:e,enumerable:!0}):t,e)),J=e=>O(R({},"__esModule",{value:!0}),e);var d=(e,s,t)=>new Promise((n,i)=>{var r=u=>{try{c(t.next(u))}catch(f){i(f)}},o=u=>{try{c(t.throw(u))}catch(f){i(f)}},c=u=>u.done?n(u.value):Promise.resolve(u.value).then(r,o);c((t=t.apply(e,s)).next())});var ge={};K(ge,{getStreams:()=>we});module.exports=J(ge);var Q={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function v(t){return d(this,arguments,function*(e,s={}){console.log(`[AnimeVOSTFR] Fetching: ${e}`);let n=yield fetch(e,h({headers:h(h({},Q),s.headers)},s));if(!n.ok)throw new Error(`HTTP error ${n.status} for ${e}`);return yield n.text()})}var x=G(require("cheerio"));var X={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36"},L=e=>{try{return typeof atob=="function"?atob(e):Buffer.from(e,"base64").toString("binary")}catch(s){return e}};function w(t){return d(this,arguments,function*(e,s={}){try{let n=yield fetch(e,g(h({},s),{headers:h(h({},X),s.headers),redirect:"follow"}));if(!n.ok)return null;let i=yield n.text();return{text:()=>Promise.resolve(i),ok:!0,url:n.url,headers:n.headers}}catch(n){return null}})}function b(e){try{if(!e.includes("p,a,c,k,e,d"))return e;let s=new RegExp("eval\\s*\\(\\s*function\\s*\\(\\s*p\\s*,\\s*a\\s*,\\s*c\\s*,\\s*k\\s*,\\s*e\\s*,\\s*d\\s*\\).*?\\}\\s*\\((.*?)\\)\\s*\\)","gs"),t=e,n;for(;(n=s.exec(e))!==null;)try{let r=n[1].match(new RegExp("^'(.*?)',\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*'(.*?)'\\.split\\('\\|'\\)","s"));if(!r)continue;let o=r[1].replace(/\\'/g,"'"),c=parseInt(r[2]),u=parseInt(r[3]),f=r[4].split("|"),a=p=>(p<c?"":a(parseInt(p/c)))+((p=p%c)>35?String.fromCharCode(p+29):p.toString(36)),l={};for(;u--;)l[a(u)]=f[u]||a(u);let m=o.replace(/\b\w+\b/g,p=>l[p]||p);t=t.replace(n[0],m)}catch(i){}return t}catch(s){return e}}function Y(e){return d(this,null,function*(){try{let s=yield w(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!s)return{url:e};let t=yield s.text(),n=t.match(/src\s*:\s*["']([^"']+\.mp4)["']/)||t.match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(n){let i=n[1];return i.startsWith("//")?i="https:"+i:i.startsWith("/")&&(i="https://video.sibnet.ru"+i),{url:i,headers:{Referer:"https://video.sibnet.ru/"}}}}catch(s){}return{url:e}})}function Z(e){return d(this,null,function*(){try{let s=yield w(e,{headers:{Referer:"https://vidmoly.to/"}});if(!s)return{url:e};let t=yield s.text();t.includes("eval(function(p,a,c,k,e,d)")&&(t=b(t));let n=t.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(n)return{url:n[1],headers:{Referer:"https://vidmoly.to/"}}}catch(s){}return{url:e}})}function ee(e){return d(this,null,function*(){try{let s=yield w(e,{headers:{Referer:"https://uqload.com/"}});if(!s)return{url:e};let t=yield s.text(),n=t.match(/sources\s*:\s*\[["']([^"']+\.(?:mp4|m3u8))["']\]/)||t.match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8))["']/);if(n)return{url:n[1],headers:{Referer:"https://uqload.com/"}}}catch(s){}return{url:e}})}function te(e){return d(this,null,function*(){try{let s=yield w(e);if(!s)return{url:e};let t=yield s.text(),n=t.match(/window\.location\.href\s*=\s*['"]([^'"]+)['"]/);if(n){let r=yield w(n[1]);r&&(t=yield r.text())}let i=t.match(/'hls'\s*:\s*'([^']+)'/)||t.match(/"hls"\s*:\s*"([^"]+)"/)||t.match(/https?:\/\/[^"']+\.m3u8[^"']*/);if(i){let r=i[1]||i[0];return r.includes("base64")&&(r=L(r.split(",")[1]||r)),{url:r,headers:{Referer:e}}}}catch(s){}return{url:e}})}function se(e){return d(this,null,function*(){try{let s=yield w(e);if(!s)return{url:e};let t=yield s.text();t.includes("p,a,c,k,e,d")&&(t=b(t));let n=t.match(/robotlink['"]\)\.innerHTML\s*=\s*['"]([^'"]+)['"]\s*\+\s*([^;]+)/);if(n){let i="https:"+n[1],r=n[2].split("+");for(let o of r){let c=o.match(/['"]([^'"]+)['"]/);if(c){let u=c[1],f=o.match(/substring\((\d+)\)/);f&&(u=u.substring(parseInt(f[1]))),i+=u}}return{url:i,headers:{Referer:"https://streamtape.com/"}}}}catch(s){}return{url:e}})}function ne(e){return d(this,null,function*(){try{let s=yield w(e);if(!s)return{url:e};let t=yield s.text(),n=t.match(/video_source\s*:\s*["']([^"']+\.mp4[^"']*)["']/)||t.match(/source\s+src=["']([^"']+\.mp4[^"']*)["']/);if(n)return{url:n[1]}}catch(s){}return{url:e}})}function re(e){return d(this,null,function*(){try{let s=yield w(e);if(!s)return{url:e};let t=yield s.text();t.includes("p,a,c,k,e,d")&&(t=b(t));let n=t.match(/sources\s*:\s*\[["']([^"']+\.(?:m3u8|mp4)[^"']*)["']\]/)||t.match(/file\s*:\s*["']([^"']+\.(?:m3u8|mp4)[^"']*)["']/);if(n){let i=n[1];return i.includes("base64")&&(i=L(i.split(",")[1]||i)),{url:i,headers:{Referer:e}}}}catch(s){}return{url:e}})}function ie(e){return d(this,null,function*(){try{let s=yield w(e);if(!s)return{url:e};let n=(yield s.text()).match(/["'](https?:\/\/[^"']+\.m3u8[^"']*)["']/);if(n)return{url:n[1],headers:{Referer:e}}}catch(s){}return{url:e}})}function ae(e){return d(this,null,function*(){var s;try{let t=((s=e.match(/https?:\/\/([^\/]+)/))==null?void 0:s[1])||"dood.to",n=yield w(e);if(!n)return{url:e};let i=yield n.text();i.includes("eval(function(p,a,c,k,e,d)")&&(i=b(i));let r=i.match(/\$\.get\(['"]\/pass_md5\/([^'"]+)['"]/);if(r){let o=r[1],c=`https://${t}/pass_md5/${o}`,u=yield fetch(c,{headers:{Referer:e}});if(u.ok){let f=yield u.text(),a=Math.random().toString(36).substring(2,12);return{url:f+a+"?token="+o+"&expiry="+Date.now(),headers:{Referer:`https://${t}/`}}}}}catch(t){}return{url:e}})}function oe(e){return d(this,null,function*(){try{let s=yield w(e);if(!s)return{url:e};let n=(yield s.text()).match(/file\s*:\s*["']([^"']+\.(?:mp4|m3u8)[^"']*)["']/);if(n)return{url:n[1],headers:{Referer:e}}}catch(s){}return{url:e}})}function E(e,s=0){return d(this,null,function*(){var i;if(s>3)return g(h({},e),{isDirect:!1});let t=e.url,n=t.toLowerCase();if(!t||t.includes("google-analytics")||t.includes("doubleclick"))return null;if(n.match(/\.(mp4|m3u8|mkv|webm)(\?.*)?$/)&&!n.includes("html"))return g(h({},e),{isDirect:!0});try{let r=null;if(n.includes("sibnet.ru")?r=yield Y(t):n.includes("vidmoly.")?r=yield Z(t):n.includes("uqload.")||n.includes("oneupload.")?r=yield ee(t):n.includes("voe.")?r=yield te(t):n.includes("streamtape.com")||n.includes("stape")?r=yield se(t):n.includes("dood")||n.includes("ds2play")?r=yield ae(t):n.includes("moonplayer")||n.includes("moon.")?r=yield oe(t):n.includes("sendvid.")?r=yield ne(t):n.includes("luluvid.")||n.includes("lulu.")?r=yield re(t):(n.includes("hgcloud.")||n.includes("savefiles."))&&(r=yield ie(t)),r&&r.url!==t)return g(h({},e),{url:r.url,headers:h(h({},e.headers),r.headers||{}),isDirect:!0,originalUrl:t});if(!r||r.url===t){let o=yield w(t,{headers:e.headers});if(o){let c=yield o.text();c.includes("p,a,c,k,e,d")&&(c=b(c));let u=c.match(/https?:\/\/[^"']+\.m3u8[^"']*/)||c.match(/https?:\/\/[^"']+\.mp4[^"']*/)||c.match(/file\s*:\s*["']([^"']+)["']/);if(u){let f=u[1]||u[0];f.startsWith("//")&&(f="https:"+f),f.startsWith("http")&&!f.includes(ce)&&(r={url:f})}if(!r){let f=c.match(/<iframe\s+[^>]*src=["']([^"']+)["']/i);if(f){let a=f[1];if(a.startsWith("//")&&(a="https:"+a),a.startsWith("/")){let l=(i=t.match(/^https?:\/\/[^\/]+/))==null?void 0:i[0];l&&(a=l+a)}if(a.startsWith("http")&&a!==t)return console.log(`[Resolver] Peeling: Found nested iframe -> ${a}`),yield E(g(h({},e),{url:a}),s+1)}}}}if(r&&r.url!==t&&r.url.startsWith("http"))return g(h({},e),{url:r.url,headers:h(h({},e.headers),r.headers||{}),isDirect:!0,originalUrl:t})}catch(r){}return g(h({},e),{isDirect:!1})})}var ce="googletagmanager";var le="https://arm.haglund.dev/api/v2";var ue="https://v3-cinemeta.strem.io";function F(t){return d(this,arguments,function*(e,s={}){try{let n=new AbortController,i=setTimeout(()=>n.abort(),8e3),r=yield fetch(e,g(h({},s),{signal:n.signal}));return clearTimeout(i),r}catch(n){return console.error(`[ArmSync] Fetch failed: ${e}`,n.message),null}})}function C(e,s){return d(this,null,function*(){if(!e)return null;let t=yield F(`${le}/themoviedb?id=${e}`);if(t)try{let r=yield t.json(),o=Array.isArray(r)?r[0]:r;if(o&&o.imdb)return o.imdb}catch(r){}let n=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${e}`,i=yield F(n);if(i){let o=(yield i.text()).match(/imdb\.com\/title\/(tt\d+)/);if(o)return o[1]}return null})}function q(e,s,t){return d(this,null,function*(){var f;if(!e||s===0)return null;let n=yield F(`${ue}/meta/series/${e}.json`);if(!n)return null;let i=yield n.json();if(!((f=i==null?void 0:i.meta)!=null&&f.videos))return null;let r=i.meta.videos.filter(a=>a.season>0&&a.episode>0).sort((a,l)=>a.season-l.season||a.episode-l.episode),o=[],c=new Set;for(let a of r){let l=`${a.season}-${a.episode}`;c.has(l)||(c.add(l),o.push(a))}let u=o.findIndex(a=>a.season==s&&a.episode==t);if(u!==-1){let a=u+1;return console.log(`[ArmSync] Resolved: S${s}E${t} -> Absolute ${a}`),a}return null})}var k="https://animevostfr.org";function fe(e,s){return d(this,null,function*(){try{let t=`https://www.themoviedb.org/${s==="movie"?"movie":"tv"}/${e}?language=en-US`,n=yield v(t),i=x.default.load(n),r=i('meta[property="og:title"]').attr("content")||i("h1").first().text()||i("h2").first().text();return r&&r.includes(" (")&&(r=r.split(" (")[0]),r&&r.includes(" - ")&&(r=r.split(" - ")[0]),r=r?r.trim():null,console.log(`[AnimeVOSTFR] TMDB Title found: ${r}`),r}catch(t){return console.error(`[AnimeVOSTFR] Failed to get title from TMDB: ${t.message}`),null}})}function de(e){return d(this,null,function*(){try{let s=yield v(`${k}/?s=${encodeURIComponent(e)}`),t=x.default.load(s),n=[];t("a").each((f,a)=>{let l=t(a).attr("href")||"",m=t(a).text().trim();l.includes("/animes/")&&m.length>2&&n.push({title:m,url:l})});let i=new Set,r=n.filter(f=>i.has(f.url)?!1:(i.add(f.url),!0));console.log(`[AnimeVOSTFR] Search results: ${r.length}`);let o=f=>f.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),c=o(e),u=r.filter(f=>o(f.title).includes(c));return u.length>0&&console.log(`[AnimeVOSTFR] Found ${u.length} matches for ${e}`),u}catch(s){return console.error(`[AnimeVOSTFR] Search error: ${s.message}`),[]}})}function me(e,s,t){return d(this,null,function*(){try{let n=yield v(e),i=x.default.load(n),r=[];i('a[href*="/episode/"]').each((a,l)=>{let m=i(l).attr("href")||"",p=i(l).text().trim();r.push({url:m,text:p})}),console.log(`[AnimeVOSTFR] Found ${r.length} episode links`);let o=String(t),c=o.padStart(2,"0"),u=[new RegExp(`-episode-${o}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-episode-${c}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-ep-${o}(?:-vostfr|-vf|/|$)`,"i"),new RegExp(`-ep-${c}(?:-vostfr|-vf|/|$)`,"i")],f=[new RegExp(`^\\s*Episode\\s+${o}\\s*$`,"i"),new RegExp(`^\\s*Ep\\s*${o}\\s*$`,"i"),new RegExp(`(?:^|[^0-9])${o}(?:$|[^0-9])`)];for(let a of u){let l=r.find(m=>a.test(m.url));if(l)return console.log(`[AnimeVOSTFR] Found episode in URL: ${l.url}`),l.url}for(let a of f){let l=r.find(m=>a.test(m.text));if(l)return console.log(`[AnimeVOSTFR] Found episode in text: ${l.url}`),l.url}return null}catch(n){return console.error(`[AnimeVOSTFR] Error finding episode: ${n.message}`),null}})}function he(e){return d(this,null,function*(){let s=[];try{let t=yield v(e),n=x.default.load(t),i=[];n(".TPlayerNv li").each((o,c)=>{i.push(n(c).text().trim())});let r=[];n(".TPlayerTb").each((o,c)=>{let u=n(c).find("iframe"),f=n(c).find(".lazy-player");u.length&&u.attr("src")?r.push(u.attr("src")):f.length&&f.attr("data-src")&&r.push(f.attr("data-src"))}),console.log(`[AnimeVOSTFR] Found ${r.length} player tabs`);for(let o=0;o<r.length;o++)try{let c=r[o];c.startsWith("/")&&(c=k+c);let u=yield v(c),a=x.default.load(u)("iframe").attr("src");if(a&&a.startsWith("http")){let l=i[o]||`Lecteur ${o+1}`,m=pe(a),p=yield E({name:"AnimeVOSTFR",title:`${m} (${l})`,url:a,quality:"HD",headers:{Referer:k}});s.push(p)}}catch(c){console.error(`[AnimeVOSTFR] Failed to resolve player ${o}: ${c.message}`)}}catch(t){console.error(`[AnimeVOSTFR] Error extracting players: ${t.message}`)}return s})}function pe(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("uqload")||e.includes("oneupload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("dood")||e.includes("ds2play")?"Doodstream":e.includes("myvi")||e.includes("mytv")?"MyVi":e.includes("sendvid")?"Sendvid":e.includes("stape")||e.includes("streamtape")?"Streamtape":e.includes("moon")?"Moon":"Player"}function W(e,s,t,n){return d(this,null,function*(){let i=yield fe(e,s);if(!i)return[];let r=[n];try{let l=yield C(e,s);if(l){let m=yield q(l,t,n);m&&m!==n&&r.push(m)}}catch(l){console.warn(`[AnimeVOSTFR] ArmSync failed: ${l.message}`)}let o=yield de(i);if(!o||o.length===0)return[];o=o.sort((l,m)=>{let p=l.title.toLowerCase(),T=m.title.toLowerCase(),S=`saison ${t}`,$=p.includes(S),y=T.includes(S);return $&&!y?-1:!$&&y?1:0});let c=[],u=new Set,f=new Set;for(let l of o){if(f.has(l.url))continue;f.add(l.url);let m=l.title.toLowerCase(),T=m.includes(" vf")||l.url.includes("vf")?"VF":"VOSTFR",S=m.match(/saison\s*(\d+)/);if(!(S&&parseInt(S[1])!==t&&r.length===1))for(let $ of r){let y=yield me(l.url,t,$);if(y&&!u.has(y)){u.add(y);let D=yield he(y),P=$===n?"":` (Abs ${$})`;D.forEach(A=>{A.name.includes("(")||(A.name=`AnimeVOSTFR (${T})`),A.title=`${A.title}${P}`}),c.push(...D)}}}c.length===0&&console.warn(`[AnimeVOSTFR] Episode S${t}E${n} not found (targets: ${r.join(", ")})`);let a=c.filter(l=>l&&l.isDirect);return console.log(`[AnimeVOSTFR] Total streams found: ${a.length}`),a})}function we(e,s,t,n){return d(this,null,function*(){console.log(`[AnimeVOSTFR] Request: ${s} ${e} S${t}E${n}`);try{return yield W(e,s,t,n)}catch(i){return console.error("[AnimeVOSTFR] Error:",i),[]}})}
