/**
 * animevostfr - Built from src/animevostfr/
 * Generated: 2026-02-25T10:09:14.926Z
 */
var V=Object.create;var w=Object.defineProperty,O=Object.defineProperties,U=Object.getOwnPropertyDescriptor,E=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var x=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&x(e,r,t[r]);if(y)for(var r of y(t))C.call(t,r)&&x(e,r,t[r]);return e},v=(e,t)=>O(e,E(t));var D=(e,t)=>{for(var r in t)w(e,r,{get:t[r],enumerable:!0})},F=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of q(t))!T.call(e,o)&&o!==r&&w(e,o,{get:()=>t[o],enumerable:!(n=U(t,o))||n.enumerable});return e};var k=(e,t,r)=>(r=e!=null?V(L(e)):{},F(t||!e||!e.__esModule?w(r,"default",{value:e,enumerable:!0}):r,e)),W=e=>F(w({},"__esModule",{value:!0}),e);var u=(e,t,r)=>new Promise((n,o)=>{var s=i=>{try{c(r.next(i))}catch(a){o(a)}},l=i=>{try{c(r.throw(i))}catch(a){o(a)}},c=i=>i.done?n(i.value):Promise.resolve(i.value).then(s,l);c((r=r.apply(e,t)).next())});var Y={};D(Y,{getStreams:()=>X});module.exports=W(Y);var H={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","Accept-Language":"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7","Cache-Control":"max-age=0",Connection:"keep-alive"};function p(r){return u(this,arguments,function*(e,t={}){console.log(`[AnimeVOSTFR] Fetching: ${e}`);let n=yield fetch(e,m({headers:m(m({},H),t.headers)},t));if(!n.ok)throw new Error(`HTTP error ${n.status} for ${e}`);return yield n.text()})}var $=k(require("cheerio"));var M={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"*/*"};function g(r){return u(this,arguments,function*(e,t={}){try{let n=new AbortController,o=setTimeout(()=>n.abort(),1e4),s=yield fetch(e,v(m({},t),{headers:m(m({},M),t.headers),signal:n.signal}));return clearTimeout(o),s}catch(n){return console.error(`[Resolver] Fetch failed for ${e}: ${n.message}`),null}})}function N(e){return u(this,null,function*(){let t=yield g(e,{headers:{Referer:"https://video.sibnet.ru/"}});if(!t)return e;let n=(yield t.text()).match(/"url"\s*:\s*"([^"]+\.mp4)"/);if(n){let o=n[1];return o.startsWith("/")&&(o=`https://video.sibnet.ru${o}`),o}return e})}function P(e){return u(this,null,function*(){let t=yield g(e);if(!t)return e;let n=(yield t.text()).match(/file\s*:\s*"([^"]+)"/);return n?n[1]:e})}function z(e){return u(this,null,function*(){let t=yield g(e);if(!t)return e;let n=(yield t.text()).match(/sources\s*:\s*\["([^"]+)"\]/);return n?n[1]:e})}function K(e){return u(this,null,function*(){let t=yield g(e);if(!t)return e;let r=yield t.text(),n=r.match(/'hls'\s*:\s*'([^']+)'/)||r.match(/"hls"\s*:\s*"([^"]+)"/);return n?n[1]:e})}function B(e){return u(this,null,function*(){let t=yield g(e);if(!t)return e;let n=(yield t.text()).match(/source\s+src="([^"]+\.mp4)"/i);return n?n[1]:e})}function G(e){return u(this,null,function*(){let t=yield g(e.replace("/e/","/d/"));if(!t)return e;let n=(yield t.text()).match(/window\.open\('([^']+)'\)/);return n?n[1]:e})}function A(e){return u(this,null,function*(){let t=e.url,r=t.toLowerCase();try{let n=t;if(r.includes("sibnet.ru")?n=yield N(t):r.includes("vidmoly.")?n=yield P(t):r.includes("uqload.")?n=yield z(t):r.includes("voe.sx")||r.includes("christopheruntilpoint")?n=yield K(t):r.includes("sendvid.com")?n=yield B(t):(r.includes("dood")||r.includes("ds2play")||r.includes("viddood"))&&(n=yield G(t)),n!==t)return console.log(`[Resolver] Success: ${t.substring(0,30)}... -> ${n.substring(0,30)}...`),v(m({},e),{url:n,isDirect:!0,originalUrl:t})}catch(n){console.error(`[Resolver] Failed for ${t}:`,n)}return e})}var S="https://animevostfr.org";function _(e,t){return u(this,null,function*(){try{let r=`https://www.themoviedb.org/${t==="movie"?"movie":"tv"}/${e}?language=en-US`,n=yield p(r),o=$.default.load(n),s=o('meta[property="og:title"]').attr("content")||o("h1").first().text()||o("h2").first().text();return s&&s.includes(" (")&&(s=s.split(" (")[0]),s&&s.includes(" - ")&&(s=s.split(" - ")[0]),s=s?s.trim():null,console.log(`[AnimeVOSTFR] TMDB Title found: ${s}`),s}catch(r){return console.error(`[AnimeVOSTFR] Failed to get title from TMDB: ${r.message}`),null}})}function j(e){return u(this,null,function*(){try{let t=yield p(`${S}/?s=${encodeURIComponent(e)}`),r=$.default.load(t),n=[];r("a").each((a,d)=>{let f=r(d).attr("href")||"",h=r(d).text().trim();f.includes("/animes/")&&h.length>2&&n.push({title:h,url:f})});let o=new Set,s=n.filter(a=>o.has(a.url)?!1:(o.add(a.url),!0));console.log(`[AnimeVOSTFR] Search results: ${s.length}`);let l=a=>a.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[':!.,?]/g,"").replace(/\bthe\s+/g,"").replace(/\s+/g," ").trim(),c=l(e),i=s.find(a=>l(a.title).includes(c)&&(a.url.includes("vostfr")||a.url.includes("voir-")));return i||(i=s.find(a=>l(a.title).includes(c))),!i&&s.length>0&&(i=s[0]),i&&console.log(`[AnimeVOSTFR] Selected: ${i.title} -> ${i.url}`),i||null}catch(t){return console.error(`[AnimeVOSTFR] Search error: ${t.message}`),null}})}function I(e,t,r){return u(this,null,function*(){try{let n=yield p(e),o=$.default.load(n),s=[];o('a[href*="/episode/"]').each((a,d)=>{let f=o(d).attr("href")||"",h=o(d).text().trim();s.push({url:f,text:h})}),console.log(`[AnimeVOSTFR] Found ${s.length} episode links`);let l=[`episode-${r}/`,`episode-${r}`,`saison-${t}-episode-${r}`,`-${t}-episode-${r}`];for(let a of l){let d=s.find(f=>f.url.includes(a));if(d)return console.log(`[AnimeVOSTFR] Found episode: ${d.url}`),d.url}let c=String(r).padStart(1,"0"),i=s.find(a=>{let d=a.url.toLowerCase();return d.includes(`episode-${c}/`)||d.includes(`episode-${c}`)});return i?(console.log(`[AnimeVOSTFR] Found episode (fallback): ${i.url}`),i.url):null}catch(n){return console.error(`[AnimeVOSTFR] Error finding episode: ${n.message}`),null}})}function J(e){return u(this,null,function*(){let t=[];try{let r=yield p(e),n=$.default.load(r),o=[];n(".TPlayerNv li").each((l,c)=>{o.push(n(c).text().trim())});let s=[];n(".TPlayerTb").each((l,c)=>{let i=n(c).find("iframe"),a=n(c).find(".lazy-player");i.length&&i.attr("src")?s.push(i.attr("src")):a.length&&a.attr("data-src")&&s.push(a.attr("data-src"))}),console.log(`[AnimeVOSTFR] Found ${s.length} player tabs`);for(let l=0;l<s.length;l++)try{let c=s[l];c.startsWith("/")&&(c=S+c);let i=yield p(c),d=$.default.load(i)("iframe").attr("src");if(d&&d.startsWith("http")){let f=o[l]||`Lecteur ${l+1}`,h=Q(d),b=yield A({name:"AnimeVOSTFR",title:`${h} (${f})`,url:d,quality:"HD",headers:{Referer:S}});t.push(b)}}catch(c){console.error(`[AnimeVOSTFR] Failed to resolve player ${l}: ${c.message}`)}}catch(r){console.error(`[AnimeVOSTFR] Error extracting players: ${r.message}`)}return t})}function Q(e){return e.includes("sibnet")?"Sibnet":e.includes("vidmoly")?"Vidmoly":e.includes("christopheruntilpoint")||e.includes("voe")?"Voe":e.includes("luluvid")?"Luluvid":e.includes("savefiles")?"Savefiles":e.includes("uqload")?"Uqload":e.includes("hgcloud")?"HGCloud":e.includes("doodstream")||e.includes("vvide0")?"Doodstream":e.includes("myvi")?"MyVi":e.includes("sendvid")?"Sendvid":"Player"}function R(e,t,r,n){return u(this,null,function*(){let o=yield _(e,t);if(!o)return[];let s=yield j(o);if(!s)return[];let l=yield I(s.url,r,n);if(!l)return console.warn(`[AnimeVOSTFR] Episode S${r}E${n} not found`),[];let c=yield J(l);return console.log(`[AnimeVOSTFR] Total streams found: ${c.length}`),c})}function X(e,t,r,n){return u(this,null,function*(){console.log(`[AnimeVOSTFR] Request: ${t} ${e} S${r}E${n}`);try{return yield R(e,t,r,n)}catch(o){return console.error("[AnimeVOSTFR] Error:",o),[]}})}
